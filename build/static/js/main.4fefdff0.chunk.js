(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[0],{170:function(e,t,a){},171:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},193:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},204:function(e,t){},206:function(e,t){},219:function(e,t){},221:function(e,t){},249:function(e,t){},251:function(e,t){},252:function(e,t){},257:function(e,t){},259:function(e,t){},278:function(e,t){},290:function(e,t){},293:function(e,t){},310:function(e,t,a){},317:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(43),c=a.n(o),s=(a(176),a(7)),i=a(15),l=a(9),d=a(8),u=a(14),p=a(11),m=(a(177),a(66)),b=a(35),j=a(38),v=(a(197),a(93)),h=a(0);function g(e){var t,a=e.item;"d"===a.label||"e"===a.label?t="red":"c"===a.label?t="yellow":"a"!==a.label&&"b"!==a.label||(t="green");var n="/products/"+a.barcode;return a.bcProductId&&(n+="/"+a.bcProductId),n+="?cart=no","80135463"===a.barcode&&(a.name="Nutella 200g"),Object(h.jsx)("div",{children:Object(h.jsxs)(u.b,{className:"history-item",to:n,children:[Object(h.jsx)("div",{className:"history-img-container",children:Object(h.jsx)("img",{src:a.image,alt:""})}),Object(h.jsxs)("div",{className:"history-name-container",children:[Object(h.jsx)("div",{className:"history-name",children:a.name}),Object(h.jsx)("div",{className:"history-brand",children:a.brand})]}),Object(h.jsxs)("div",{className:"history-label-container",children:[Object(h.jsx)("div",{style:{color:t},children:"\u25cf"}),Object(h.jsx)("div",{className:"history-label",children:-1==["a","b","c","d","e"].indexOf(a.label)?"":a.label})]}),Object(h.jsx)("div",{style:{marginRight:"10px",color:"rgb(41,72,102)"},children:">"})]})})}var f=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.loadLocalStorageHistory();var e=localStorage.getItem("userId"),t=localStorage.getItem("token");e&&t&&n.setState({userId:e})},n.loadHistoryInformations=function(e){fetch("https://api.lowympact.fr/api/v1/users/".concat(e,"/history"),{method:"get",credentials:"include",headers:new Headers({authorization:localStorage.getItem("token"),"Content-Type":"application/json","api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043"})}).then((function(e){return e.json()})).then((function(e){n.setState({items:null===e||void 0===e?void 0:e.data,loading:!1}),localStorage.setItem("local_history",JSON.stringify(null===e||void 0===e?void 0:e.data))}))},n.loadLocalStorageHistory=function(){var e=JSON.parse(localStorage.getItem("local_history"));if(n.setState({items:e,loading:!1}),!e){var t=localStorage.getItem("userId"),a=localStorage.getItem("token");t&&a&&(n.setState({loading:!0}),n.loadHistoryInformations(t))}},n.state={items:void 0,loading:!0,userId:void 0},n}return Object(i.a)(a,[{key:"render",value:function(){if(this.state.items){var e=Object(h.jsx)(n.Fragment,{});return e=this.loading?Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)("img",{src:"/images/utils/loading.gif",alt:""})}):this.state.items.sort((function(e,t){return Date.parse(new Date(e.date))<Date.parse(new Date(t.date))?1:-1})).map((function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(g,{item:e})},e.barcode+e.bcProductId)})),0===Object.keys(this.state.items).length?Object(h.jsxs)("div",{children:[Object(h.jsx)(j.a,{}),Object(h.jsx)(b.a,{}),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:m.a,className:"logo",alt:"Fruits"}),Object(h.jsx)("p",{className:"logo-text",children:"Commence \xe0 scanner des produits !"})]})})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"screen",children:Object(h.jsx)("div",{className:"screen-title",children:e})}),Object(h.jsx)(j.a,{}),Object(h.jsx)(b.a,{}),this.state.items.length>1?Object(h.jsx)(v.a,{}):Object(h.jsx)(n.Fragment,{})]})}var t=Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:m.a,className:"logo",alt:"Fruits"}),Object(h.jsx)("p",{className:"logo-text",children:"Commence \xe0 scanner des produits !"})]});return this.state.loading&&(t=Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)("img",{src:"/images/utils/loading.gif",alt:""})})),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.a,{}),Object(h.jsx)(b.a,{}),Object(h.jsx)("div",{className:"App",children:t})]})}}]),a}(n.Component),x=(a(170),a(53)),O=a.n(x),y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={connected:!1},e.disconnect=function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),e.props.history.push("/login")},e.componentDidMount=function(){e.Verify()},e.Verify=function(){var t=!0,a=localStorage.getItem("token");if(a){var n=O.a.decode(a,{complete:!0}),r=new Date;n.payload.exp>=r.getTime()/1e3&&(t=!1)}!1===t&&e.setState({connected:!0})},e.displayConnectedProfil=function(){return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("h2",{className:"profil-title",children:"Bienvenue sur ton profil!"}),Object(h.jsx)(u.b,{to:"/stats",className:"profil-button",children:"Statistiques"}),Object(h.jsx)(u.b,{to:"/avis",className:"profil-button",children:"Donnez votre avis !"}),Object(h.jsx)(u.b,{to:"/configuration",className:"profil-button",children:"Configuration"}),Object(h.jsxs)("div",{onClick:e.disconnect,className:"profil-button-disconnect",children:[Object(h.jsx)("div",{className:"material-icons",children:"logout"}),Object(h.jsx)("p",{children:"D\xe9connexion"})]})]})},e.displayUnconnectedProfil=function(){return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("h2",{className:"profil-title",children:"Non connect\xe9"}),Object(h.jsx)("p",{children:"Connecte toi pour que ton historique soit sauvegard\xe9 !"}),Object(h.jsx)(u.b,{to:"/login",className:"profil-button",children:"Me Connecter"})]})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(u.b,{to:"/",children:Object(h.jsx)(j.a,{})}),Object(h.jsxs)("div",{className:"profil-screen",children:[Object(h.jsx)("div",{className:"profil-picture",children:Object(h.jsx)("div",{className:"material-icons",children:"person"})}),this.state.connected?this.displayConnectedProfil():this.displayUnconnectedProfil()]}),Object(h.jsx)(b.a,{})]})}}]),a}(r.a.Component),N=a(19),w=a.n(N),S=a(29),I=a(322),k=a(325),F=a(326),C=(a(310),a(321)),_=a(324),P=a(168),D=a(18),T=a.n(D),E=a(167),M=a(25),L=a(2),A=a.n(L);A.a.Curve=A.a.Path.extend({options:{},initialize:function(e,t){A.a.setOptions(this,t),this._initialUpdate=!0,this._setPath(e)},getPath:function(){return this._coords},setPath:function(e,t){return this._initialUpdate=!0,this._setPath(e),this.redraw()},getBounds:function(){return this._bounds},_setPath:function(e){this._coords=e,this._bounds=this._computeBounds()},_computeBounds:function(){for(var e,t,a,n=new A.a.LatLngBounds,r=0;r<this._coords.length;r++)if("string"==typeof(a=this._coords[r])||a instanceof String)t=a;else if("H"==t)n.extend([e.lat,a[0]]),e=new A.a.latLng(e.lat,a[0]);else if("V"==t)n.extend([a[0],e.lng]),e=new A.a.latLng(a[0],e.lng);else if("C"==t){var o=new A.a.latLng(a[0],a[1]);a=this._coords[++r];var c=new A.a.latLng(a[0],a[1]);a=this._coords[++r];var s=new A.a.latLng(a[0],a[1]);n.extend(o),n.extend(c),n.extend(s),s.controlPoint1=o,s.controlPoint2=c,e=s}else if("S"==t){c=new A.a.latLng(a[0],a[1]);a=this._coords[++r];s=new A.a.latLng(a[0],a[1]),o=e;if(e.controlPoint2){var i=e.lat-e.controlPoint2.lat,l=e.lng-e.controlPoint2.lng;o=new A.a.latLng(e.lat+i,e.lng+l)}n.extend(o),n.extend(c),n.extend(s),s.controlPoint1=o,s.controlPoint2=c,e=s}else if("Q"==t){var d=new A.a.latLng(a[0],a[1]);a=this._coords[++r];s=new A.a.latLng(a[0],a[1]);n.extend(d),n.extend(s),s.controlPoint=d,e=s}else if("T"==t){s=new A.a.latLng(a[0],a[1]),d=e;if(e.controlPoint){i=e.lat-e.controlPoint.lat,l=e.lng-e.controlPoint.lng;d=new A.a.latLng(e.lat+i,e.lng+l)}n.extend(d),n.extend(s),s.controlPoint=d,e=s}else n.extend(a),e=new A.a.latLng(a[0],a[1]);return n},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updatecurve(this)},_project:function(){var e,t,a,n;this._points=[];for(var r=0;r<this._coords.length;r++)if("string"==typeof(e=this._coords[r])||e instanceof String)this._points.push(e),a=e;else{switch(e.length){case 2:n=this._map.latLngToLayerPoint(e),t=e;break;case 1:"H"==a?(n=this._map.latLngToLayerPoint([t[0],e[0]]),t=[t[0],e[0]]):(n=this._map.latLngToLayerPoint([e[0],t[1]]),t=[e[0],t[1]])}this._points.push(n)}}}),A.a.curve=function(e,t){return new A.a.Curve(e,t)},A.a.SVG.include({_updatecurve:function(e){if(this._setPath(e,this._curvePointsToPath(e._points)),e.options.animate){var t=e._path,a=t.getTotalLength();e.options.dashArray||(t.style.strokeDasharray=a+" "+a),e._initialUpdate&&(t.animate([{strokeDashoffset:a},{strokeDashoffset:0}],e.options.animate),e._initialUpdate=!1)}},_curvePointsToPath:function(e){for(var t,a,n="",r=0;r<e.length;r++)if("string"==typeof(t=e[r])||t instanceof String)n+=a=t;else switch(a){case"H":n+=t.x+" ";break;case"V":n+=t.y+" ";break;default:n+=t.x+","+t.y+" "}return n||"M0 0"}});var z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"createLeafletElement",value:function(e){var t=e.positions,a=e.option,n=Object(P.a)(e,["positions","option"]);return A.a.curve(t,a,this.getOptions(n))}},{key:"updateLeafletElement",value:function(e,t){t.positions!==e.positions&&this.leafletElement.setPath(t.positions),this.setStyleIfChanged(e,t)}}]),a}(E.a);z.propTypes={children:T.a.oneOfType([T.a.arrayOf(T.a.node),T.a.node]),option:T.a.object,positions:T.a.array.isRequired};var B=Object(M.b)(z),U=(a(169),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).map=void 0,e.state={zoom:12,swiper:void 0,currentIndex:0,map:void 0},e.getMaterialIcon=function(e){switch(e){case"Charette":return"directions_bike";case"Plane":return"flight_takeoff";case"Train":return"train";case"Boat":return"directions_boat_filled";case"Truck":return"local_shipping";default:return"nature_people"}},e.getTransportMode=function(e){switch(e){case"Charette":return"v\xe9lo";case"Plane":return"avion";case"Train":return"train";case"Boat":return"bateau";case"Truck":return"camion";default:return e}},e.getTranslation=function(e){switch(e){case"maker":return"Fabricant";case"productor":return"Producteur";case"shop":return"Revendeur";default:return e}},e.displaySlides=function(){var t=Object(h.jsx)(r.a.Fragment,{});return e.props.products&&(t=e.props.products.map((function(t){var a,n,r,o,c,s,i,l,d="product-slide-pastille past-green";return(null===(a=t.TransportCO2Impact)||void 0===a?void 0:a.value)>10&&(d="product-slide-pastille past-orange"),(null===(n=t.TransportCO2Impact)||void 0===n?void 0:n.value)>100&&(d="product-slide-pastille past-red"),Object(h.jsx)(C.a,{children:Object(h.jsxs)("div",{className:"product-slide-container",children:[Object(h.jsxs)("div",{className:"product-slide-icon",children:[Object(h.jsx)("span",{className:"material-icons",children:e.getMaterialIcon(t.transport)}),Object(h.jsxs)("div",{className:"product-slide-name",children:[Object(h.jsx)("span",{className:"product-slide-name-product",children:t.productsOutput[0].productName}),Object(h.jsxs)("span",{className:"product-slide-name-transport",children:["Transport en ",e.getTransportMode(t.transport)]})]})]}),Object(h.jsxs)("div",{className:"product-slide-origin-wrapper",children:[Object(h.jsxs)("div",{className:"product-transport-ui",children:[Object(h.jsx)("div",{className:"transport-ui-circle"}),Object(h.jsx)("div",{className:"transport-ui-tiret"}),Object(h.jsx)("div",{className:"transport-ui-circle circle-bis"})]}),Object(h.jsxs)("div",{className:"product-slide-transport-container",children:[Object(h.jsx)("div",{className:"product-slide-bigname",children:Object(h.jsxs)("span",{children:[t.seller.localisation.city,","," ",t.seller.localisation.country]})}),Object(h.jsxs)("div",{className:"product-slide-lowername2",children:[e.getTranslation(null===(r=t.seller)||void 0===r?void 0:r.type),": ",null===(o=t.seller)||void 0===o?void 0:o.name]}),Object(h.jsx)("div",{className:"product-slide-bigname bigname-lower",children:Object(h.jsxs)("span",{children:[t.buyer.localisation.city,","," ",t.buyer.localisation.country]})}),Object(h.jsxs)("div",{className:"product-slide-lowername2",children:[e.getTranslation(null===(c=t.buyer)||void 0===c?void 0:c.type),": ",null===(s=t.buyer)||void 0===s?void 0:s.name]})]})]}),Object(h.jsx)("div",{className:"product-slide-arrow",children:">"}),Object(h.jsxs)("div",{className:"product-slide-consumption",children:[Object(h.jsx)("div",{className:d}),Object(h.jsxs)("div",{children:[Math.round(t.dist.value)," km "]}),Object(h.jsxs)("div",{children:[(null===(i=t.TransportCO2Impact)||void 0===i?void 0:i.value)>1?Math.round(null===(l=t.TransportCO2Impact)||void 0===l?void 0:l.value):"< 1"," ","kg CO2"," "]})]})]})})}))),t},e.handleMarkerClick=function(t,a){var n,r=document.getElementsByClassName("swiper-container");r[0]&&r[0].scrollIntoView({behavior:"smooth"}),a>=(null===(n=e.props.products)||void 0===n?void 0:n.length)?e.state.swiper.slideTo(a-1,500):e.state.swiper.slideTo(a,500);var o=5;if(e.props.products&&e.props.products[a]){var c=e.props.products[a];o=R([c.buyer.localisation.latitude,c.buyer.localisation.longitude],[c.seller.localisation.latitude,c.seller.localisation.longitude])}e.map.leafletElement.flyTo(t,o,{duration:.5})},e.onSlideChange=function(t){e.setState({currentIndex:t});var a=5;if(e.props.products&&e.props.products[t]){var n=e.props.products[t];a=R([n.buyer.localisation.latitude,n.buyer.localisation.longitude],[n.seller.localisation.latitude,n.seller.localisation.longitude]);var r=(parseFloat(n.seller.localisation.latitude)+parseFloat(n.buyer.localisation.latitude))/2,o=(parseFloat(n.seller.localisation.longitude)+parseFloat(n.buyer.localisation.longitude))/2;e.map.leafletElement.flyTo([r,o],a,{duration:.5})}},e.displayMarker=function(){var t=Object(h.jsx)(r.a.Fragment,{});return e.props.products&&(t=e.props.products.map((function(t,a){var n,o,c,s,i,l,d,u,p,m,b=Object(h.jsx)(r.a.Fragment,{}),j=parseFloat(null===t||void 0===t||null===(n=t.buyer)||void 0===n||null===(o=n.localisation)||void 0===o?void 0:o.latitude),v=parseFloat(null===t||void 0===t||null===(c=t.buyer)||void 0===c||null===(s=c.localisation)||void 0===s?void 0:s.longitude),g=Object(h.jsx)(r.a.Fragment,{}),f=parseFloat(null===t||void 0===t||null===(i=t.seller)||void 0===i||null===(l=i.localisation)||void 0===l?void 0:l.latitude),x=parseFloat(null===t||void 0===t||null===(d=t.seller)||void 0===d||null===(u=d.localisation)||void 0===u?void 0:u.longitude),O=0;a===e.state.currentIndex?(p=new A.a.Icon({iconUrl:"/images/utils/map.png",iconRetinaUrl:"/images/utils/map.png",iconSize:new A.a.Point(32,32),className:"leaflet-mark-icon"}),m=new A.a.Icon({iconUrl:"/images/utils/map.png",iconRetinaUrl:"/images/utils/map3.png",iconSize:new A.a.Point(32,32),className:"leaflet-mark-icon"}),O=5):(p=new A.a.Icon({iconUrl:"/images/utils/map2.png",iconRetinaUrl:"/images/utils/map2.png",iconSize:new A.a.Point(25,25),className:"leaflet-mark-icon"}),m=new A.a.Icon({iconUrl:"/images/utils/map2.png",iconRetinaUrl:"/images/utils/map2.png",iconSize:new A.a.Point(25,25),className:"leaflet-mark-icon"})),j&&v&&(b=Object(h.jsx)(I.a,{zIndexOffset:O,icon:p,position:[j,v],onClick:function(){return e.handleMarkerClick([parseFloat(t.buyer.localisation.latitude),parseFloat(t.buyer.localisation.longitude)],a+1)}})),f&&x&&(g=Object(h.jsx)(I.a,{zIndexOffset:O,icon:m,position:[f,x],onClick:function(){return e.handleMarkerClick([parseFloat(t.seller.localisation.latitude),parseFloat(t.seller.localisation.longitude)],a)}}));var y=document.getElementsByClassName("leaflet-interactive");return y&&y[a]&&a===e.state.currentIndex?y[a].setAttribute("stroke","#78be95"):y&&y[a]&&y[a].setAttribute("stroke","#1b3044"),Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("div",{className:"test",children:Object(h.jsx)(B,{positions:Q(f,x,j,v),option:{color:"#1b3044",fill:!1,delay:5e3}})}),b,g]})}))),t},e.render=function(){return Object(h.jsxs)("div",{className:"tracability-container",children:[Object(h.jsx)("div",{className:"product-CO2-total-tracability-container",children:Object(h.jsxs)("span",{className:"product-CO2-total-tracability",children:["Impact total carbone :\xa0",Object(h.jsx)("span",{className:"carbon-total-number",children:parseFloat(e.props.totalCO2Traceability).toFixed(1)}),"kg CO2 soit \xa0",Object(h.jsx)("span",{className:"carbon-total-number",children:parseFloat(.05*e.props.totalCO2Traceability/11*1e3).toFixed(1)}),"kms parcourus en voiture"]})}),Object(h.jsxs)(k.a,{center:[51.505,-.09],zoom:1,minZoom:1,scrollWheelZoom:!0,dragging:!1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,ref:function(t){e.map=t,e.props.getBottomRef(t)},whenCreated:function(t){return e.setState({map:t})},children:[Object(h.jsx)(F.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png"}),e.displayMarker()]}),Object(h.jsx)(_.a,{spaceBetween:10,slidesPerView:1.2,centeredSlides:!0,onSlideChange:function(t){return e.onSlideChange(t.activeIndex)},onSwiper:function(t){return e.setState({swiper:t})},children:e.displaySlides()})]})},e}return a}(r.a.Component));function q(e){return e*Math.PI/180}function R(e,t){var a=function(e,t){var a=q(e[1]),n=q(e[0]),r=q(t[1]),o=q(t[0]),c=o-n,s=r-a,i=Math.pow(Math.sin(c/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(s/2),2);return 2*Math.asin(Math.sqrt(i))}(e,t);return 9-Math.sqrt(150*a)}function Q(e,t,a,n){var r=[e,t],o=[a,n],c=o[1]-r[1],s=o[0]-r[0],i=Math.sqrt(Math.pow(c,2)+Math.pow(s,2)),l=Math.atan2(s,c),d=i/2/Math.cos(.314),u=l+.314,p=d*Math.cos(u)+r[1];return["M",r,"Q",[d*Math.sin(u)+r[0],p],o]}a(311);var H=a(166),V=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={swiper:void 0},e.componentDidMount=function(){e.props.ecoScore&&e.loadAlternatives(e.props.ciqual_code)},e.componentDidUpdate=function(t){t.ciqual_code!==e.props.ciqual_code&&e.props.ciqual_code&&e.loadAlternatives(e.props.ciqual_code)},e.loadAlternatives=function(t){e.setState({alternatives:"loading"}),fetch("https://api.lowympact.fr/api/v1/alternatives/".concat(t)).then((function(e){return e.json()})).then((function(t){var a,n,r,o,c,s,i,l,d,u,p,m,b;t.success&&(null===(a=t.data)||void 0===a?void 0:a.alternativesInfos)?0==(null===(n=t.data)||void 0===n||null===(r=n.alternativesInfos)||void 0===r||null===(o=r.a)||void 0===o?void 0:o.length)&&0==(null===(c=t.data)||void 0===c||null===(s=c.alternativesInfos)||void 0===s||null===(i=s.b)||void 0===i?void 0:i.length)&&0==(null===(l=t.data)||void 0===l||null===(d=l.alternativesInfos)||void 0===d||null===(u=d.c)||void 0===u?void 0:u.length)&&0==(null===(p=t.data)||void 0===p||null===(m=p.alternativesInfos)||void 0===m||null===(b=m.d)||void 0===b?void 0:b.length)?e.setState({alternatives:void 0}):e.setState({alternatives:t.data.alternativesInfos}):e.setState({alternatives:void 0})}))},e.renderListAlternatives=function(t){r.a.Fragment;return t.map((function(t){var a="/products/"+t.id;return"8001505005707"===t.id&&(a+="/24"),t.id!==e.props.barcode?Object(h.jsx)("div",{className:"carousel",children:Object(h.jsxs)("a",{href:a,className:"product-alternative",children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:t.img_url,className:"product-alternative-image",alt:""})}),Object(h.jsxs)("div",{className:"product-alternative-text",children:[Object(h.jsx)("label",{className:"product-alternative-title",children:t.name}),Object(h.jsx)("label",{className:"product-alternative-brand"}),Object(h.jsx)(W,{item:t})]}),Object(h.jsx)("div",{className:"product-alternative-fleche",children:">"})]})},t.id):Object(h.jsx)(r.a.Fragment,{})}))},e.alternativesloop=function(){var t,a=Object(h.jsx)(r.a.Fragment,{});if(e.state.alternatives&&"loading"!==e.state.alternatives&&""!==e.state.alternatives)switch(e.state.alternatives.a.sort((function(e,t){return t.eco_score-e.eco_score})),e.state.alternatives.b.sort((function(e,t){return t.eco_score-e.eco_score})),e.state.alternatives.c.sort((function(e,t){return t.eco_score-e.eco_score})),e.state.alternatives.d.sort((function(e,t){return t.eco_score-e.eco_score})),e.props.ecoScore){case"a":return;case"b":if(0==(t=e.state.alternatives.a).length)return;a=e.renderListAlternatives(t);break;case"c":if(0==(t=e.state.alternatives.a.concat(e.state.alternatives.b)).length)return;a=e.renderListAlternatives(t);break;case"d":if(0==(t=e.state.alternatives.a.concat(e.state.alternatives.b).concat(e.state.alternatives.c)).length)return;a=e.renderListAlternatives(t);break;case"e":if(0==(t=e.state.alternatives.a.concat(e.state.alternatives.b).concat(e.state.alternatives.c).concat(e.state.alternatives.d)).length)return;a=e.renderListAlternatives(t)}return a},e.render=function(){var t="";t=e.state.alternatives?"loading"===e.state.alternatives?"Chargement des alternatives ...":"Alternatives":"Pas d'alternatives disponible";var a=e.alternativesloop();return e.state.alternatives&&"loading"!==e.state.alternatives&&""!==e.state.alternatives&&a?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("span",{className:"title-part-environnement",children:t}),Object(h.jsx)(H.Carousel,{autoPlay:!1,interval:1e5,centerMode:!0,centerSlidePercentage:90,showThumbs:!1,showIndicators:!1,showStatus:!1,children:a})]}):Object(h.jsx)(r.a.Fragment,{})},e}return a}(r.a.Component);function W(e){var t,a,n=e.item;return n.eco_score<=33?(t="red",a="Mauvais"):n.eco_score>33&&n.eco_score<67?(t="yellow",a="Moyen"):(t="green",a="Bonne"),Object(h.jsxs)("div",{className:"product-alternative-label-position",children:[Object(h.jsxs)("div",{className:"product-alternative-label",children:[Object(h.jsx)("div",{style:{color:t},children:"\u25cf"}),Object(h.jsxs)("div",{className:"product-alternative-label-text",children:[n.eco_score,"/100"]})]}),Object(h.jsx)("div",{className:"product-alternative-label-level ",children:a})]})}var J=a(323),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={polygon:[],activeCountry:""},e.componentDidMount=function(){e.getCountries()},e.setActiveCountry=function(t){e.setState({activeCountry:t})},e.getCountries=function(){var t;null===(t=e.props.origins)||void 0===t||t.map((function(t){return"en:ghana"!==t&&fetch("https://api.lowympact.fr/api/v1/countries/".concat(t)).then((function(e){return e.json()})).then((function(t){var a,n=e.state.polygon;t.success&&(null===(a=t.data)||void 0===a?void 0:a.country)&&(n.push({geo:t.data.country.coordinates,name:t.data.country.name}),e.setState({polygon:n,activeCountry:e.state.activeCountry+t.data.country.name+", "}))})),!0}))},e.render=function(){return 0===e.state.polygon.length?Object(h.jsx)(r.a.Fragment,{}):Object(h.jsxs)("div",{className:"environnement-map-container",children:[Object(h.jsxs)("div",{className:"product-co2-impact-header",children:[Object(h.jsx)("div",{className:"product-co2-impact-logo",children:Object(h.jsx)("div",{className:"material-icons icon-label-co2-impact",children:"place"})}),Object(h.jsxs)("div",{className:"product-co2-impact-title",children:[Object(h.jsx)("div",{className:"product-co2-impact-title-text",children:"Provenance des ingr\xe9dients"}),Object(h.jsxs)("div",{className:"product-co2-impact-title-label",children:["Pays d'origine : ",e.state.activeCountry]})]})]}),Object(h.jsxs)(k.a,{center:[51.505,-.09],zoom:-1,minZoom:0,className:"environnement-map",scrollWheelZoom:!0,dragging:!1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,whenCreated:function(t){return e.setState({map:t})},children:[Object(h.jsx)(F.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png"}),e.state.polygon.map((function(t,a){return t?Object(h.jsx)(J.a,{onClick:function(){return e.setActiveCountry(t.name)},color:"color:white",fillColor:e.activeCountry===t.name?"blue":"green",opacity:"1",positions:t.geo},a):Object(h.jsx)(r.a.Fragment,{})}))]})]})},e}return a}(r.a.Component),Z=(a(317),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={alea:3},e.setAlea=function(t){var a=e.state.alea+t;a>11&&(a=0),a<0&&(a=11),e.setState({alea:a})},e.render=function(){var t,a;if(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.co2_total){var n,o,c,s,i,l,d,u,p,m,b,j,v,g,f,x,O,y,N,w,S,I,k,F,C,_,P,D,T,E,M,L,A,z,B,U,q=[{image:"agriculture",name:"Agriculture",percent:(100*parseFloat(null===(n=e.props.dataEcoScore)||void 0===n||null===(o=n.agribalyse)||void 0===o?void 0:o.co2_agriculture)/parseFloat(null===(c=e.props.dataEcoScore)||void 0===c||null===(s=c.agribalyse)||void 0===s?void 0:s.co2_total)).toFixed(0)},{image:"local_shipping",name:"Transport",percent:(100*parseFloat(null===(i=e.props.dataEcoScore)||void 0===i||null===(l=i.agribalyse)||void 0===l?void 0:l.co2_transportation)/parseFloat(null===(d=e.props.dataEcoScore)||void 0===d||null===(u=d.agribalyse)||void 0===u?void 0:u.co2_total)).toFixed(0)},{image:"view_in_ar",name:"Emballage",percent:(100*parseFloat(null===(p=e.props.dataEcoScore)||void 0===p||null===(m=p.agribalyse)||void 0===m?void 0:m.co2_packaging)/parseFloat(null===(b=e.props.dataEcoScore)||void 0===b||null===(j=b.agribalyse)||void 0===j?void 0:j.co2_total)).toFixed(0)},{image:"transform",name:"Transformation",percent:(100*parseFloat(null===(v=e.props.dataEcoScore)||void 0===v||null===(g=v.agribalyse)||void 0===g?void 0:g.co2_processing)/parseFloat(null===(f=e.props.dataEcoScore)||void 0===f||null===(x=f.agribalyse)||void 0===x?void 0:x.co2_total)).toFixed(0)},{image:"store",name:"Distribution",percent:(100*parseFloat(null===(O=e.props.dataEcoScore)||void 0===O||null===(y=O.agribalyse)||void 0===y?void 0:y.co2_distribution)/parseFloat(null===(N=e.props.dataEcoScore)||void 0===N||null===(w=N.agribalyse)||void 0===w?void 0:w.co2_total)).toFixed(0)},{image:"microwave",name:"Consommation",percent:(100*parseFloat(null===(S=e.props.dataEcoScore)||void 0===S||null===(I=S.agribalyse)||void 0===I?void 0:I.co2_consumption)/parseFloat(null===(k=e.props.dataEcoScore)||void 0===k||null===(F=k.agribalyse)||void 0===F?void 0:F.co2_total)).toFixed(0)}];q=q.map((function(e){return Object(h.jsxs)("div",{className:"empreinte-single",children:[Object(h.jsx)("div",{className:"material-icons",children:e.image}),Object(h.jsxs)("div",{className:"name",children:[e.name," : "]}),Object(h.jsxs)("div",{className:"pourcent",children:[e.percent," %"]})]},e.name)}));var R=Y(parseFloat(null===(C=e.props.dataEcoScore)||void 0===C||null===(_=C.agribalyse)||void 0===_?void 0:_.co2_total),e.state.alea),Q="cmauve";return(null===(P=e.props.dataEcoScore)||void 0===P||null===(D=P.agribalyse)||void 0===D?void 0:D.co2_total)<15&&(Q="cred"),(null===(T=e.props.dataEcoScore)||void 0===T||null===(E=T.agribalyse)||void 0===E?void 0:E.co2_total)<7&&(Q="corange"),(null===(M=e.props.dataEcoScore)||void 0===M||null===(L=M.agribalyse)||void 0===L?void 0:L.co2_total)<3&&(Q="cgreen"),(null===(A=e.props.dataEcoScore)||void 0===A||null===(z=A.agribalyse)||void 0===z?void 0:z.co2_total)<1&&(Q="cdarkgreen"),Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsxs)("div",{className:"empreinte-carbone-container",children:[Object(h.jsxs)("div",{className:"empreinte-carbone-header",children:[Object(h.jsxs)("div",{className:"header-text",children:[Object(h.jsx)("div",{className:"header-main",children:"Empreinte Carbone"}),Object(h.jsx)("div",{className:"header-small",children:"source : ADEME"})]}),Object(h.jsxs)("div",{className:"empreinte-carbone-number",children:[Object(h.jsxs)("span",{children:[parseFloat(null===(B=e.props.dataEcoScore)||void 0===B||null===(U=B.agribalyse)||void 0===U?void 0:U.co2_total).toFixed(2),"kg CO2e"]}),Object(h.jsx)("div",{className:"circle "+Q})]})]}),Object(h.jsxs)("div",{className:"empreinte-carbone-equivalent",children:[Object(h.jsx)("div",{className:"icon-container",children:Object(h.jsx)("div",{className:"material-icons",children:Object(h.jsx)("img",{src:"/images/alternatives/".concat(R[1]),alt:"alternative"})})}),Object(h.jsxs)("div",{className:"equivalent-container",children:[Object(h.jsx)("div",{className:"text-small",children:"Soit l'\xe9quivalent..."}),Object(h.jsx)("div",{className:"text-big",children:R[0]})]})]}),Object(h.jsxs)("div",{className:"arrow",children:[Object(h.jsx)("div",{className:"material-icons",onClick:function(){return e.setAlea(1)},children:"arrow_back_ios"}),Object(h.jsx)("div",{className:"material-icons",onClick:function(){return e.setAlea(-1)},children:"arrow_forward_ios"})]})]}),Object(h.jsxs)("div",{className:"empreinte-carbone-container no-margin-container",children:[Object(h.jsx)("div",{className:"empreinte-carbone-header",children:Object(h.jsxs)("div",{className:"header-text",children:[Object(h.jsx)("div",{className:"header-main",children:"R\xe9partition de l'empreinte Carbone"}),Object(h.jsx)("div",{className:"header-small",children:"selon les diff\xe9rentes \xe9tapes du cycle de vie"})]})}),Object(h.jsx)("div",{className:"empreinte-carbone-repartition",children:q})]})]})}return Object(h.jsx)(r.a.Fragment,{})},e}return a}(r.a.Component));function Y(e,t){switch(t){case 0:return["De la production de "+(e/.0046).toFixed(0)+" feuilles de papier blanc 80g","paper.png"];case 1:return["De la production de "+(e/.6).toFixed(1)+" kg de pommes de terre en France","potatoe.png"];case 2:return["De la production de "+(e/.53).toFixed(1)+" kg de fraises en France","strawberry.png"];case 3:return["De "+(e/.193).toFixed(1)+" km parcourus par une personne en voiture","car.svg"];case 4:return["De "+(e/.137).toFixed(1)+" km parcourus par une personne en Bus de ville","bus.svg"];case 5:return["De "+(e/.019).toFixed(0)+" e-mails envoy\xe9s contenant une pi\xe8ce jointe d'1mo","mail.svg"];case 6:return["De "+(e/.5).toFixed(1)+" jour(s) d'\xe9clairage d'une ampoule \xe0 incandescence","light.svg"];case 7:return["De "+(e/.24).toFixed(1)+" heures de chauffage au gaz d'un appartement moyen de 70m\xb2","appartment.svg"];case 8:return["De la production de "+(1e3*e/33.8).toFixed(0)+" grammes de steak hach\xe9 de boeuf cru","steak.png"];case 9:return["De "+(e/.083).toFixed(1)+" jours d'\xe9clairage d'une ampoule basse consommation","light.svg"];case 10:return["De "+(e/.105).toFixed(1)+" kilom\xe8tres parcourus en Trotinette \xe9lectrique (en France)","trotinette.png"];case 11:return["D'une personne parcourant "+100*(e/.3).toFixed(0)+" kilom\xe8tres en TGV (en France)","train.png"];default:return["De "+(e/.105).toFixed(1)+" kilom\xe8tres parcourus en Trotinette \xe9lectrique (en France)","trotinette.png"]}}var K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={width:void 0,materials:[]},e.getColor=function(e){return e>67?"green":e<=33?"red":"yellow"},e.getColorImpact=function(e){return e>70?"green":e<=40?"red":"yellow"},e.getLabel=function(e){return e>67?"Bon":e<=33?"Mauvais":"Moyen"},e.getLabelImpact=function(e){return e>60?"Impact fort":e<=30?"Impact faible":"Impact moyen"},e.getLabelImpactPackaging=function(e){return e>2?"Impact faible":e<-2?"Impact fort":"Impact moyen"},e.getColorImpactPackaging=function(e){return e>2?"green":e<-2?"red":"yellow"},e.updateWindowDimensions=function(){e.setState({width:window.innerWidth})},e.displayPackagingDetailImpact=function(){var t,a,n,o=Object(h.jsx)(r.a.Fragment,{});if(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.adjustments)||void 0===a||null===(n=a.packaging)||void 0===n?void 0:n.packagings){var c,s,i,l=[],d=r.a.Fragment;null===(c=e.props.dataEcoScore)||void 0===c||null===(s=c.adjustments)||void 0===s||null===(i=s.packaging)||void 0===i||i.packagings.map((function(e){return"unknown"!==(null===e||void 0===e?void 0:e.material.split(":")[1])&&l.push(null===e||void 0===e?void 0:e.material.split(":")[1]),!0})),d=l.filter((function(e,t){return l.indexOf(e)===t})).map((function(e){var t="";return l.indexOf(e)<l.length-1&&(t=" ; "),Object(h.jsx)(r.a.Fragment,{children:Object(h.jsxs)("span",{children:[e," ",t]})},e)})),o=l.length>0?Object(h.jsx)(r.a.Fragment,{children:Object(h.jsx)("div",{className:"product-co2-impact-content",children:Object(h.jsxs)("div",{className:"product-packaging-impact-content-details-text",children:["Mat\xe9riaux utilis\xe9s : \xa0",d]})})}):Object(h.jsx)(r.a.Fragment,{children:Object(h.jsx)("div",{className:"product-co2-impact-content",children:Object(h.jsx)("div",{className:"product-packaging-impact-content-details-text",children:"Mat\xe9riaux utilis\xe9s : \xa0 Inconnu"})})})}return o},e.displayPackagingImpact=function(){var t,a,n,o,c,s,i,l,d,u=Object(h.jsx)(r.a.Fragment,{});return(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.adjustments)||void 0===a||null===(n=a.packaging)||void 0===n?void 0:n.value)?Object(h.jsxs)("div",{className:"product-co2-impact-container",children:[Object(h.jsxs)("div",{className:"product-co2-impact-header",children:[Object(h.jsx)("div",{className:"product-co2-impact-logo",children:Object(h.jsx)("div",{className:"material-icons icon-label-co2-impact",children:"view_in_ar"})}),Object(h.jsxs)("div",{className:"product-co2-impact-title",children:[Object(h.jsx)("div",{className:"product-co2-impact-title-text",children:"Impact de l'emballage"}),Object(h.jsx)("div",{className:"product-co2-impact-title-label",children:e.getLabelImpactPackaging(null===(o=e.props.dataEcoScore)||void 0===o||null===(c=o.adjustments)||void 0===c||null===(s=c.packaging)||void 0===s?void 0:s.value)})]}),Object(h.jsx)("div",{className:"product-transport-impact-color-label",style:{color:e.getColorImpactPackaging(null===(i=e.props.dataEcoScore)||void 0===i||null===(l=i.adjustments)||void 0===l||null===(d=l.packaging)||void 0===d?void 0:d.value)},children:"\u25cf"})]}),e.displayPackagingDetailImpact()]}):u},e.render=function(){var t,a;return e.props.barcode?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Z,{dataEcoScore:e.props.dataEcoScore}),e.props.origins?Object(h.jsx)(G,{origins:e.props.origins}):Object(h.jsx)(r.a.Fragment,{}),Object(h.jsx)(V,{barcode:e.props.barcode,ecoScore:e.props.ecoScore,ciqual_code:null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.code})]}):Object(h.jsx)(r.a.Fragment,{})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}}]),a}(r.a.Component),X=(a(171),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={barcode:e.props.match.params.barcode,bcProductId:e.props.match.params.bcProductId,product:void 0,productImageUrl:void 0,productName:void 0,genericName:void 0,ecoScore:void 0,dataEcoScore:void 0,value:0,connected:!1,productData:void 0,userId:void 0,cart:0,totalCO2Traceability:void 0,countries:[]},e.isFlipping=!1,e.getBottomRef=function(t){e.bottomComponent=t},e.componentDidMount=function(){e.Verify();var t=localStorage.getItem("userId");t&&(e.setState({userId:t}),e.loadCartInfo(t)),e.loadFromOpenFoodFacts(e.props.match.params.barcode),e.props.match.params.bcProductId&&e.loadProductInformations(e.props.match.params.barcode,e.props.match.params.bcProductId)},e.handleBarCodeUpdate=function(){e.state.barcode!==e.props.match.params.barcode&&(e.setState({barcode:e.props.match.params.barcode,bcProductId:e.props.match.params.bcProductId}),e.loadFromOpenFoodFacts(e.props.match.params.barcode),e.props.match.params.bcProductId&&e.loadProductInformations(e.props.match.params.barcode,e.props.match.params.bcProductId))},e.Verify=function(){var t=!0,a=localStorage.getItem("token");if(a){var n=O.a.decode(a,{complete:!0}),r=new Date;n.payload.exp>=r.getTime()/1e3&&(t=!1)}!1===t&&e.setState({connected:!0})},e.loadProductInformations=function(t,a){fetch("https://api.lowympact.fr/api/v1/products/".concat(t,"?bcProductId=").concat(a),{method:"get",credentials:"include",headers:new Headers({"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(t){var a,n,r;e.setState({products:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.traceability,impact:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.impact,totalCO2Traceability:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.transportCO2Impact})}))},e.loadFromOpenFoodFacts=function(t){var a;fetch("https://world.openfoodfacts.org/api/v0/product/".concat(t,".json/")).then((function(e){return e.json()})).then((function(n){var r,o,c,s,i,l,d,u=null===n||void 0===n||null===(r=n.product)||void 0===r?void 0:r.image_url,p=null===n||void 0===n||null===(o=n.product)||void 0===o?void 0:o.product_name,m=null===n||void 0===n||null===(c=n.product)||void 0===c?void 0:c.generic_name,b=null===n||void 0===n||null===(s=n.product)||void 0===s?void 0:s.ecoscore_grade;a=null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.ecoscore_data;var j=null===n||void 0===n||null===(l=n.product)||void 0===l?void 0:l.origins_hierarchy;j&&""!=j&&e.setState({origins:j}),(null===n||void 0===n?void 0:n.product)&&e.setState({productData:n.product}),u&&e.setState({productImageUrl:u}),p&&e.setState({productName:p}),m&&e.setState({genericName:m}),!b||"a"!==b&&"b"!==b&&"c"!==b&&"d"!==b&&"e"!==b||e.setState({ecoScore:b}),a&&e.setState({dataEcoScore:a}),1===n.status&&e.saveHistory(),"80135463"===t&&e.setState({productName:"Nutella 200g"});switch(null===(d=n.product)||void 0===d?void 0:d.ecoscore_grade){case"b":"a";break;case"c":"b";break;case"d":case"e":"c"}}))},e.loadCartInfo=function(t){t&&e.state.barcode&&fetch("https://api.lowympact.fr/api/v1/users/".concat(t,"/cart/").concat(e.state.barcode,"?bcProductAddress=").concat(e.state.bcProductId),{method:"get",credentials:"include",headers:new Headers({Authorization:localStorage.getItem("token"),"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(t){var a;(console.log(t),t.success)&&e.setState({cart:null===(a=t.data)||void 0===a?void 0:a.quantity})}))},e.saveHistory=Object(S.a)(w.a.mark((function t(){var a,n,r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=window.location.search,n=new URLSearchParams(a),"no"===n.get("cart")){t.next=12;break}return t.next=6,$(2e3);case 6:r=JSON.parse(localStorage.getItem("local_history")),null,(r=r?null===(o=r)||void 0===o?void 0:o.filter((function(t){return!(t.barcode==e.state.barcode&&t.bcProductId==e.state.bcProductId)})):[]).push({barcode:e.state.barcode,bcProductId:e.state.bcProductId,brand:e.state.productData.brands,image:e.state.productImageUrl,label:e.state.ecoScore,name:e.state.productName,date:Date.now()}),localStorage.setItem("local_history",JSON.stringify(r)),e.state.userId&&fetch("https://api.lowympact.fr/api/v1/users/".concat(e.state.userId,"/history"),{method:"put",credentials:"include",headers:new Headers({Authorization:localStorage.getItem("token"),"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"}),body:JSON.stringify({barcode:e.state.barcode,bcProductAddress:e.state.bcProductId})}).then((function(e){return e.json()})).then((function(e){}));case 12:case"end":return t.stop()}}),t)}))),e.addToCart=function(){if(e.state.barcode&&e.state.cart>=0){var t,a,n,r,o=-1;if(null===(t=e.state.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.co2_total)o=parseFloat(null===(n=e.state.dataEcoScore)||void 0===n||null===(r=n.agribalyse)||void 0===r?void 0:r.co2_total);var c="unknown";e.state.ecoScore&&(c=e.state.ecoScore),e.flip(),fetch("https://api.lowympact.fr/api/v1/users/".concat(e.state.userId,"/cart"),{method:"put",credentials:"include",headers:new Headers({Authorization:localStorage.getItem("token"),"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"}),body:JSON.stringify({barcode:e.state.barcode,bcProductAddress:e.state.bcProductId,quantityDelta:1,ecoscore:c,carbonImpact:o})}).then((function(e){return e.json()})).then((function(t){t.success&&e.setState({cart:e.state.cart+1})}))}},e.removeFromCart=function(){if(e.state.barcode&&e.state.cart>0){var t,a;e.flip();var n,r,o=-1;if(null===(t=e.state.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.co2_total)o=parseFloat(null===(n=e.state.dataEcoScore)||void 0===n||null===(r=n.agribalyse)||void 0===r?void 0:r.co2_total);var c="unkown";e.state.ecoScore&&(c=e.state.ecoScore),fetch("https://api.lowympact.fr/api/v1/users/".concat(e.state.userId,"/cart"),{method:"put",credentials:"include",headers:new Headers({Authorization:localStorage.getItem("token"),"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"}),body:JSON.stringify({barcode:e.state.barcode,bcProductAddress:e.state.bcProductId,quantityDelta:-1,ecoscore:c,carbonImpact:o})}).then((function(e){return e.json()})).then((function(t){t.success&&e.setState({cart:e.state.cart-1})}))}},e.flip=function(){var t=Object(S.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.imageFlip&&!e.state.isFlipping&&("rotateY(360deg)"===e.imageFlip.style.transform?e.imageFlip.style.transform="rotateY(0deg)":e.imageFlip.style.transform="rotateY(360deg)");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.displayImage=function(){e.handleBarCodeUpdate();var t=Object(h.jsx)(r.a.Fragment,{}),a=Object(h.jsx)(r.a.Fragment,{}),n=Object(h.jsx)(r.a.Fragment,{}),o=Object(h.jsx)(r.a.Fragment,{});if(e.state.productImageUrl&&(t=Object(h.jsx)("img",{src:e.state.productImageUrl,className:"product-image",alt:"produit"})),e.state.productName&&(a=Object(h.jsx)("div",{className:"product-name",children:e.state.productName})),e.state.ecoScore){var c="color_score_"+e.state.ecoScore;o=Object(h.jsxs)("div",{className:"product-ecoscore-image",children:[Object(h.jsx)("span",{className:"circle-score "+c,children:"\u2b24 "}),"EcoScore :",Object(h.jsx)("span",{className:"uppercase ",children:" "+e.state.ecoScore})]})}else e.state.genericName&&(n=Object(h.jsx)("div",{className:"product-generic-name",children:e.state.genericName}));return Object(h.jsxs)(r.a.Fragment,{children:[e.state.userId?Object(h.jsxs)("div",{className:e.state.cart>0?"add-to-cart green":"add-to-cart",onClick:e.addToCart,children:[Object(h.jsx)("span",{className:"cart-count",children:e.state.cart>0?e.state.cart:""}),Object(h.jsx)("span",{className:"material-icons",children:"add_shopping_cart"})]}):Object(h.jsx)(r.a.Fragment,{}),e.state.cart>0?Object(h.jsx)("div",{className:"remove-from-cart",onClick:e.removeFromCart,children:Object(h.jsx)("span",{className:"material-icons",children:"remove_shopping_cart"})}):Object(h.jsx)(r.a.Fragment,{}),t,a,Object(h.jsxs)("div",{className:"product-bottom-image-div",children:[n,o]})]})},e.handleChange=function(t,a){if(e.setState({value:a}),1===a){var n=document.getElementsByClassName("swiper-container");n[0]&&n[0].scrollIntoView({behavior:"smooth"})}},e.displayNavbar=function(){var t=Object(h.jsx)(r.a.Fragment,{});return e.state.bcProductId&&(t=Object(h.jsxs)("div",{className:"product-navbar-container",children:[Object(h.jsx)("button",{className:0===e.state.value?"product-navbar-button selected":"product-navbar-button",onClick:function(){return e.handleChange("",0)},children:"Environnement"}),Object(h.jsx)("button",{className:1===e.state.value?"product-navbar-button selected":"product-navbar-button",onClick:function(){return e.handleChange("",1)},children:"Tra\xe7abilit\xe9"}),Object(h.jsx)("div",{className:0===e.state.value?"navbar-under nav-left":"navbar-under nav-right"})]})),t},e.render=function(){var t,a=null===(t=e.state.products)||void 0===t?void 0:t.sort((function(e,t){return e.depth>t.depth?-1:1}));return Object(h.jsx)(r.a.Fragment,{children:Object(h.jsxs)("div",{className:"product-page-container",children:[Object(h.jsxs)("div",{className:"product-header-container",children:[Object(h.jsx)("div",{className:"product-history-link",children:Object(h.jsxs)(u.b,{to:"/history",children:[" ","<"," Historique"]})}),Object(h.jsx)("img",{className:"product-bitmap-image",src:"/images/utils/bitmap.png",alt:""})]}),Object(h.jsx)("div",{className:"product-image-container",ref:function(t){return e.imageFlip=t},children:e.displayImage()}),e.displayNavbar(),0===e.state.value?Object(h.jsx)(K,{dataEcoScore:e.state.dataEcoScore,ecoScore:e.state.ecoScore,origins:e.state.origins,displayTranportImpact:null!==e.props.match.params.bcProductId&&void 0!==e.props.match.params.bcProductId,barcode:e.props.match.params.barcode}):Object(h.jsx)("div",{className:"product-bottom-container",children:Object(h.jsx)(U,{products:a,getBottomRef:e.getBottomRef,totalCO2Traceability:e.state.totalCO2Traceability})}),Object(h.jsx)(b.a,{barcode:e.props.match.params.barcode,bcProductId:e.props.match.params.bcProductId})]})})},e}return a}(r.a.Component)),$=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ee=r.a.lazy((function(){return a.e(5).then(a.bind(null,340))})),te=r.a.lazy((function(){return a.e(11).then(a.bind(null,335))})),ae=r.a.lazy((function(){return a.e(8).then(a.bind(null,342))})),ne=r.a.lazy((function(){return a.e(7).then(a.bind(null,343))})),re=r.a.lazy((function(){return a.e(6).then(a.bind(null,339))})),oe=r.a.lazy((function(){return Promise.all([a.e(10),a.e(9)]).then(a.bind(null,341))})),ce=r.a.lazy((function(){return a.e(4).then(a.bind(null,336))})),se=r.a.lazy((function(){return a.e(3).then(a.bind(null,337))})),ie=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsx)(u.a,{children:Object(h.jsx)(n.Suspense,{fallback:Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)("div",{className:"loadingio-spinner-ripple-4o0kkyduuq4",children:Object(h.jsxs)("div",{className:"ldio-44krslet1tn",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})}),children:Object(h.jsxs)(p.d,{children:[Object(h.jsx)(p.b,{path:"/history",component:f,exact:!0},1),Object(h.jsx)(p.b,{path:"/profil",component:y,exact:!0},2),Object(h.jsx)(p.b,{path:"/login",component:ee,exact:!0}),Object(h.jsx)(p.b,{path:"/",component:ee,exact:!0},1),Object(h.jsx)(p.b,{path:"/products/:barcode/:bcProductId",component:X,exact:!0}),Object(h.jsx)(p.b,{path:"/products/:barcode",component:X,exact:!0}),Object(h.jsx)(p.b,{path:"/signup",component:ae,exact:!0}),Object(h.jsx)(p.b,{path:"/signin",component:ne,exact:!0}),Object(h.jsx)(p.b,{path:"/configuration",component:re,exact:!0}),Object(h.jsx)(p.b,{path:"/stats",component:oe,exact:!0}),Object(h.jsx)(p.b,{path:"/debug",component:ce,exact:!0}),Object(h.jsx)(p.b,{path:"/avis",component:se,exact:!0}),Object(h.jsx)(p.b,{path:"/error404",component:te}),Object(h.jsx)(p.a,{to:"/error404"})]})})})}}]),a}(n.Component),le=function(e){e&&e instanceof Function&&a.e(12).then(a.bind(null,338)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ie,{})}),document.getElementById("root")),le()},35:function(e,t,a){"use strict";var n=a(7),r=a(15),o=a(9),c=a(8),s=(a(178),a(1)),i=a.n(s),l=(a(179),a(0));var d=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"button-logo",children:Object(l.jsx)("span",{className:"material-icons",children:"history"})}),Object(l.jsx)("div",{children:"Historique"})]})};var u=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:Object(l.jsx)("span",{className:"material-icons",children:"person"})}),Object(l.jsx)("div",{children:"Profil"})]})};var p=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"navbar-scan-icon",children:Object(l.jsx)("span",{className:"material-icons",children:"qr_code_scanner"})})})},m=a(19),b=a.n(m),j=a(29),v=a(161),h=a(32),g=a.n(h),f=a(162),x=a.n(f),O=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,noBackCamera:!1,usedCamera:0,devices:[],processingImage:0,text:0,mutlipleTracks:!1,no_permission:!1},e.switchCamera=function(){var t=e.state.usedCamera+1;t>=e.state.devices.length&&(t=0),e.setState({usedCamera:t}),g.a.stop(),e.QuaggaInit(e.state.devices[t].deviceId)},e.componentDidMount=Object(j.a)(b.a.mark((function t(){var a,n,r,o,c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=window.location.search,n=new URLSearchParams(a),"false"!=n.get("camera")){t.next=7;break}e.setState({error:!0,text:1}),t.next=24;break;case 7:if(!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)){t.next=23;break}return t.next=10,navigator.mediaDevices.enumerateDevices().then((function(e){return e.filter((function(e){return"videoinput"===e.kind}))}));case 10:return r=t.sent,e.setState({devices:r}),0===(o=r.filter((function(e){return null!=e.label.match(/back/)}))).length&&(e.setState({noBackCamera:!0}),o=r),console.log(o),c=o.map(function(){var t=Object(j.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:a.deviceId}}}).then((function(t){var a=t.getVideoTracks().map((function(e){return console.log(e),e.getCapabilities?e.getCapabilities():[{}]}));return t.getTracks().forEach((function(e){return e.stop()})),a.length>1&&e.setState({mutlipleTracks:!0}),a[0]}),(function(e){return console.log(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=18,Promise.all(c);case 18:(s=t.sent).sort((function(e,t){return(e.width.max+e.height.max)/2>(t.width.max+t.height.max)/2?-1:1})),s[0]?e.QuaggaInit(s[0]):e.QuaggaInit({}),t.next=24;break;case 23:e.setState({error:!0,text:3});case 24:case"end":return t.stop()}}),t)}))),e.QuaggaInit=function(t){g.a.init({inputStream:{type:"LiveStream",constraints:Object(v.a)({},t)},locator:{patchSize:"normal",halfSample:!1},locate:!1,area:{top:"40%",right:"25%",left:"25%",bottom:"40%"},numOfWorkers:window.navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader"]},multiple:!1,singleChannel:!1},(function(a){if(a)return console.log(a),"NotAllowedError: Permission denied"==a&&e.setState({no_permission:!0}),e.setState({error:!0,text:a+" "+JSON.stringify(t)}),!1;g.a.start()})),e.props.setQuagga(g.a),g.a.onDetected(e._onDetected)},e._onDetected=function(){var t=Object(j.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onDetected(a);case 2:n=t.sent,console.log(n),n&&g.a.stop();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDrop=function(t){try{if(1!=e.state.processingImage){e.setState({processingImage:1}),console.log(t[t.length-1]);var a=new FileReader;a.readAsDataURL(t[t.length-1]),a.onloadend=function(){g.a.decodeSingle({decoder:{readers:["ean_reader"]},locate:!0,src:a.result},(function(t){var a;(console.log(t),t)?(e._onDetected(t),e.setState({processingImage:2}),console.log("result",null===(a=t.codeResult)||void 0===a?void 0:a.code)):(console.log("not detected"),e.setState({processingImage:3}))}))}}}catch(n){console.log(n),e.setState({processingImage:4})}},e.setImport=function(){e.setState({error:!e.state.error})},e}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){g.a.offDetected(this._onDetected)}},{key:"render",value:function(){var e=Object(l.jsx)(i.a.Fragment,{});return 1==this.state.processingImage&&(e=Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("p",{children:"Chargement en cours..."})})),2==this.state.processingImage&&(e=Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("p",{children:"Ce produit n'existe pas dans la base de donn\xe9es"})})),3==this.state.processingImage&&(e=Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("p",{children:"Code barre non trouv\xe9 sur l'image, merci de r\xe9essayer"})})),4==this.state.processingImage&&(e=Object(l.jsx)(i.a.Fragment,{children:Object(l.jsxs)("p",{children:["Mauvais format ou fichier trop grand, merci de r\xe9essayer. ",Object(l.jsx)("br",{}),"Taille max : 5mb ",Object(l.jsx)("br",{}),"Formats: jpg, png, gif"]})})),Object(l.jsxs)(i.a.Fragment,{children:[Object(l.jsx)("div",{id:"interactive",className:this.state.error?"hidden":"viewport"}),this.state.error?Object(l.jsxs)("div",{className:"scan-error",children:[Object(l.jsx)(x.a,{withIcon:!0,withPreview:!1,buttonText:Object(l.jsxs)("div",{className:"button-import",children:[Object(l.jsx)("div",{className:"material-icons",children:"add_a_photo"}),Object(l.jsx)("p",{children:"Prendre une photo"})]}),onChange:this.onDrop,label:"",imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:5242880,labelClass:"import-label"}),Object(l.jsx)("p",{className:"red",children:e}),Object(l.jsxs)("p",{className:"error-message-import",children:[this.state.no_permission?Object(l.jsx)("div",{className:"no-permission",children:"L'acc\xe8s \xe0 votre cam\xe9ra est bloqu\xe9 : Vous pouvez l'autoriser dans les param\xe8tres de votre navigateur pour acc\xe9der au scanner"}):Object(l.jsx)(i.a.Fragment,{}),Object(l.jsx)("br",{})]})]}):Object(l.jsx)(i.a.Fragment,{}),this.state.mutlipleTracks?Object(l.jsx)("h1",{className:"debug",children:"If you see this, tell me"}):""]})}}]),a}(s.Component),y=a(163),N=a.n(y),w=(a(191),a(11)),S=(a(193),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={scanning:!0,status:"",results:[],usedCameraId:"3f6fc4177028f25c3e8215f4444838450630b8d656c627ef511346545d37f302",devices:[],reading:!1,barcode:void 0,bcProductId:void 0,Quagga:void 0},e.setQuagga=function(t){e.state.Quagga&&e.state.Quagga.stop(),e.setState({Quagga:t})},e._scan=function(){e.setState({scanning:!e.state.scanning,status:""})},e._onDetected=function(){var t=Object(j.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}if(!a.codeResult||!a.codeResult.code){t.next=18;break}return e.setState({results:[a],scanning:!0,status:"waiting"}),t.next=5,fetch("https://world.openfoodfacts.org/api/v0/product/".concat(a.codeResult.code,".json/"));case 5:return n=t.sent,t.next=8,n.json();case 8:if(0===t.sent.status){t.next=16;break}return e.setState({scanning:!1,status:"found",barcode:a.codeResult.code}),e.props.showScanner(!1),e.state.Quagga&&e.state.Quagga.stop(),t.abrupt("return",!0);case 16:return e.setState({scanning:!0,status:"not found"}),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleScan=function(t){if(t){var a=t.split("/");a.length>1&&e.setState({scanning:!1,barcode:a[4],bcProductId:a[5],status:"found"}),e.state.Quagga&&e.state.Quagga.stop()}},e.handleError=function(e){console.error(e)},e.displayQrCode=function(){return"found"!==e.state.status?Object(l.jsx)(N.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"},showViewFinder:!1}):Object(l.jsx)(i.a.Fragment,{})},e.displayBarCode=function(){return"found"!==e.state.status?Object(l.jsxs)(i.a.Fragment,{children:[Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("ul",{className:"results",children:e.state.results.map((function(t,a){var n;return Object(l.jsxs)("div",{children:["waiting"===e.state.status?"V\xe9rification du code : "+(null===t||void 0===t||null===(n=t.codeResult)||void 0===n?void 0:n.code):"","not found"===e.state.status?"Code non trouv\xe9, merci de r\xe9essayer":""]},t.codeResult.code+a)}))})}),e.state.scanning?Object(l.jsx)(O,{onDetected:e._onDetected,setQuagga:e.setQuagga,usedCameraId:e.usedCameraId}):null]}):Object(l.jsx)(i.a.Fragment,{})},e.switchReader=function(){e.state.reading?e.setState({reading:!1}):(e.state.Quagga&&e.state.Quagga.stop(),e.setState({reading:!0}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return this.state.barcode&&this.state.bcProductId&&(this.props.barcode!==this.state.barcode||this.props.bcProductId!==this.state.bcProductId)?Object(l.jsx)(w.a,{to:"/products/"+this.state.barcode+"/"+this.state.bcProductId}):this.state.barcode&&this.props.barcode!==this.state.barcode?Object(l.jsx)(w.a,{to:"/products/"+this.state.barcode}):Object(l.jsxs)("div",{className:"code-reader-container",children:[Object(l.jsx)("span",{className:"close",onClick:function(){e.state.Quagga&&e.state.Quagga.stop(),e.props.showScanner(!1)},children:"\xd7"}),this.displayBarCode()]})}}]),a}(s.Component)),I=a(14),k=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showScanner:!1,barcode:void 0,bcProductId:void 0,height:0},e.updateWindowDimensions=function(){e.setState({height:window.innerHeight})},e.handleScannerButton=function(t){e.setState({showScanner:t})},e.render=function(){return e.state.height<550?Object(l.jsx)(i.a.Fragment,{}):e.state.showScanner?Object(l.jsx)(S,{showScanner:e.handleScannerButton,history:e.props.history}):Object(l.jsx)(i.a.Fragment,{children:Object(l.jsxs)("div",{className:"navbar-container",children:[Object(l.jsx)(I.b,{to:"/history",className:"/history"===window.location.pathname?"navbar-link navbar-text-left navbar-selected":"navbar-link navbar-text-left ",children:Object(l.jsx)(d,{})}),Object(l.jsx)("div",{onClick:function(){return e.handleScannerButton(!0)},children:Object(l.jsx)("div",{className:"navbar-circle",children:Object(l.jsx)(p,{})})}),Object(l.jsx)("span",{className:"navbar-scan-text",children:"Scan"}),Object(l.jsx)(I.b,{to:"/profil",className:"/profil"===window.location.pathname?"navbar-link navbar-text-right navbar-selected":"navbar-link navbar-text-right ",children:Object(l.jsx)(u,{})})]})})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}}]),a}(i.a.Component);t.a=k},38:function(e,t,a){"use strict";a(196);var n=a(94),r=a(63),o=a(1),c=a.n(o),s=a(0);t.a=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:r.a,className:"blob-top",alt:"Blob"})}),e.history?Object(s.jsx)(c.a.Fragment,{}):Object(s.jsxs)(c.a.Fragment,{children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:r.a,className:"blob-left",alt:"Blob"})}),Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:r.a,className:"blob-right",alt:"Blob"})})," "]}),Object(s.jsxs)("div",{className:"header-container",children:[Object(s.jsx)("img",{src:n.a,className:"header-logo",alt:"Logo"}),Object(s.jsx)("span",{children:"Lowympact"})]})]})}},63:function(e,t,a){"use strict";t.a=a.p+"static/media/bitmap.6f490d5b.png"},66:function(e,t,a){"use strict";t.a=a.p+"static/media/fruits-vegetables-basket-by-oblik-studio.7d5e1c64.svg"},93:function(e,t,a){"use strict";var n=a(27),r=a(1),o=a(65),c=a.n(o),s=function(e){var t=c()().toISOString();localStorage.setItem(e,t)};function i(e,t){var a=c()(function(e){return localStorage.getItem(e)}(e)),n=c()().diff(a,"days");return isNaN(n)||n>t}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Object(r.useState)(i(e,t)),o=Object(n.a)(a,2),c=o[0],l=o[1],d=function(){l(!1),s(e)};return[c,d]},d=function(){if(navigator.standalone)return!1;var e=window.navigator.userAgent,t=!!e.match(/iPad/i),a=!!e.match(/iPhone/i);return t||a},u=function(){var e=l("iosInstallPromptedAt"),t=Object(n.a)(e,2),a=t[0],r=t[1];return[d()&&a,r]},p=function(){var e=Object(r.useState)(),t=Object(n.a)(e,2),a=t[0],o=t[1],c=l("webInstallPromptedAt"),s=Object(n.a)(c,2),i=s[0],d=s[1];Object(r.useEffect)((function(){var e=function(e){e.preventDefault(),i&&(o(e),localStorage.setItem("installPrompt",e))};return window.addEventListener("beforeinstallprompt",e),function(){return window.removeEventListener("beforeinstallprompt",e)}}),[i]);return[a,function(){d(),o(null)},function(){prompt=localStorage.getItem("installPrompt"),prompt.prompt(),prompt.userChoice.then((function(e){"accepted"!==e.outcome&&d(),localStorage.getItem("installPrompt",null)}))}]},m=(a(198),a(0));t.a=function(){var e=u(),t=Object(n.a)(e,2),a=t[0],r=t[1],o=p(),c=Object(n.a)(o,3),s=c[0],i=c[1],l=c[2];return a||s?Object(m.jsx)("div",{className:"install-popup",children:Object(m.jsxs)("div",{className:"install-popup-wrapper",children:[Object(m.jsx)("img",{className:"mx-auto",style:{borderTopRightRadius:"50%",borderTopLeftRadius:"50%",backgroundColor:"#fff",marginTop:"-50px"},width:"100px",src:"pwa-512x512.png",alt:"Icon"}),Object(m.jsxs)("div",{children:[a&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("h3",{children:"T\xe9l\xe9chargez l'application"})}),Object(m.jsxs)("div",{className:"text-center",children:["Cliquez sur ","  ",Object(m.jsx)("span",{className:"material-icons",children:"ios_share"}),"  ","puis \"Ajouter \xe0 l'\xe9cran d'accueil\""]}),Object(m.jsx)("div",{className:"button-dissmiss",children:Object(m.jsx)("button",{onClick:r,children:"Pas maintenant"})})]}),s&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("h3",{children:"Ne passez plus \xe0 c\xf4t\xe9 des alternatives durables"})}),Object(m.jsxs)("div",{className:"android-wrapper",children:[Object(m.jsx)("button",{className:"install-button",onClick:l,children:"Installer l'application"}),Object(m.jsx)("button",{className:"dont-install-button",onClick:i,children:"Pas maintenant"})]})]})]})]})}):null}},94:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.b235ef42.svg"}},[[319,1,2]]]);
//# sourceMappingURL=main.4fefdff0.chunk.js.map