(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[8],{327:function(e,t,s){},342:function(e,t,s){"use strict";s.r(t),s.d(t,"validEmail",(function(){return g}));var a=s(19),r=s.n(a),n=s(29),i=s(7),c=s(15),o=s(9),u=s(8),l=s(1),p=s.n(l),m=s(11),d=s(0);var h=function(){return Object(d.jsx)("div",{children:"Cr\xe9er mon compte"})},j=s(66),b=s(38),f=(s(327),s(14)),v=s(93),g=new RegExp("^[a-zA-Z0-9._:$!%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]$"),x=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={userName:"",email:"",password:"",confirmPassword:"",errors:[],redirect:!1,submit:!1},e.signUser=Object(n.a)(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.lowympact.fr/api/v1/users/",{method:"post",credentials:"include",headers:new Headers({"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"}),body:JSON.stringify({username:e.state.userName,email:e.state.email,password:e.state.password})}).then((function(e){return e.json()})).then((function(t){var s=[];return t.success?(localStorage.setItem("token",t.token),localStorage.setItem("userId",t._id),e.props.history.push("/history")):s.push("Il y a d\xe9j\xe0 un compte avec ce mail ou une erreur r\xe9seau."),e.setState({errors:s}),s}));case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var t=Object(n.a)(r.a.mark((function t(s){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),0!==(a=e.validate()).length){t.next=6;break}return t.next=5,e.signUser();case 5:a=t.sent;case 6:0===a.length&&e.setState({redirect:!0});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.displayErrors=function(){p.a.Fragment;return e.state.errors.map((function(e){return Object(d.jsx)("p",{children:e})}))},e}return Object(c.a)(s,[{key:"validate",value:function(){var e=[];return 0===this.state.userName.length&&e.push("Saissez votre nom"),0===this.state.email.length&&e.push("Saissez votre adresse e-mail"),!1===g.test(this.state.email)&&e.push("Saissez une adresse e-mail valide"),this.state.password.length<6&&e.push("Entre un mot de passe. 6 car\xe0cteres minimum requis"),this.state.password!==this.state.confirmPassword&&e.push("Les mots de passe ne correspondent pas"),this.setState({errors:e}),e}},{key:"render",value:function(){var e=this;return this.state.redirect?Object(d.jsx)(m.a,{to:"/history"}):Object(d.jsxs)(p.a.Fragment,{children:[Object(d.jsx)(f.b,{to:"/login",children:Object(d.jsx)(b.a,{})}),Object(d.jsx)("div",{className:"logo-fruits",children:Object(d.jsx)("img",{src:j.a,className:"logo",alt:"Fruits"})}),Object(d.jsx)(f.b,{className:"back-button",to:"/login",children:"< Retour"}),Object(d.jsxs)("div",{className:"signup-container",children:[Object(d.jsxs)("form",{className:"forms",children:[Object(d.jsxs)("label",{children:["nom",Object(d.jsx)("input",{className:"input-forms",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})},type:"text"})]}),Object(d.jsxs)("label",{children:["email",Object(d.jsx)("input",{className:"input-forms",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},type:"email"})]}),Object(d.jsxs)("label",{children:["mot de passe",Object(d.jsx)("input",{className:"input-forms",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},type:"password"})]}),Object(d.jsxs)("label",{children:["confirmer mot de passe",Object(d.jsx)("input",{className:"input-forms",value:this.state.passwordConfirm,onChange:function(t){return e.setState({confirmPassword:t.target.value})},type:"password"})]})]}),Object(d.jsx)("label",{className:"errors-signup",children:this.displayErrors()}),Object(d.jsx)("div",{className:"button-signup",onClick:this.handleSubmit,children:Object(d.jsx)(h,{})})]}),Object(d.jsx)(v.a,{})]})}}]),s}(l.Component);t.default=x}}]);
//# sourceMappingURL=8.13b50704.chunk.js.map