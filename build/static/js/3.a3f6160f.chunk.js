(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[3],{334:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var s=n(7),a=n(9),o=n(8),r=n(1),c=n.n(r),i=(n(334),n(14)),l=n(38),u=n(35),d=n(53),p=n.n(d),j=n(0),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={value:"",sent:0},e.componentDidMount=function(){e.Verify()},e.Verify=function(){var t=!0,n=localStorage.getItem("token");if(n){var s=p.a.decode(n,{complete:!0}),a=new Date;s.payload.exp>=a.getTime()/1e3&&(t=!1)}!0===t&&(localStorage.clear(),e.props.history.push("/login"))},e.setValue=function(t){e.setState({value:t.target.value})},e.send=function(){var t=localStorage.getItem("userId");e.setState({sent:1}),t&&fetch("https://api.lowympact.fr/api/v1/users/".concat(t,"/review"),{method:"put",credentials:"include",headers:new Headers({Authorization:localStorage.getItem("token"),"api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043","Content-Type":"application/json"}),body:JSON.stringify({message:e.state.value})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.success?e.setState({sent:2}):e.setState({sent:3})}))},e.render=function(){var t=Object(j.jsx)(c.a.Fragment,{});return 0==e.state.sent&&(t=Object(j.jsx)("button",{onClick:e.send,children:"Envoyer ! "})),1==e.state.sent&&(t=Object(j.jsx)("div",{children:"Envoi en cours ..."})),2==e.state.sent&&(t=Object(j.jsx)("div",{children:" Message bien envoy\xe9 ! "})),3==e.state.sent&&(t=Object(j.jsx)("div",{children:"Erreur de r\xe9seau, merci de r\xe9essayer plus tard :/"})),Object(j.jsxs)("div",{children:[Object(j.jsx)(i.b,{to:"/",children:Object(j.jsx)(l.a,{})}),Object(j.jsx)(u.a,{}),Object(j.jsx)("div",{className:"avis-container",children:Object(j.jsxs)("div",{className:"avis",children:[Object(j.jsx)("h2",{children:"Votre avis est important pour nous !"}),Object(j.jsx)("p",{children:"Cette application est le r\xe9sultat d'un petit projet de 6 \xe9tudiants Lyonnais, et \xe0 besoin de nombreuses am\xe9liorations !"}),Object(j.jsxs)("p",{children:["Vos retours nous aident \xe0 nous am\xe9liorer, n'h\xe9sitez pas \xe0 nous \xe9crire !"," "]}),Object(j.jsx)("textarea",{placeholder:" Donnez-nous votre avis ! ",maxLength:500,value:e.state.value,onChange:e.setValue}),t]})})]})},e}return n}(c.a.Component);t.default=h}}]);
//# sourceMappingURL=3.a3f6160f.chunk.js.map