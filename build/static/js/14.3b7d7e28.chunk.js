(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[14,3],{103:function(e,t,a){},121:function(e,t,a){},125:function(e,t,a){"use strict";var n=a(13),r=a(15),i=a(14),o=(a(103),a(104),a(225)),s=a(229),c=a(230),l=a(347),d=a(353),u=a(129),p=a(16),m=a(8),v=a.n(m),g=a(128),j=a(45),h=a(40),b=a.n(h);b.a.Curve=b.a.Path.extend({options:{},initialize:function(e,t){b.a.setOptions(this,t),this._initialUpdate=!0,this._setPath(e)},getPath:function(){return this._coords},setPath:function(e,t){return this._initialUpdate=!0,this._setPath(e),this.redraw()},getBounds:function(){return this._bounds},_setPath:function(e){this._coords=e,this._bounds=this._computeBounds()},_computeBounds:function(){for(var e,t,a,n=new b.a.LatLngBounds,r=0;r<this._coords.length;r++)if("string"==typeof(a=this._coords[r])||a instanceof String)t=a;else if("H"==t)n.extend([e.lat,a[0]]),e=new b.a.latLng(e.lat,a[0]);else if("V"==t)n.extend([a[0],e.lng]),e=new b.a.latLng(a[0],e.lng);else if("C"==t){var i=new b.a.latLng(a[0],a[1]);a=this._coords[++r];var o=new b.a.latLng(a[0],a[1]);a=this._coords[++r];var s=new b.a.latLng(a[0],a[1]);n.extend(i),n.extend(o),n.extend(s),s.controlPoint1=i,s.controlPoint2=o,e=s}else if("S"==t){o=new b.a.latLng(a[0],a[1]);a=this._coords[++r];s=new b.a.latLng(a[0],a[1]),i=e;if(e.controlPoint2){var c=e.lat-e.controlPoint2.lat,l=e.lng-e.controlPoint2.lng;i=new b.a.latLng(e.lat+c,e.lng+l)}n.extend(i),n.extend(o),n.extend(s),s.controlPoint1=i,s.controlPoint2=o,e=s}else if("Q"==t){var d=new b.a.latLng(a[0],a[1]);a=this._coords[++r];s=new b.a.latLng(a[0],a[1]);n.extend(d),n.extend(s),s.controlPoint=d,e=s}else if("T"==t){s=new b.a.latLng(a[0],a[1]),d=e;if(e.controlPoint){c=e.lat-e.controlPoint.lat,l=e.lng-e.controlPoint.lng;d=new b.a.latLng(e.lat+c,e.lng+l)}n.extend(d),n.extend(s),s.controlPoint=d,e=s}else n.extend(a),e=new b.a.latLng(a[0],a[1]);return n},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updatecurve(this)},_project:function(){var e,t,a,n;this._points=[];for(var r=0;r<this._coords.length;r++)if("string"==typeof(e=this._coords[r])||e instanceof String)this._points.push(e),a=e;else{switch(e.length){case 2:n=this._map.latLngToLayerPoint(e),t=e;break;case 1:"H"==a?(n=this._map.latLngToLayerPoint([t[0],e[0]]),t=[t[0],e[0]]):(n=this._map.latLngToLayerPoint([e[0],t[1]]),t=[e[0],t[1]])}this._points.push(n)}}}),b.a.curve=function(e,t){return new b.a.Curve(e,t)},b.a.SVG.include({_updatecurve:function(e){if(this._setPath(e,this._curvePointsToPath(e._points)),e.options.animate){var t=e._path,a=t.getTotalLength();e.options.dashArray||(t.style.strokeDasharray=a+" "+a),e._initialUpdate&&(t.animate([{strokeDashoffset:a},{strokeDashoffset:0}],e.options.animate),e._initialUpdate=!1)}},_curvePointsToPath:function(e){for(var t,a,n="",r=0;r<e.length;r++)if("string"==typeof(t=e[r])||t instanceof String)n+=a=t;else switch(a){case"H":n+=t.x+" ";break;case"V":n+=t.y+" ";break;default:n+=t.x+","+t.y+" "}return n||"M0 0"}});var f=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"createLeafletElement",value:function(e){var t=e.positions,a=e.option,n=Object(u.a)(e,["positions","option"]);return b.a.curve(t,a,this.getOptions(n))}},{key:"updateLeafletElement",value:function(e,t){t.positions!==e.positions&&this.leafletElement.setPath(t.positions),this.setStyleIfChanged(e,t)}}]),a}(g.a);f.propTypes={children:v.a.oneOfType([v.a.arrayOf(v.a.node),v.a.node]),option:v.a.object,positions:v.a.array.isRequired};var x=Object(j.b)(f),O=a(0),y=a.n(O),w=a(1),N=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))).map=void 0,e.state={zoom:12,swiper:void 0,currentIndex:0,map:void 0},e.getMaterialIcon=function(e){switch(e){case"Charette":return"directions_bike";case"Plane":return"flight_takeoff";case"Train":return"train";case"Boat":return"directions_boat_filled";case"Truck":return"local_shipping";default:return"nature_people"}},e.getTransportMode=function(e){switch(e){case"Charette":return"v\xe9lo";case"Plane":return"avion";case"Train":return"train";case"Boat":return"bateau";case"Truck":return"camion";default:return e}},e.getTranslation=function(e){switch(e){case"maker":return"Fabricant";case"productor":return"Producteur";case"shop":return"Revendeur";default:return e}},e.displaySlides=function(){var t=Object(w.jsx)(y.a.Fragment,{});return e.props.products&&(t=e.props.products.map((function(t){var a,n,r,i,o,s,c,d,u,p="product-slide-pastille past-green";return(null===(a=t.TransportCO2Impact)||void 0===a?void 0:a.value)>10&&(p="product-slide-pastille past-orange"),(null===(n=t.TransportCO2Impact)||void 0===n?void 0:n.value)>100&&(p="product-slide-pastille past-red"),Object(w.jsx)(l.a,{children:Object(w.jsxs)("div",{className:"product-slide-container",children:[Object(w.jsxs)("div",{className:"product-slide-icon",children:[Object(w.jsx)("span",{className:"material-icons",children:e.getMaterialIcon(t.transport)}),Object(w.jsxs)("div",{className:"product-slide-name",children:[Object(w.jsx)("span",{className:"product-slide-name-product",children:t.productsOutput[0].productName}),Object(w.jsxs)("span",{className:"product-slide-name-transport",children:["Transport en ",e.getTransportMode(t.transport)]})]})]}),Object(w.jsxs)("div",{className:"product-slide-origin-wrapper",children:[Object(w.jsxs)("div",{className:"product-transport-ui",children:[Object(w.jsx)("div",{className:"transport-ui-circle"}),Object(w.jsx)("div",{className:"transport-ui-tiret"}),Object(w.jsx)("div",{className:"transport-ui-circle circle-bis"})]}),Object(w.jsxs)("div",{className:"product-slide-transport-container",children:[Object(w.jsx)("div",{className:"product-slide-bigname",children:Object(w.jsxs)("span",{children:[t.seller.localisation.city,","," ",t.seller.localisation.country]})}),Object(w.jsxs)("div",{className:"product-slide-lowername2",children:[e.getTranslation(null===(r=t.seller)||void 0===r?void 0:r.type),(null===(i=t.seller)||void 0===i?void 0:i.name)?": ":null,null===(o=t.seller)||void 0===o?void 0:o.name]}),Object(w.jsx)("div",{className:"product-slide-bigname bigname-lower",children:Object(w.jsxs)("span",{children:[t.buyer.localisation.city,","," ",t.buyer.localisation.country]})}),Object(w.jsxs)("div",{className:"product-slide-lowername2",children:[e.getTranslation(null===(s=t.buyer)||void 0===s?void 0:s.type),": ",null===(c=t.buyer)||void 0===c?void 0:c.name]})]})]}),Object(w.jsx)("div",{className:"product-slide-arrow",onClick:function(){return e.handleSwipeClick(1)},children:">"}),Object(w.jsx)("div",{className:"product-slide-arrow-left",onClick:function(){return e.handleSwipeClick(-1)},children:"<"}),Object(w.jsxs)("div",{className:"product-slide-consumption",children:[Object(w.jsx)("div",{className:p}),Object(w.jsxs)("div",{children:[Math.round(t.dist.value)," km "]}),Object(w.jsxs)("div",{children:[(null===(d=t.TransportCO2Impact)||void 0===d?void 0:d.value)>.009?parseFloat(null===(u=t.TransportCO2Impact)||void 0===u?void 0:u.value).toFixed(2):"< 0.01"," ","kg CO2"," "]})]})]})})}))),t},e.handleSwipeClick=function(t){var a;console.log(e.state.currentIndex);var n=e.state.currentIndex+t;n>=(null===(a=e.props.products)||void 0===a?void 0:a.length)?e.state.swiper.slideTo(n-1,500):n<0?(n=0,e.state.swiper.slideTo(n,500)):e.state.swiper.slideTo(n,500)},e.handleMarkerClick=function(t,a){var n,r=document.getElementsByClassName("swiper-container");r[0]&&r[0].scrollIntoView({behavior:"smooth"}),a>=(null===(n=e.props.products)||void 0===n?void 0:n.length)?e.state.swiper.slideTo(a-1,500):e.state.swiper.slideTo(a,500);var i=5;if(e.props.products&&e.props.products[a]){var o=e.props.products[a];i=C([o.buyer.localisation.latitude,o.buyer.localisation.longitude],[o.seller.localisation.latitude,o.seller.localisation.longitude])}e.map.leafletElement.flyTo(t,i,{duration:.5})},e.onSlideChange=function(t){e.setState({currentIndex:t});var a=5;if(e.props.products&&e.props.products[t]){var n=e.props.products[t];a=C([n.buyer.localisation.latitude,n.buyer.localisation.longitude],[n.seller.localisation.latitude,n.seller.localisation.longitude]);var r=(parseFloat(n.seller.localisation.latitude)+parseFloat(n.buyer.localisation.latitude))/2,i=(parseFloat(n.seller.localisation.longitude)+parseFloat(n.buyer.localisation.longitude))/2;e.map.leafletElement.flyTo([r,i],a,{duration:.5})}},e.displayMarker=function(){var t=Object(w.jsx)(y.a.Fragment,{});return e.props.products&&(t=e.props.products.map((function(t,a){var n,r,i,s,c,l,d,u,p,m,v=Object(w.jsx)(y.a.Fragment,{}),g=parseFloat(null===t||void 0===t||null===(n=t.buyer)||void 0===n||null===(r=n.localisation)||void 0===r?void 0:r.latitude),j=parseFloat(null===t||void 0===t||null===(i=t.buyer)||void 0===i||null===(s=i.localisation)||void 0===s?void 0:s.longitude),h=Object(w.jsx)(y.a.Fragment,{}),f=parseFloat(null===t||void 0===t||null===(c=t.seller)||void 0===c||null===(l=c.localisation)||void 0===l?void 0:l.latitude),O=parseFloat(null===t||void 0===t||null===(d=t.seller)||void 0===d||null===(u=d.localisation)||void 0===u?void 0:u.longitude),N=0;a===e.state.currentIndex?(p=new b.a.Icon({iconUrl:"/images/utils/map.png",iconRetinaUrl:"/images/utils/map.png",iconSize:new b.a.Point(32,32),className:"leaflet-mark-icon"}),m=new b.a.Icon({iconUrl:"/images/utils/map.png",iconRetinaUrl:"/images/utils/map3.png",iconSize:new b.a.Point(32,32),className:"leaflet-mark-icon"}),N=5):(p=new b.a.Icon({iconUrl:"/images/utils/map2.png",iconRetinaUrl:"/images/utils/map2.png",iconSize:new b.a.Point(25,25),className:"leaflet-mark-icon"}),m=new b.a.Icon({iconUrl:"/images/utils/map2.png",iconRetinaUrl:"/images/utils/map2.png",iconSize:new b.a.Point(25,25),className:"leaflet-mark-icon"})),g&&j&&(v=Object(w.jsx)(o.a,{zIndexOffset:N,icon:p,position:[g,j],onClick:function(){return e.handleMarkerClick([parseFloat(t.buyer.localisation.latitude),parseFloat(t.buyer.localisation.longitude)],a+1)}})),f&&O&&(h=Object(w.jsx)(o.a,{zIndexOffset:N,icon:m,position:[f,O],onClick:function(){return e.handleMarkerClick([parseFloat(t.seller.localisation.latitude),parseFloat(t.seller.localisation.longitude)],a)}}));var k=document.getElementsByClassName("leaflet-interactive");return k&&k[a]&&a===e.state.currentIndex?k[a].setAttribute("stroke","#78be95"):k&&k[a]&&k[a].setAttribute("stroke","#1b3044"),Object(w.jsxs)(y.a.Fragment,{children:[Object(w.jsx)("div",{className:"test",children:Object(w.jsx)(x,{positions:S(f,O,g,j),option:{color:"#1b3044",fill:!1,delay:5e3}})}),v,h]})}))),t},e.render=function(){return Object(w.jsxs)("div",{className:"tracability-container",children:[Object(w.jsx)("div",{className:"product-CO2-total-tracability-container",children:Object(w.jsxs)("span",{className:"product-CO2-total-tracability",children:["Impact carbone du transport :\xa0",Object(w.jsx)("span",{className:"carbon-total-number",children:parseFloat(e.props.totalCO2Traceability).toFixed(2)})," ","kg CO2"]})}),Object(w.jsx)(d.a,{spaceBetween:10,slidesPerView:1.2,centeredSlides:!0,onSlideChange:function(t){return e.onSlideChange(t.activeIndex)},onSwiper:function(t){return e.setState({swiper:t})},children:e.displaySlides()}),Object(w.jsxs)(s.a,{center:[51.505,-.09],zoom:1,minZoom:1,scrollWheelZoom:!0,dragging:!1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,ref:function(t){e.map=t,e.props.getBottomRef(t)},whenCreated:function(t){return e.setState({map:t})},children:[Object(w.jsx)(c.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png"}),e.displayMarker()]})]})},e}return a}(y.a.Component);t.a=N;function k(e){return e*Math.PI/180}function C(e,t){var a=function(e,t){var a=k(e[1]),n=k(e[0]),r=k(t[1]),i=k(t[0]),o=i-n,s=r-a,c=Math.pow(Math.sin(o/2),2)+Math.cos(n)*Math.cos(i)*Math.pow(Math.sin(s/2),2);return 2*Math.asin(Math.sqrt(c))}(e,t),n=9-Math.sqrt(150*a);return n<1?1:n}function S(e,t,a,n){var r=[e,t],i=[a,n],o=i[1]-r[1],s=i[0]-r[0],c=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),l=Math.atan2(s,o),d=c/2/Math.cos(.314),u=l+.314,p=d*Math.cos(u)+r[1];return["M",r,"Q",[d*Math.sin(u)+r[0],p],i]}},126:function(e,t,a){"use strict";var n=a(13),r=a(16),i=a(15),o=a(14),s=a(0),c=a.n(s),l=(a(106),a(107)),d=a(90),u=a(1),p=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={swiper:void 0},e.componentDidMount=function(){e.loadAlternatives()},e.loadAlternatives=function(){e.setState({alternatives:[{id:1,img_url:"/images/products/wh_cricket_soft_ST_2018_220x.png",name:"G\xe2teries d'entrainement aux grillons et shiitake",redirect:"https://fr.wilderharrier.com/collections/dog-treats#main"}]})},e.fireAmplitudeEvent=function(e,t){try{d.a.getInstance().logEvent(e,{product:t})}catch(a){console.error(a)}},e.renderListAlternatives=function(t){c.a.Fragment;return t.map((function(t){t.id;return t.id!==e.props.barcode?Object(u.jsx)("div",{className:"carousel",onClick:function(){return e.fireAmplitudeEvent("suggestion_redirected",t.name)},children:Object(u.jsxs)("a",{href:t.redirect,className:"product-alternative",target:"_blank",rel:"noreferrer",children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:t.img_url,className:"product-alternative-image",alt:""})}),Object(u.jsxs)("div",{className:"product-alternative-text",children:[Object(u.jsx)("label",{className:"product-alternative-title",children:t.name}),Object(u.jsx)("label",{className:"product-alternative-brand"})]}),Object(u.jsx)("div",{className:"product-alternative-fleche",children:">"})]})},t.id):Object(u.jsx)(c.a.Fragment,{})}))},e.render=function(){var t,a="";return a=e.state.alternatives?"loading"===e.state.alternatives?"Chargement des alternatives ...":"D\xe9couvrez aussi...":"Pas d'alternatives disponible",e.state.alternatives&&(t=e.renderListAlternatives(e.state.alternatives)),e.state.alternatives&&"loading"!==e.state.alternatives&&""!==e.state.alternatives&&t?Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsx)("span",{className:"title-part-environnement",children:a}),Object(u.jsx)(l.Carousel,{autoPlay:!1,interval:1e5,centerMode:!0,centerSlidePercentage:90,showThumbs:!1,showIndicators:!1,showStatus:!1,children:t})]}):Object(u.jsx)(c.a.Fragment,{})},e}return a}(c.a.Component);var m=a(229),v=a(230),g=a(227),j=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={polygon:[],activeCountry:""},e.componentDidMount=function(){e.getCountries()},e.setActiveCountry=function(t){e.setState({activeCountry:t})},e.getCountries=function(){var t;null===(t=e.props.origins)||void 0===t||t.map((function(t){return"en:ghana"!==t&&fetch("https://api.lowympact.fr/api/v1/countries/".concat(t)).then((function(e){return e.json()})).then((function(t){var a,n=e.state.polygon;t.success&&(null===(a=t.data)||void 0===a?void 0:a.country)&&(n.push({geo:t.data.country.coordinates,name:t.data.country.name}),e.setState({polygon:n,activeCountry:e.state.activeCountry+t.data.country.name+", "}))})),!0}))},e.render=function(){return 0===e.state.polygon.length?Object(u.jsx)(c.a.Fragment,{}):Object(u.jsxs)("div",{className:"environnement-map-container",children:[Object(u.jsxs)("div",{className:"product-co2-impact-header",children:[Object(u.jsx)("div",{className:"product-co2-impact-logo",children:Object(u.jsx)("div",{className:"material-icons icon-label-co2-impact",children:"place"})}),Object(u.jsxs)("div",{className:"product-co2-impact-title",children:[Object(u.jsx)("div",{className:"product-co2-impact-title-text",children:"Provenance des ingr\xe9dients"}),Object(u.jsxs)("div",{className:"product-co2-impact-title-label",children:["Pays d'origine : ",e.state.activeCountry]})]})]}),Object(u.jsxs)(m.a,{center:[51.505,-.09],zoom:-1,minZoom:0,className:"environnement-map",scrollWheelZoom:!0,dragging:!1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,whenCreated:function(t){return e.setState({map:t})},children:[Object(u.jsx)(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png"}),e.state.polygon.map((function(t,a){return t?Object(u.jsx)(g.a,{onClick:function(){return e.setActiveCountry(t.name)},color:"color:white",fillColor:e.activeCountry===t.name?"blue":"green",opacity:"1",positions:t.geo},a):Object(u.jsx)(c.a.Fragment,{})}))]})]})},e}return a}(c.a.Component),h=(a(121),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={alea:3},e.setAlea=function(t){var a=e.state.alea+t;a>11&&(a=0),a<0&&(a=11),e.setState({alea:a})},e.render=function(){var t,a,n,r,i,o,s,l,d,p,m,v,g,j,h,f,x,O,y,w,N,k,C,S,_,F,I,T,P,M,E,D,A,L,B,U,W,Q,z,R,H=[{image:"agriculture",name:"Agriculture",percent:(100*parseFloat(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.co2_agriculture)/parseFloat(null===(n=e.props.dataEcoScore)||void 0===n||null===(r=n.agribalyse)||void 0===r?void 0:r.co2_total)).toFixed(0)},{image:"local_shipping",name:"Transport",percent:(100*parseFloat(null===(i=e.props.dataEcoScore)||void 0===i||null===(o=i.agribalyse)||void 0===o?void 0:o.co2_transportation)/parseFloat(null===(s=e.props.dataEcoScore)||void 0===s||null===(l=s.agribalyse)||void 0===l?void 0:l.co2_total)).toFixed(0)},{image:"view_in_ar",name:"Emballage",percent:(100*parseFloat(null===(d=e.props.dataEcoScore)||void 0===d||null===(p=d.agribalyse)||void 0===p?void 0:p.co2_packaging)/parseFloat(null===(m=e.props.dataEcoScore)||void 0===m||null===(v=m.agribalyse)||void 0===v?void 0:v.co2_total)).toFixed(0)},{image:"transform",name:"Transformation",percent:(100*parseFloat(null===(g=e.props.dataEcoScore)||void 0===g||null===(j=g.agribalyse)||void 0===j?void 0:j.co2_processing)/parseFloat(null===(h=e.props.dataEcoScore)||void 0===h||null===(f=h.agribalyse)||void 0===f?void 0:f.co2_total)).toFixed(0)},{image:"store",name:"Distribution",percent:(100*parseFloat(null===(x=e.props.dataEcoScore)||void 0===x||null===(O=x.agribalyse)||void 0===O?void 0:O.co2_distribution)/parseFloat(null===(y=e.props.dataEcoScore)||void 0===y||null===(w=y.agribalyse)||void 0===w?void 0:w.co2_total)).toFixed(0)},{image:"microwave",name:"Consommation",percent:(100*parseFloat(null===(N=e.props.dataEcoScore)||void 0===N||null===(k=N.agribalyse)||void 0===k?void 0:k.co2_consumption)/parseFloat(null===(C=e.props.dataEcoScore)||void 0===C||null===(S=C.agribalyse)||void 0===S?void 0:S.co2_total)).toFixed(0)}];H=H.map((function(e){return Object(u.jsxs)("div",{className:"empreinte-single",children:[Object(u.jsx)("div",{className:"material-icons",children:e.image}),Object(u.jsxs)("div",{className:"name",children:[e.name," : "]}),Object(u.jsxs)("div",{className:"pourcent",children:[e.percent," %"]})]},e.name)}));var q=b(parseFloat((null===(_=e.props.dataEcoScore)||void 0===_||null===(F=_.agribalyse)||void 0===F?void 0:F.co2_total)?null===(I=e.props.dataEcoScore)||void 0===I||null===(T=I.agribalyse)||void 0===T?void 0:T.co2_total:.4),e.state.alea),G="cgreen";return(null===(P=e.props.dataEcoScore)||void 0===P||null===(M=P.agribalyse)||void 0===M?void 0:M.co2_total)<15&&(G="cred"),(null===(E=e.props.dataEcoScore)||void 0===E||null===(D=E.agribalyse)||void 0===D?void 0:D.co2_total)<7&&(G="corange"),(null===(A=e.props.dataEcoScore)||void 0===A||null===(L=A.agribalyse)||void 0===L?void 0:L.co2_total)<3&&(G="cgreen"),(null===(B=e.props.dataEcoScore)||void 0===B||null===(U=B.agribalyse)||void 0===U?void 0:U.co2_total)<1&&(G="cdarkgreen"),Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsxs)("div",{className:"empreinte-carbone-container",children:[Object(u.jsxs)("div",{className:"empreinte-carbone-header",children:[Object(u.jsx)("div",{className:"header-text",children:Object(u.jsx)("div",{className:"header-main",children:"Empreinte Carbone Totale"})}),Object(u.jsxs)("div",{className:"empreinte-carbone-number",children:[Object(u.jsxs)("span",{children:[parseFloat((null===(W=e.props.dataEcoScore)||void 0===W||null===(Q=W.agribalyse)||void 0===Q?void 0:Q.co2_total)?null===(z=e.props.dataEcoScore)||void 0===z||null===(R=z.agribalyse)||void 0===R?void 0:R.co2_total:1.44).toFixed(2),"kg CO2e"]}),Object(u.jsx)("div",{className:"circle "+G})]})]}),Object(u.jsxs)("div",{className:"empreinte-carbone-equivalent",children:[Object(u.jsx)("div",{className:"icon-container",children:Object(u.jsx)("div",{className:"material-icons",children:Object(u.jsx)("img",{src:"/images/alternatives/".concat(q[1]),alt:"alternative"})})}),Object(u.jsxs)("div",{className:"equivalent-container",children:[Object(u.jsx)("div",{className:"text-small",children:"Soit l'\xe9quivalent..."}),Object(u.jsx)("div",{className:"text-big",children:q[0]})]})]}),Object(u.jsxs)("div",{className:"arrow",children:[Object(u.jsx)("div",{className:"material-icons",onClick:function(){return e.setAlea(1)},children:"arrow_back_ios"}),Object(u.jsx)("div",{className:"material-icons",onClick:function(){return e.setAlea(-1)},children:"arrow_forward_ios"})]})]}),e.props.dataEcoScore?Object(u.jsxs)("div",{className:"empreinte-carbone-container no-margin-container",children:[Object(u.jsx)("div",{className:"empreinte-carbone-header",children:Object(u.jsxs)("div",{className:"header-text",children:[Object(u.jsx)("div",{className:"header-main",children:"R\xe9partition de l'empreinte Carbone"}),Object(u.jsx)("div",{className:"header-small",children:"selon les diff\xe9rentes \xe9tapes du cycle de vie"})]})}),Object(u.jsx)("div",{className:"empreinte-carbone-repartition",children:H})]}):null]})},e}return a}(c.a.Component));function b(e,t){switch(t){case 0:return["De la production de "+(e/.0046).toFixed(0)+" feuilles de papier blanc 80g","paper.png"];case 1:return["De la production de "+(e/.6).toFixed(1)+" kg de pommes de terre","potatoe.png"];case 2:return["De la production de "+(e/.53).toFixed(1)+" kg de fraises","strawberry.png"];case 3:return["De "+(e/.193).toFixed(1)+" km parcourus par une personne en voiture","car.svg"];case 4:return["De "+(e/.137).toFixed(1)+" km parcourus par une personne en Bus de ville","bus.svg"];case 5:return["De "+(e/.019).toFixed(0)+" e-mails envoy\xe9s contenant une pi\xe8ce jointe d'1mo","mail.svg"];case 6:return["De "+(e/.5).toFixed(1)+" jour(s) d'\xe9clairage d'une ampoule \xe0 incandescence","light.svg"];case 7:return["De "+(e/.24).toFixed(1)+" heures de chauffage au gaz d'un appartement moyen de 70m\xb2","appartment.svg"];case 8:return["De la production de "+(1e3*e/33.8).toFixed(0)+" grammes de steak hach\xe9 de boeuf cru","steak.png"];case 9:return["De "+(e/.083).toFixed(1)+" jours d'\xe9clairage d'une ampoule basse consommation","light.svg"];case 10:return["De "+(e/.105).toFixed(1)+" kilom\xe8tres parcourus en Trotinette \xe9lectrique (en France)","trotinette.png"];case 11:return["D'une personne parcourant "+100*(e/.3).toFixed(0)+" kilom\xe8tres en TGV (en France)","train.png"];default:return["De "+(e/.105).toFixed(1)+" kilom\xe8tres parcourus en Trotinette \xe9lectrique (en France)","trotinette.png"]}}var f=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={width:void 0,materials:[]},e.getColor=function(e){return e>67?"green":e<=33?"red":"yellow"},e.getColorImpact=function(e){return e>70?"green":e<=40?"red":"yellow"},e.getLabel=function(e){return e>67?"Bon":e<=33?"Mauvais":"Moyen"},e.getLabelImpact=function(e){return e>60?"Impact fort":e<=30?"Impact faible":"Impact moyen"},e.getLabelImpactPackaging=function(e){return e>2?"Impact faible":e<-2?"Impact fort":"Impact moyen"},e.getColorImpactPackaging=function(e){return e>2?"green":e<-2?"red":"yellow"},e.updateWindowDimensions=function(){e.setState({width:window.innerWidth})},e.displayPackagingDetailImpact=function(){var t,a,n,r=Object(u.jsx)(c.a.Fragment,{});if(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.adjustments)||void 0===a||null===(n=a.packaging)||void 0===n?void 0:n.packagings){var i,o,s,l=[],d=c.a.Fragment;null===(i=e.props.dataEcoScore)||void 0===i||null===(o=i.adjustments)||void 0===o||null===(s=o.packaging)||void 0===s||s.packagings.map((function(e){return"unknown"!==(null===e||void 0===e?void 0:e.material.split(":")[1])&&l.push(null===e||void 0===e?void 0:e.material.split(":")[1]),!0})),d=l.filter((function(e,t){return l.indexOf(e)===t})).map((function(e){var t="";return l.indexOf(e)<l.length-1&&(t=" ; "),Object(u.jsx)(c.a.Fragment,{children:Object(u.jsxs)("span",{children:[e," ",t]})},e)})),r=l.length>0?Object(u.jsx)(c.a.Fragment,{children:Object(u.jsx)("div",{className:"product-co2-impact-content",children:Object(u.jsxs)("div",{className:"product-packaging-impact-content-details-text",children:["Mat\xe9riaux utilis\xe9s : \xa0",d]})})}):Object(u.jsx)(c.a.Fragment,{children:Object(u.jsx)("div",{className:"product-co2-impact-content",children:Object(u.jsx)("div",{className:"product-packaging-impact-content-details-text",children:"Mat\xe9riaux utilis\xe9s : \xa0 Inconnu"})})})}return r},e.displayPackagingImpact=function(){var t,a,n,r,i,o,s,l,d,p=Object(u.jsx)(c.a.Fragment,{});return(null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.adjustments)||void 0===a||null===(n=a.packaging)||void 0===n?void 0:n.value)?Object(u.jsxs)("div",{className:"product-co2-impact-container",children:[Object(u.jsxs)("div",{className:"product-co2-impact-header",children:[Object(u.jsx)("div",{className:"product-co2-impact-logo",children:Object(u.jsx)("div",{className:"material-icons icon-label-co2-impact",children:"view_in_ar"})}),Object(u.jsxs)("div",{className:"product-co2-impact-title",children:[Object(u.jsx)("div",{className:"product-co2-impact-title-text",children:"Impact de l'emballage"}),Object(u.jsx)("div",{className:"product-co2-impact-title-label",children:e.getLabelImpactPackaging(null===(r=e.props.dataEcoScore)||void 0===r||null===(i=r.adjustments)||void 0===i||null===(o=i.packaging)||void 0===o?void 0:o.value)})]}),Object(u.jsx)("div",{className:"product-transport-impact-color-label",style:{color:e.getColorImpactPackaging(null===(s=e.props.dataEcoScore)||void 0===s||null===(l=s.adjustments)||void 0===l||null===(d=l.packaging)||void 0===d?void 0:d.value)},children:"\u25cf"})]}),e.displayPackagingDetailImpact()]}):p},e.render=function(){var t,a;return Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsx)(h,{dataEcoScore:e.props.dataEcoScore}),e.props.origins?Object(u.jsx)(j,{origins:e.props.origins}):Object(u.jsx)(c.a.Fragment,{}),Object(u.jsx)(p,{barcode:e.props.barcode,ecoScore:e.props.ecoScore,ciqual_code:null===(t=e.props.dataEcoScore)||void 0===t||null===(a=t.agribalyse)||void 0===a?void 0:a.code})]})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}}]),a}(c.a.Component);t.a=f},351:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(15),i=a(14),o=(a(83),a(126)),s=(a(46),a(0)),c=a.n(s),l=a(125),d=a(90),u=a(1),p={data:{traceability:[{depth:1,productsOutput:[{productName:"Pois chiches"}],TransportCO2Impact:{value:.000571428571428571},dist:{value:198},transport:"Truck",seller:{localisation:{city:"Ottawa",country:"Canada",latitude:45.4215,longitude:-75.6972}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Graines de lin"}],TransportCO2Impact:{value:.005448},dist:{value:2274},transport:"Truck",seller:{localisation:{city:"Winkler",country:"Canada",latitude:49.1801,longitude:-97.9389}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Dattes"}],TransportCO2Impact:{value:.01067},dist:{value:6917},transport:"Boat",seller:{localisation:{city:"Tunis",country:"Tunisie",latitude:36.8065,longitude:10.1815}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Grillons"}],TransportCO2Impact:{value:.00276},dist:{value:460},transport:"Truck",seller:{localisation:{city:"Peterborough",country:"Canada",latitude:44.3091,longitude:-78.3197}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Glyc\xe9rine v\xe9g\xe9tale"}],TransportCO2Impact:{value:88e-6},dist:{value:10},transport:"Truck",seller:{localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Bleuets"}],TransportCO2Impact:{value:819e-6},dist:{value:255},transport:"Truck",seller:{localisation:{city:"Quebec city",country:"Canada",latitude:46.8139,longitude:-71.208}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Saveur naturelle"}],TransportCO2Impact:{value:.007332},dist:{value:1875},transport:"Truck",seller:{localisation:{city:"Des Moines, Iowa",country:"USA",latitude:41.5868,longitude:-93.625}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Huile d'olive"}],TransportCO2Impact:{value:.0013936},dist:{value:7651},transport:"Boat",seller:{localisation:{city:"Ath\xe8nes",country:"Gr\xe8ce",latitude:37.9838,longitude:23.7275}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Miel"}],TransportCO2Impact:{value:.007072},dist:{value:683},transport:"Truck",seller:{localisation:{city:"Saint-Bruno-de-Guigues, QC",country:"Canada",latitude:47.4641,longitude:-79.4381}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"Acide citrique et vinaigre tamponn\xe9"}],TransportCO2Impact:{value:.002444},dist:{value:1875},transport:"Truck",seller:{localisation:{city:"Des Moines, Iowa",country:"USA",latitude:41.5868,longitude:-93.625}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}},{depth:1,productsOutput:[{productName:"M\xe9lange de tocoph\xe9rols"}],TransportCO2Impact:{value:4888e-7},dist:{value:1875},transport:"Truck",seller:{localisation:{city:"Des Moines, Iowa",country:"Canada",latitude:41.5868,longitude:-93.625}},buyer:{name:"Wilder Harrier",type:"maker",localisation:{city:"Montr\xe9al",country:"Canada",latitude:45.5017,longitude:-73.5673}}}],impact:"",transportCO2Impact:.0390868285714286,productImageUrl:"/images/products/wh_cricket_soft_BH_2018_220x.png",productName:"G\xe2teries d'entra\xeenement aux grillons et bleuets"}},m=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={barcode:e.props.match.params.barcode,bcProductId:e.props.match.params.bcProductId,product:void 0,productImageUrl:void 0,productName:void 0,genericName:void 0,ecoScore:void 0,dataEcoScore:void 0,value:0,connected:!1,userId:void 0,cart:0,totalCO2Traceability:void 0,countries:[]},e.isFlipping=!1,e.getBottomRef=function(t){e.bottomComponent=t},e.fireAmplitudeEvent=function(e){try{d.a.getInstance().logEvent(e,{product:"gateries_grillon-bleuet-miel"})}catch(t){console.error(t)}},e.componentDidMount=function(){var t,a,n,r,i;try{d.a.getInstance().init("0e3fa5bb2eaddf34671d8d9591791815",null,{apiEndpoint:"api.lowympact.fr/amplitude"})}catch(o){console.error(o)}e.fireAmplitudeEvent("qrcode-scanned"),e.setState({products:null===p||void 0===p||null===(t=p.data)||void 0===t?void 0:t.traceability,impact:null===p||void 0===p||null===(a=p.data)||void 0===a?void 0:a.impact,totalCO2Traceability:null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.transportCO2Impact,productImageUrl:null===p||void 0===p||null===(r=p.data)||void 0===r?void 0:r.productImageUrl,productName:null===p||void 0===p||null===(i=p.data)||void 0===i?void 0:i.productName})},e.displayImage=function(){var t=Object(u.jsx)(c.a.Fragment,{}),a=Object(u.jsx)(c.a.Fragment,{}),n=Object(u.jsx)(c.a.Fragment,{}),r=Object(u.jsx)(c.a.Fragment,{});if(e.state.productImageUrl&&(t=Object(u.jsx)("img",{src:e.state.productImageUrl,className:"product-image",alt:"produit"})),e.state.productName&&(a=Object(u.jsx)("div",{className:"product-name",children:e.state.productName})),e.state.ecoScore){var i="color_score_"+e.state.ecoScore;r=Object(u.jsxs)("div",{className:"product-ecoscore-image",children:[Object(u.jsx)("span",{className:"circle-score "+i,children:"\u2b24 "}),"EcoScore :",Object(u.jsx)("span",{className:"uppercase ",children:" "+e.state.ecoScore})]})}else e.state.genericName&&(n=Object(u.jsx)("div",{className:"product-generic-name",children:e.state.genericName}));return Object(u.jsxs)(c.a.Fragment,{children:[e.state.userId?Object(u.jsxs)("div",{className:e.state.cart>0?"add-to-cart green":"add-to-cart",onClick:e.addToCart,children:[Object(u.jsx)("span",{className:"cart-count",children:e.state.cart>0?e.state.cart:""}),Object(u.jsx)("span",{className:"material-icons",children:"add_shopping_cart"})]}):Object(u.jsx)(c.a.Fragment,{}),e.state.cart>0?Object(u.jsx)("div",{className:"remove-from-cart",onClick:e.removeFromCart,children:Object(u.jsx)("span",{className:"material-icons",children:"remove_shopping_cart"})}):Object(u.jsx)(c.a.Fragment,{}),t,a,Object(u.jsxs)("div",{className:"product-bottom-image-div",children:[n,r]})]})},e.handleChange=function(t,a){if(e.setState({value:a}),1===a){var n=document.getElementsByClassName("swiper-container");n[0]&&n[0].scrollIntoView({behavior:"smooth"})}},e.displayNavbar=function(){c.a.Fragment;return Object(u.jsxs)("div",{className:"product-navbar-container",children:[Object(u.jsx)("button",{className:0===e.state.value?"product-navbar-button selected":"product-navbar-button",onClick:function(){e.handleChange("",0),e.fireAmplitudeEvent("informations-clicked")},children:"Informations"}),Object(u.jsx)("button",{className:1===e.state.value?"product-navbar-button selected":"product-navbar-button",onClick:function(){e.handleChange("",1),e.fireAmplitudeEvent("traceability-clicked")},children:"Tra\xe7abilit\xe9"}),Object(u.jsx)("div",{className:0===e.state.value?"navbar-under nav-left":"navbar-under nav-right"})]})},e.render=function(){var t,a=null===(t=e.state.products)||void 0===t?void 0:t.sort((function(e,t){return e.depth>t.depth?-1:1}));return Object(u.jsx)(c.a.Fragment,{children:Object(u.jsxs)("div",{className:"product-page-container",children:[Object(u.jsx)("div",{className:"product-header-container",children:Object(u.jsx)("img",{className:"product-bitmap-image",src:"/images/utils/bitmap.png",alt:""})}),Object(u.jsx)("div",{className:"product-image-container",ref:function(t){return e.imageFlip=t},children:e.displayImage()}),e.displayNavbar(),0===e.state.value?Object(u.jsx)(o.a,{dataEcoScore:e.state.dataEcoScore,ecoScore:e.state.ecoScore,origins:e.state.origins,displayTranportImpact:null!==e.props.match.params.bcProductId&&void 0!==e.props.match.params.bcProductId,barcode:e.props.match.params.barcode}):Object(u.jsx)("div",{className:"product-bottom-container",children:Object(u.jsx)(l.a,{products:a,getBottomRef:e.getBottomRef,totalCO2Traceability:e.state.totalCO2Traceability})})]})})},e}return a}(c.a.Component);t.default=m},46:function(e,t,a){"use strict";var n=a(43),r=a.n(n),i=a(44),o=a(13),s=a(16),c=a(15),l=a(14),d=(a(59),a(0)),u=a.n(d),p=(a(60),a(1));var m=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"button-logo",children:Object(p.jsx)("span",{className:"material-icons",children:"history"})}),Object(p.jsx)("div",{children:"Historique"})]})};var v=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"material-icons",children:"person"})}),Object(p.jsx)("div",{children:"Profil"})]})};var g=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"navbar-scan-icon",children:Object(p.jsx)("span",{className:"material-icons",children:"qr_code_scanner"})})})},j=a(99),h=a(100),b=a.n(h),f=a(101),x=a.n(f),O=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={error:!1,noBackCamera:!1,usedCamera:0,devices:[],processingImage:0,text:0,mutlipleTracks:!1,no_permission:!1,locked:!1},e.locked=!1,e.switchCamera=Object(i.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.locked){t.next=10;break}return e.setState({locked:!0}),(a=e.state.usedCamera+1)>=e.state.devices.length&&(a=0),e.setState({usedCamera:a}),b.a.stop(),e.QuaggaInit(e.state.devices[a].deviceId),t.next=9,y(800);case 9:e.setState({locked:!1});case 10:case"end":return t.stop()}}),t)}))),e.componentDidMount=Object(i.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.capabilities?(e.setState({devices:e.props.capabilities,usedCamera:0}),e.QuaggaInit(e.props.capabilities[0])):e.QuaggaInit({facingMode:"environment"});case 1:case"end":return t.stop()}}),t)}))),e.QuaggaInit=function(t){console.log(t),0==Object.keys(t).length&&e.setState({text:"vide"}),b.a.init({inputStream:{type:"LiveStream",constraints:Object(j.a)({},t)},locator:{patchSize:"normal",halfSample:!1},locate:!1,area:{top:"40%",right:"25%",left:"25%",bottom:"40%"},numOfWorkers:window.navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader"]},multiple:!1,singleChannel:!1},(function(a){if(a)return console.log(a),"NotAllowedError: Permission denied"==a&&e.setState({no_permission:!0}),e.setState({error:!0,text:a+" "+JSON.stringify(t)}),!1;b.a.start()})),e.props.setQuagga(b.a),console.log(b.a.CameraAccess),b.a.onDetected(e._onDetected)},e._onDetected=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onDetected(a);case 2:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDrop=function(t){try{if(1!=e.state.processingImage){e.setState({processingImage:1}),console.log(t[t.length-1]);var a=new FileReader;a.readAsDataURL(t[t.length-1]),a.onloadend=function(){b.a.decodeSingle({decoder:{readers:["ean_reader"]},locate:!0,src:a.result},(function(t){var a;(console.log(t),t)?(e._onDetected(t),e.setState({processingImage:2}),console.log("result",null===(a=t.codeResult)||void 0===a?void 0:a.code)):(console.log("not detected"),e.setState({processingImage:3}))}))}}}catch(n){console.log(n),e.setState({processingImage:4})}},e.setImport=function(){e.setState({error:!e.state.error})},e}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){b.a.offDetected(this._onDetected)}},{key:"render",value:function(){var e,t=Object(p.jsx)(u.a.Fragment,{});return 1==this.state.processingImage&&(t=Object(p.jsx)(u.a.Fragment,{children:Object(p.jsx)("p",{children:"Chargement en cours..."})})),2==this.state.processingImage&&(t=Object(p.jsx)(u.a.Fragment,{children:Object(p.jsx)("p",{children:"Ce produit n'existe pas dans la base de donn\xe9es"})})),3==this.state.processingImage&&(t=Object(p.jsx)(u.a.Fragment,{children:Object(p.jsx)("p",{children:"Code barre non trouv\xe9 sur l'image, merci de r\xe9essayer"})})),4==this.state.processingImage&&(t=Object(p.jsx)(u.a.Fragment,{children:Object(p.jsxs)("p",{children:["Mauvais format ou fichier trop grand, merci de r\xe9essayer. ",Object(p.jsx)("br",{}),"Taille max : 5mb ",Object(p.jsx)("br",{}),"Formats: jpg, png, gif"]})})),Object(p.jsx)(u.a.Fragment,{children:Object(p.jsxs)("div",{className:"interactive-wrapper",children:[Object(p.jsxs)("div",{id:"interactive",className:this.state.error?"hidden":"viewport",children:[Object(p.jsx)("div",{className:"a"}),Object(p.jsx)("div",{className:"b"}),Object(p.jsx)("div",{className:"c"}),Object(p.jsx)("div",{className:"d"})]}),(null===(e=this.state.devices)||void 0===e?void 0:e.length)>1?Object(p.jsxs)("button",{className:"code-switch-camera",onClick:this.switchCamera,children:[Object(p.jsx)("span",{className:"material-icons",style:{color:this.state.locked?"#777777":"#1b3044"},children:"cameraswitch"}),this.state.usedCamera]}):Object(p.jsx)(u.a.Fragment,{}),this.state.error?Object(p.jsxs)("div",{className:"scan-error",children:[Object(p.jsx)(x.a,{withIcon:!0,withPreview:!1,buttonText:Object(p.jsxs)("div",{className:"button-import",children:[Object(p.jsx)("div",{className:"material-icons",children:"add_a_photo"}),Object(p.jsx)("p",{children:"Importer une photo"})]}),onChange:this.onDrop,label:"",imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:5242880,labelClass:"import-label"}),Object(p.jsx)("p",{className:"red",children:t}),Object(p.jsxs)("p",{className:"error-message-import",children:[this.state.no_permission?Object(p.jsx)("div",{className:"no-permission",children:"L'acc\xe8s \xe0 votre cam\xe9ra est bloqu\xe9 : Vous pouvez l'autoriser dans les param\xe8tres de votre navigateur pour acc\xe9der au scanner"}):Object(p.jsx)(u.a.Fragment,{}),Object(p.jsx)("br",{})]})]}):Object(p.jsx)(u.a.Fragment,{}),this.state.mutlipleTracks?Object(p.jsx)("h1",{className:"debug",children:"If you see this, tell me"}):"",Object(p.jsx)("div",{className:"debug",children:this.state.text})]})})}}]),a}(d.Component),y=function(e){return new Promise((function(t){return setTimeout(t,e)}))},w=a(102),N=a.n(w),k=a(17),C=(a(61),a(56),function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={scanning:!0,status:"",results:[],usedCameraId:"3f6fc4177028f25c3e8215f4444838450630b8d656c627ef511346545d37f302",devices:[],reading:!1,barcode:void 0,bcProductId:void 0,Quagga:void 0,product:void 0,online:window.navigator.onLine},e.componentDidMount=function(){window.addEventListener("offline",e.updateNetwork),window.addEventListener("online",e.updateNetwork)},e.updateNetwork=function(){e.setState({online:window.navigator.onLine})},e.setQuagga=function(t){e.state.Quagga&&e.state.Quagga.stop(),e.setState({Quagga:t})},e._onDetected=function(){var t=Object(i.a)(r.a.mark((function t(a){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}if(console.log(a),!a.codeResult||!a.codeResult.code){t.next=18;break}return e.setState({results:[a],scanning:!0,status:"waiting"}),t.next=6,fetch("https://world.openfoodfacts.org/api/v0/product/".concat(a.codeResult.code,".json/"));case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,console.log(o),0===o.status){t.next=16;break}return e.setState({scanning:!0,status:"found",product:o,barcode:a.codeResult.code}),t.abrupt("return",!0);case 16:return e.setState({scanning:!0,status:"not found"},Object(i.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(3e3);case 2:e.setState({scanning:!0,status:void 0});case 3:case"end":return t.stop()}}),t)})))),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleScan=function(t){if(t){var a=t.split("/");a.length>1&&e.setState({scanning:!1,barcode:a[4],bcProductId:a[5],status:"found"})}},e.handleError=function(e){console.error(e)},e.displayQrCode=function(){return"found"!==e.state.status?Object(p.jsx)(N.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"},showViewFinder:!1}):Object(p.jsx)(u.a.Fragment,{})},e.displayBarCode=function(){return Object(p.jsx)(u.a.Fragment,{children:e.state.scanning?Object(p.jsx)(O,{onDetected:e._onDetected,setQuagga:e.setQuagga,usedCameraId:e.usedCameraId,capabilities:e.props.capabilities}):null})},e.switchReader=function(){e.state.reading?e.setState({reading:!1}):(e.state.Quagga&&e.state.Quagga.stop(),e.setState({reading:!0}))},e.displayPopup=function(){var t;console.log(e.state.product);var a=Object(p.jsx)(u.a.Fragment,{}),n=null===(t=e.state.product)||void 0===t?void 0:t.product;return n?a=Object(p.jsxs)(k.b,{className:"history-item",to:"/products/"+e.state.product.code,onClick:function(){e.state.Quagga&&e.state.Quagga.stop(),e.props.showScanner(!1)},children:[Object(p.jsx)("div",{className:"history-img-container",children:Object(p.jsx)("img",{src:n.image_url,alt:""})}),Object(p.jsxs)("div",{className:"history-name-container",children:[Object(p.jsx)("div",{className:"history-name",children:n.product_name}),Object(p.jsx)("div",{className:"history-brand",children:n.brands})]}),Object(p.jsxs)("div",{className:"history-label-container",children:[Object(p.jsx)("div",{style:{color:S(n.ecoscore_score)},children:"\u25cf"}),Object(p.jsx)("div",{className:"history-label",children:-1==["a","b","c","d","e"].indexOf(n.ecoscore_grade)?"":n.ecoscore_grade})]}),Object(p.jsx)("div",{style:{marginRight:"10px",color:"rgb(41,72,102)"},children:">"})]}):"waiting"==e.state.status?a=Object(p.jsx)("div",{className:"history-item",children:Object(p.jsx)("div",{class:"skeleton-8wwpnkj1sj9"})}):"not found"==e.state.status&&(a=Object(p.jsxs)("div",{className:"history-item",children:[Object(p.jsx)("div",{className:"history-img-container",children:Object(p.jsx)("div",{className:"grey-square"})}),Object(p.jsxs)("div",{className:"history-name-container",children:[Object(p.jsx)("div",{className:"history-name",children:"Article non trouv\xe9"}),Object(p.jsx)("div",{className:"history-brand"})]}),Object(p.jsx)("div",{className:"history-label-container"}),Object(p.jsx)("div",{style:{marginRight:"10px",color:"rgb(41,72,102)"},children:">"})]})),a},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:this.props.hideScannerAnimation?"code-reader-container hide-scanner":"code-reader-container",children:[this.state.online?Object(p.jsx)(u.a.Fragment,{}):Object(p.jsxs)("div",{className:"offline-container",children:[" ",Object(p.jsx)("span",{style:{color:"red"},children:"\u25cf"})," Pas de connexion"]}),Object(p.jsx)("span",{className:"close material-icons",onClick:function(){e.state.Quagga&&e.state.Quagga.stop(),e.props.showScanner(!1)},children:"close"}),this.displayBarCode(),Object(p.jsx)("div",{className:"scan-result-container",children:Object(p.jsx)("div",{className:"results",children:this.displayPopup()})})]})}}]),a}(d.Component));function S(e){return e>67?"green":e<=33?"red":"yellow"}var _=function(e){return new Promise((function(t){return setTimeout(t,e)}))},F=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={showScanner:!1,barcode:void 0,bcProductId:void 0,height:0,capabilities:void 0,hideScannerAnimation:!1},e.componentDidMount=Object(i.a)(r.a.mark((function t(){var a,n,o,s,c,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updateWindowDimensions(),window.addEventListener("resize",e.updateWindowDimensions),t.prev=2,a=window.location.search,n=new URLSearchParams(a),n.get("camera"),!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)){t.next=21;break}return t.next=9,navigator.mediaDevices.enumerateDevices().then((function(e){return e.filter((function(e){return"videoinput"===e.kind}))}));case 9:return o=t.sent,0===(s=o.filter((function(e){return null!=e.label.match(/back/)}))).length&&(s=o),console.log(s),c=s.map(function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t.deviceId}}}).then((function(e){var t=e.getVideoTracks().map((function(e){return console.log(e),e.getCapabilities?e.getCapabilities():[{}]}));return e.getTracks().forEach((function(e){return e.stop()})),t&&t.length>0?t[0]:{}}),(function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=16,Promise.all(c);case 16:(l=t.sent)&&l.length>0&&l.sort((function(e,t){return(e.width.max+e.height.max)/2>(t.width.max+t.height.max)/2?-1:1})),l[0]?e.setState({capabilities:l}):e.setState({capabilities:void 0}),t.next=22;break;case 21:e.setState({capabilities:void 0});case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),e.setState({capabilities:void 0});case 27:case"end":return t.stop()}}),t,null,[[2,24]])}))),e.updateWindowDimensions=function(){e.setState({height:window.innerHeight})},e.handleScannerButton=function(t){!1===t?e.setState({hideScannerAnimation:!0},Object(i.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I(300);case 2:e.setState({showScanner:t,hideScannerAnimation:!1});case 3:case"end":return a.stop()}}),a)})))):e.setState({showScanner:t})},e.render=function(){return e.state.height<550?Object(p.jsx)(u.a.Fragment,{}):e.state.showScanner?Object(p.jsx)(C,{hideScannerAnimation:e.state.hideScannerAnimation,showScanner:e.handleScannerButton,history:e.props.history,capabilities:e.state.capabilities}):Object(p.jsx)(u.a.Fragment,{children:Object(p.jsxs)("div",{className:"navbar-container",children:[Object(p.jsx)(k.b,{to:"/history",className:"/history"===window.location.pathname?"navbar-link navbar-text-left navbar-selected":"navbar-link navbar-text-left ",children:Object(p.jsx)(m,{})}),Object(p.jsx)("div",{onClick:function(){return e.handleScannerButton(!0)},children:Object(p.jsx)("div",{className:"navbar-circle",children:Object(p.jsx)(g,{})})}),Object(p.jsx)("span",{className:"navbar-scan-text",children:"Scan"}),Object(p.jsx)(k.b,{to:"/profil",className:"/profil"===window.location.pathname?"navbar-link navbar-text-right navbar-selected":"navbar-link navbar-text-right ",children:Object(p.jsx)(v,{})})]})})},e}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}}]),a}(u.a.Component),I=(t.a=F,function(e){return new Promise((function(t){return setTimeout(t,e)}))})},56:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},83:function(e,t,a){}}]);
//# sourceMappingURL=14.3b7d7e28.chunk.js.map