(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[11],{335:function(e,t,s){"use strict";s.r(t);var n=s(12),a=s(15),c=s(14),i=s(13),r=s(0),o=s.n(r),l=s(2),u=s(1);var d=function(){return Object(u.jsx)("div",{children:"Me connecter"})},j=s(41),b=s(48),f=(s(44),s(57),s(16)),h=s(58),p=s.n(h);var m=function(e){Object(c.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=a.state,s=function(e,t){var s=[];return 0===e.length&&s.push(Object(u.jsx)("p",{children:"Saissez votre adresse e-mail"})),0===t.length&&s.push(Object(u.jsx)("p",{children:"Saissez votre mot de passe"})),s}(t.email,t.password);a.setState({errors:s}),0===s.length&&a.Connect()},a.componentDidMount=function(){a.Verify()},a.Verify=function(){var e=!0,t=localStorage.getItem("token");if(t){var s=p.a.decode(t,{complete:!0}),n=new Date;s.payload.exp>=n.getTime()/1e3&&(e=!1)}!1===e&&a.setState({redirect:!0})},a.Connect=function(){fetch("https://api.lowympact.fr/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json","api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043"},body:JSON.stringify({email:a.state.email,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){if("No user found"===e.error){a.setState({loginSuccessful:!1});var t=a.state.errors;t.push(Object(u.jsx)("p",{children:"Utilisateur Inconnu"})),a.setState({errors:t})}else if("Incorrect password"!==e.error&&e.success)localStorage.setItem("token",e.token),localStorage.setItem("userId",e._id),a.setState({loginSuccessful:!0,redirect:!0});else{a.setState({loginSuccessful:!1});var s=a.state.errors;s.push(Object(u.jsx)("p",{children:"Mot de passe Incorrect"})),a.setState({errors:s})}}))},a.onPasswordChange=function(){a.setState({password:a.passwordInput.value,email:a.emailInput.value})},a.state={email:"",password:"",errors:[],redirect:!1,loginSuccessful:null},a}return Object(a.a)(s,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(u.jsx)(l.a,{to:"/history"}):Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(f.b,{to:"/login",children:Object(u.jsx)(b.a,{})}),Object(u.jsx)("div",{className:"logo-fruits",children:Object(u.jsx)("img",{src:j.a,className:"logo",alt:"Fruits"})}),Object(u.jsx)(f.b,{className:"back-button",to:"/login",children:"< Retour"}),Object(u.jsxs)("div",{className:"signin-container",children:[Object(u.jsxs)("form",{className:"forms",children:[Object(u.jsxs)("label",{children:["email",Object(u.jsx)("input",{className:"input-forms",value:this.state.email,onChange:this.onPasswordChange,ref:function(t){return e.emailInput=t},type:"email"})]}),Object(u.jsxs)("label",{children:["mot de passe",Object(u.jsx)("input",{className:"input-forms",value:this.state.password,onChange:this.onPasswordChange,ref:function(t){return e.passwordInput=t},type:"password"})]})]}),Object(u.jsx)("label",{className:"errors-signin",children:this.state.errors}),Object(u.jsx)("div",{className:"button-signin",onClick:this.handleSubmit,children:Object(u.jsx)(d,{})})]})]})}}]),s}(r.Component);t.default=m},38:function(e,t,s){"use strict";t.a=s.p+"static/media/logo.b235ef42.svg"},41:function(e,t,s){"use strict";t.a=s.p+"static/media/fruits-vegetables-basket-by-oblik-studio.7d5e1c64.svg"},44:function(e,t,s){"use strict";t.a=s.p+"static/media/bitmap.6f490d5b.png"},48:function(e,t,s){"use strict";s(49);var n=s(38),a=s(44),c=s(0),i=s.n(c),r=s(1);t.a=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a.a,className:"blob-top",alt:"Blob"})}),e.history?Object(r.jsx)(i.a.Fragment,{}):Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a.a,className:"blob-left",alt:"Blob"})}),Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a.a,className:"blob-right",alt:"Blob"})})," "]}),Object(r.jsxs)("div",{className:"header-container",children:[Object(r.jsx)("img",{src:n.a,className:"header-logo",alt:"Logo"}),Object(r.jsx)("span",{children:"Lowympact"})]})]})}},49:function(e,t,s){},57:function(e,t,s){},59:function(e,t){},60:function(e,t){},62:function(e,t){},63:function(e,t){},67:function(e,t){},68:function(e,t){},69:function(e,t){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){}}]);
//# sourceMappingURL=11.e4118db3.chunk.js.map