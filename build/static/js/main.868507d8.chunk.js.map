{"version":3,"sources":["assets/images/fruits-vegetables-basket-by-oblik-studio.svg","components/Button/ButtonHistory.js","components/Button/ButtonProfil.js","components/Button/ButtonScan.js","components/Scan/Scan.js","components/Test/Scanner.js","components/Test/Scan_home.js","components/Navbar/Navbar.js","assets/images/logo.svg","assets/images/bitmap.png","components/Header/Header.js","pages/History.js","pages/Error404.js","components/Button/ButtonCreateAccount.js","components/Button/ButtonLogin.js","components/Button/ButtonNoAccount.js","pages/Login.js","components/Traceability/leaflet-curve/leaflet.curve.js","components/Traceability/leaflet-curve/Curve.js","components/Traceability/Traceability.js","components/Environnement/Alternatives.js","components/Environnement/Origins.js","components/Environnement/Environnement.js","pages/Product.js","components/Labels/Labels.js","pages/Profil.js","components/Button/ButtonSignup.js","pages/Signup.js","components/Button/ButtonSignin.js","pages/Signin.js","components/Button/ButtonChangePassword.js","assets/users/users.js","pages/ProfileConfiguration.js","components/Charts/DoughnutChartEcoScore.js","components/Charts/BarChartCarbonImpact.js","pages/Statistics.js","App.js","reportWebVitals.js","index.js"],"names":["ButtonHistory","className","class","ButtonProfil","ButtonScan","configurationPromise","configure","engineLocation","catch","error","alert","style","position","top","bottom","left","right","margin","maxWidth","maxHeight","Scan","props","ref","React","createRef","then","ScanditSDKBarcodePicker","create","current","barcodePicker","onScan","on","onError","this","destroy","prevProps","JSON","stringify","scanSettings","applyScanSettings","visible","setVisible","AnimatePresence","exitBeforeEnter","motion","div","id","initial","animate","transition","duration","exit","onClick","onCrossClicked","Component","Scanner","componentDidMount","a","navigator","mediaDevices","enumerateDevices","devices","videoDevices","forEach","device","kind","label","match","push","maxResolution","i","getUserMedia","video","deviceId","exact","stream","getVideoTracks","track","capabilities","getCapabilities","height","max","usedCameraId","getTracks","stop","err","console","log","Quagga","init","inputStream","type","constraints","focusMode","width","min","aspectRatio","locator","patchSize","halfSample","locate","area","numOfWorkers","window","hardwareConcurrency","decoder","readers","debug","drawBoundingBox","showFrequency","drawScanline","showPattern","multiple","singleChannel","start","setQuagga","onDetected","_onDetected","result","offDetected","Fragment","Scan_home","state","scanning","status","results","reading","barcode","undefined","bcProductId","quagga","setState","_scan","res","codeResult","code","fetch","response","json","handleScan","data","arr","split","length","handleError","displayQrCode","delay","showViewFinder","displayBarCode","map","switchReader","redirect","to","onChange","uncheckedIcon","checkedIcon","checked","onColor","offColor","Navbar","showScanner","updateWindowDimensions","innerHeight","handleScannerButton","bool","handleBarcode","render","vibrateOnScan","enableTorchToggle","enablePinchToZoom","enableCameraSwitcher","guiStyle","ScanSettings","enabledSymbologies","codeDuplicateFilter","scanResult","barcodes","message","location","pathname","addEventListener","removeEventListener","Header","src","blob","alt","logo","RenderHistoryItem","labelColor","item","pathProduct","name","opacity","image","brand","color","marginRight","History","userId","localStorage","getItem","token","loadHistoryInformations","loadLocalStorageHistory","method","credentials","headers","Headers","authorization","items","loading","history","parse","itemList","Object","keys","fruits","Error404","ButtonCreateAccount","ButtonLogin","ButtonNoAccount","Login","Verify","queryString","search","urlParams","URLSearchParams","innerWidth","get","assign","isExpired","decodedToken","jwt","decode","complete","dateNow","Date","getTime","payload","exp","L","Curve","Path","extend","options","initialize","path","setOptions","_initialUpdate","_setPath","getPath","_coords","setPath","redraw","getBounds","_bounds","_computeBounds","lastPoint","lastCommand","coord","bound","LatLngBounds","String","lat","latLng","lng","controlPoint1","controlPoint2","endPoint","diffLat","diffLng","controlPoint","getCenter","_update","_map","_updatePath","_renderer","_updatecurve","_project","lastCoord","curCommand","curPoint","_points","latLngToLayerPoint","curve","SVG","include","layer","_curvePointsToPath","_path","getTotalLength","dashArray","strokeDasharray","strokeDashoffset","points","point","str","x","y","positions","option","getOptions","fromProps","toProps","leafletElement","setStyleIfChanged","propTypes","children","PropTypes","oneOfType","arrayOf","node","object","array","isRequired","withLeaflet","Traceability","zoom","swiper","currentIndex","getMaterialIcon","mode","getTransportMode","getTranslation","displaySlides","slides","products","product","pastille","TransportCO2Impact","value","transport","productsOutput","productName","seller","localisation","city","country","buyer","Math","round","dist","handleMarkerClick","latlng","index","elem","document","getElementsByClassName","scrollIntoView","behavior","slideTo","p","getZoomRatio","latitude","longitude","flyTo","onSlideChange","parseFloat","long","displayMarker","markers","icon","icon2","marker1","lat1","long1","marker2","lat2","long2","zIndex","Icon","iconUrl","iconRetinaUrl","iconSize","Point","Marker","zIndexOffset","curves","setAttribute","getCurveOptions","fill","totalCO2Traceability","toFixed","Map","center","minZoom","scrollWheelZoom","dragging","maxBounds","maxBoundsViscosity","getBottomRef","whenCreated","TileLayer","attribution","url","spaceBetween","slidesPerView","centeredSlides","activeIndex","onSwiper","toRadian","degree","PI","origin","destination","distance","lon1","lon2","deltaLat","deltaLon","pow","sin","cos","asin","sqrt","getDistance","latlng1","latlng2","offsetX","offsetY","r","theta","atan2","r2","theta2","midpointX","Alternatives","renderListAlternatives","listItems","href","img_url","RenderColor","alternativesloop","alternativesList","alternatives","alternatives_a","alternatives_b","alternatives_c","alternatives_d","sort","b","eco_score","c","d","ecoScore","alternatives_title","observer","observeParents","labelLevel","Origins","polygon","activeCountry","getCountries","setActiveCountry","origins","success","geo","coordinates","poly","Polygon","fillColor","Environnement","showTransport","materials","getColor","note","getColorImpact","getLabel","getLabelImpact","getLabelImpactPackaging","getColorImpactPackaging","displayCO2Repartition","pourcentage","nbKg","percentage","strokeWidth","fontSize","primaryColor","displayRepartitionAllItems","html_agriculture","html_transport","html_consommation","html_distribution","html_packaging","html_processing","html_total","dataEcoScore","agribalyse","co2_agriculture","co2_total","co2_transportation","co2_consumption","co2_distribution","co2_packaging","co2_processing","handleShowTransport","displayTransportImpact","agribalyse_CO2","transportation_score","transport_final_indicator","n","adjustments","origins_of_ingredients","value_fr","co2_impact_html","transportation_score_html","displayTranportImpact","displayPackagingDetailImpact","packaging","packagings","material","filter","pos","indexOf","separator","displayPackagingImpact","Product","params","productImageUrl","genericName","connected","productData","cart","countries","isFlipping","component","bottomComponent","loadHistory","loadFromOpenFoodFacts","loadProductInformations","handleBarCodeUpdate","traceability","impact","transportCO2Impact","loadAlternatives","score","alternativesInfos","image_url","product_name","generic_name","ecoscore_grade","ecoscore_data","origins_hierarchy","saveHistory","scoreSearch","categories_properties","Authorization","quantity","body","bcProductAddress","exist","find","element","brands","setItem","addToCart","co2","ecoscore","flip","quantityDelta","carbonImpact","removeFromCart","event","imageFlip","transform","displayImage","scoreClass","handleChange","newValue","displayNavbar","retour","depth","ms","Promise","setTimeout","Profil","disconnect","clear","displayConnectedProfil","displayUnconnectedProfil","ButtonSignup","validEmail","RegExp","Signup","userName","email","password","confirmPassword","errors","submit","signUser","username","_id","handleSubmit","e","preventDefault","validate","displayErrors","test","evt","target","passwordConfirm","ButtonSignin","Signin","Connect","loginSuccessful","onPasswordChange","passwordInput","emailInput","ButtonChangePassword","USERS","ProfileConfiguration","currentPassword","newPassword","user","changeUserInfo","loadUserInfo","placeholder","DoughnutChartEcoScore","selectedSegment","displayChart","chart","ecoScoreData","cartedProduct","title","unknown","lineWidth","paddingAngle","radius","PieChart","defaultProps","animationDuration","dataEntry","labelStyle","fontFamily","labelPosition","segmentsStyle","cursor","segmentsShift","monthNames","BarChartCarbonImpact","toolbar","show","dropShadow","enabled","blur","plotOptions","bar","borderRadius","horizontal","xaxis","categories","labels","fontColor","text","yaxis","dataLabels","noData","colors","grid","lines","carbonImpactData","now","dataSize","unit","setHours","setDate","getDate","getDay","yearStart","getFullYear","ceil","getMonth","year","monthNum","toString","series","sortedData","offset","finalValue","nbProducts","Statistics","scannedProduct","loadUserData","loadEcoScoreData","loadCarbonImpactData","typeAggregate","statistics","displayStats","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.868507d8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/fruits-vegetables-basket-by-oblik-studio.9dfc6522.svg\";","import \"./ButtonNavBar.css\";\r\n\r\nfunction ButtonHistory() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"button-logo\">\r\n\t\t\t\t<span class=\"material-icons\">history</span>\r\n\t\t\t</div>\r\n\t\t\t<div>Historique</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ButtonHistory;\r\n","function ButtonProfil() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div>\r\n\t\t\t\t<span class=\"material-icons\">person</span>\r\n\t\t\t</div>\r\n\t\t\t<div>Profil</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ButtonProfil;\r\n","import { React } from \"react\";\r\n\r\nfunction ButtonScan() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"navbar-scan-icon\">\r\n\t\t\t\t<span class=\"material-icons\">qr_code_scanner</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ButtonScan;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tconfigure,\r\n\tBarcodePicker as ScanditSDKBarcodePicker,\r\n} from \"scandit-sdk\";\r\nimport \"./Scan.css\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Configure the library and activate it with a license key\r\nconst configurationPromise = configure(\r\n\t\"ASHf6Cx7DGz5BbkR5RWee94Ezm55DtkCAFB5HoNVQLhPf8gUhk8ypmZ72tbfAdIo33/I2gZR9pcXcdBwQGyYu69PkahqLA0dEEN5WFtpVEjMfQMiBhwmRWIJQgn+E54DiwJm/5CjsV1+Uy7AJWXnvrLiuwxG2D/b7b1QoPFJfkKp2OSreWJXnV/kJ+rtqFyNOu2wQb5Rq5IFXOU/tnjlTvJp8Kxl4jezOVoWlQZreaLKfxfBforPArJErC16cldrqFULYUdsPqb4Vn27hWUmPQTfaX/SbeDCl1h++IPmcvRpzwM9hY0ti7zzfhBKg3TgEYTMiPUipakmM21mU92xYjA9kmKO6bOjzY4XqyrWBUzv/C1TwJfK1aZDDLH8BOmqqJILi2Ty9fN84y09vBgv0dfXhQa3Q0/UW0Hnv0Xge2am3RY5dmE6pfWaxYyA3fDj920DpnlUNcAsfdErnvpZz8H1eftw6D2w3ps6q3jNFc/CTkALFZOk9Sy2u+lOfzvjKrcz5d1yoSo1sVhFsLWNUoaoHTP6NPnQaawC1YwPRp90T+2yNfx+iESAhn3qfn2pOEpBG0rHdZNLLj1yeNJU9Pjt7dznNeCJwG2SzSQvPZU5HzLuIu+siWjUPStB9WWMfVluWN3opv+ReRWBjBsaRFPBmit6LNbRk3QLT6To50yVZg8Zy1NuDFUoE+Ms2ytVn9fs30n1DeNYJLCWjQJ4ktQaz2mIFTOFvRVrJqPkTBwzOaAjWoPxOr097hga8bRhPAqV6ir7ojSffUeCjL/jmp1x1uSE4OaQe3Y32oC0XOVJqA==\",\r\n\t{\r\n\t\tengineLocation: \"https://cdn.jsdelivr.net/npm/scandit-sdk@5.x/build/\",\r\n\t}\r\n).catch((error) => {\r\n\talert(error);\r\n});\r\n\r\nconst style = {\r\n\tposition: \"absolute\",\r\n\ttop: \"0\",\r\n\tbottom: \"0\",\r\n\tleft: \"0\",\r\n\tright: \"0\",\r\n\tmargin: \"auto\",\r\n\tmaxWidth: \"1280px\",\r\n\tmaxHeight: \"80%\",\r\n};\r\n\r\nclass Scan extends Component {\r\n\tstatic propTypes = {\r\n\t\tvisible: PropTypes.bool,\r\n\t\tplaySoundOnScan: PropTypes.bool,\r\n\t\tvibrateOnScan: PropTypes.bool,\r\n\t\tscanningPaused: PropTypes.bool,\r\n\t\tguiStyle: PropTypes.string,\r\n\t\tvideoFit: PropTypes.string,\r\n\t\tscanSettings: PropTypes.object,\r\n\t\tenableCameraSwitcher: PropTypes.bool,\r\n\t\tenableTorchToggle: PropTypes.bool,\r\n\t\tenableTapToFocus: PropTypes.bool,\r\n\t\tenablePinchToZoom: PropTypes.bool,\r\n\t\taccessCamera: PropTypes.bool,\r\n\t\tcamera: PropTypes.object,\r\n\t\tcameraSettings: PropTypes.object,\r\n\t\ttargetScanningFPS: PropTypes.number,\r\n\t\tonScan: PropTypes.func,\r\n\t\tonError: PropTypes.func,\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.ref = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconfigurationPromise.then(() => {\r\n\t\t\tScanditSDKBarcodePicker.create(this.ref.current, this.props).then(\r\n\t\t\t\t(barcodePicker) => {\r\n\t\t\t\t\tthis.barcodePicker = barcodePicker;\r\n\r\n\t\t\t\t\tif (this.props.onScan != null) {\r\n\t\t\t\t\t\tbarcodePicker.on(\"scan\", this.props.onScan);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.props.onError != null) {\r\n\t\t\t\t\t\tbarcodePicker.on(\"scanError\", this.props.onError);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.barcodePicker != null) {\r\n\t\t\tthis.barcodePicker.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\t// These are just some examples of how to react to some possible property changes\r\n\r\n\t\tif (\r\n\t\t\tJSON.stringify(prevProps.scanSettings) !==\r\n\t\t\tJSON.stringify(this.props.scanSettings)\r\n\t\t) {\r\n\t\t\tthis.barcodePicker.applyScanSettings(this.props.scanSettings);\r\n\t\t}\r\n\r\n\t\tif (prevProps.visible !== this.props.visible) {\r\n\t\t\tthis.barcodePicker.setVisible(this.props.visible);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AnimatePresence exitBeforeEnter={true}>\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tid=\"background-scan\"\r\n\t\t\t\t\tinitial={{ bottom: \"-1000px\" }}\r\n\t\t\t\t\tanimate={{ bottom: \"0px\" }}\r\n\t\t\t\t\ttransition={{ duration: 0.5 }}\r\n\t\t\t\t\texit={{ bottom: \"-1000px\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div ref={this.ref} style={style} />\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclass=\"close\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tthis.props.onCrossClicked(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t&times;\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div id=\"scandit-barcode-picker\"></div>\r\n\t\t\t\t</motion.div>\r\n\t\t\t</AnimatePresence>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Scan;\r\n","import React, { Component } from \"react\";\r\nimport Quagga from \"quagga\";\r\n\r\nclass Scanner extends Component {\r\n    componentDidMount = async () => {\r\n        let usedCameraId;\r\n        const devices = await navigator.mediaDevices.enumerateDevices();\r\n        let videoDevices = [];\r\n        devices.forEach((device) => {\r\n            if (device.kind == \"videoinput\") {\r\n                if (device.label.match(/back/) != null) {\r\n                    //console.log(\"Found video device: \" + JSON.stringify(device));\r\n                    videoDevices.push(device);\r\n                }\r\n            }\r\n        });\r\n\r\n        // open every video device and dump its characteristics\r\n\r\n        let maxResolution = -1;\r\n        for (let i in videoDevices) {\r\n            const device = videoDevices[i];\r\n            // console.log(\"Opening video device \" + device.deviceId + \" (\" + device.label + \")\");\r\n\r\n            let stream;\r\n            const streaming = await navigator.mediaDevices\r\n                .getUserMedia({\r\n                    video: { deviceId: { exact: device.deviceId } },\r\n                })\r\n                .then(\r\n                    (stream) => {\r\n                        stream.getVideoTracks().forEach((track) => {\r\n                            const capabilities = track.getCapabilities();\r\n\r\n                            if (capabilities.height.max >= maxResolution) {\r\n                                maxResolution = capabilities.height.max;\r\n                                usedCameraId = device.deviceId;\r\n                            }\r\n\r\n                            //console.log(\"Track capabilities: \" + JSON.stringify(capabilities));\r\n                        });\r\n\r\n                        stream.getTracks().forEach((track) => track.stop());\r\n                    },\r\n                    (err) => console.log(err)\r\n                );\r\n        }\r\n\r\n        Quagga.init(\r\n            {\r\n                inputStream: {\r\n                    type: \"LiveStream\",\r\n                    constraints: {\r\n                        deviceId: usedCameraId,\r\n                        focusMode: \"continuous\",\r\n                        width: { min: 1920 },\r\n                        height: { min: 1080 },\r\n                        aspectRatio: {\r\n                            min: 1,\r\n                            max: 2,\r\n                        },\r\n                    },\r\n                },\r\n                locator: {\r\n                    patchSize: \"normal\",\r\n                    halfSample: false,\r\n                },\r\n                locate: false,\r\n                area: {\r\n                    top: \"25%\",\r\n                    right: \"25%\",\r\n                    left: \"25%\",\r\n                    bottom: \"25%\",\r\n                },\r\n                numOfWorkers: window.navigator.hardwareConcurrency || 2,\r\n                decoder: {\r\n                    readers: [\"ean_reader\"],\r\n                },\r\n                debug: {\r\n                    drawBoundingBox: true,\r\n                    showFrequency: true,\r\n                    drawScanline: true,\r\n                    showPattern: true,\r\n                },\r\n                multiple: false,\r\n                singleChannel: false,\r\n            },\r\n            function (err) {\r\n                if (err) {\r\n                    return console.log(err);\r\n                }\r\n                Quagga.start();\r\n            }\r\n        );\r\n        this.props.setQuagga(Quagga);\r\n        Quagga.onDetected(this._onDetected);\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        Quagga.offDetected(this._onDetected);\r\n    }\r\n\r\n    _onDetected = async (result) => {\r\n        let stop = await this.props.onDetected(result);\r\n        console.log(stop);\r\n        if (stop) {\r\n            Quagga.stop();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div id=\"interactive\" className=\"viewport\" />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Scanner;\r\n","import React, { Component } from \"react\";\r\nimport Scanner from \"./Scanner\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport Switch from \"react-switch\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Scan_home extends Component {\r\n    state = {\r\n        scanning: true,\r\n        status: \"\",\r\n        results: [],\r\n        usedCameraId: \"3f6fc4177028f25c3e8215f4444838450630b8d656c627ef511346545d37f302\",\r\n        devices: [],\r\n        reading: 0,\r\n        barcode: undefined,\r\n        bcProductId: undefined,\r\n        Quagga: undefined,\r\n    };\r\n\r\n    setQuagga = (quagga) => {\r\n        console.log(quagga);\r\n        if (this.state.Quagga) {\r\n            this.state.Quagga.stop();\r\n        }\r\n        this.setState({ Quagga: quagga });\r\n    };\r\n\r\n    _scan = () => {\r\n        this.setState({ scanning: !this.state.scanning, status: \"\" });\r\n    };\r\n\r\n    _onDetected = async (res) => {\r\n        console.log(res);\r\n        if (res) {\r\n            if (res.codeResult && res.codeResult.code) {\r\n                this.setState({\r\n                    results: [res],\r\n                    scanning: true,\r\n                    status: \"waiting\",\r\n                });\r\n                let response = await fetch(\r\n                    `https://world.openfoodfacts.org/api/v0/product/${res.codeResult.code}.json/`\r\n                );\r\n                let result = await response.json();\r\n                console.log(result);\r\n                if (result.status !== 0) {\r\n                    this.setState({\r\n                        scanning: false,\r\n                        status: \"found\",\r\n                        barcode: res.codeResult.code,\r\n                    });\r\n                    return true;\r\n                } else {\r\n                    this.setState({\r\n                        scanning: true,\r\n                        status: \"not found\",\r\n                    });\r\n                    return false;\r\n                }\r\n                // .then((response) => response.json())\r\n                //     .then((result) => {\r\n                //         console.log(result);\r\n                //         if (result.status !== 0) {\r\n                //             this.setState({\r\n                //                 scanning: false,\r\n                //                 status: \"found\",\r\n                //                 barcode: res.codeResult.code,\r\n                //             });\r\n                //         } else {\r\n                //             this.setState({\r\n                //                 scanning: true,\r\n                //                 status: \"not found\",\r\n                //             });\r\n                //         }\r\n                //     });\r\n            }\r\n        }\r\n    };\r\n\r\n    handleScan = (data) => {\r\n        if (data) {\r\n            let arr = data.split(\"/\");\r\n            if (arr.length > 1) {\r\n                this.setState({\r\n                    scanning: false,\r\n                    barcode: arr[4],\r\n                    bcProductId: arr[5],\r\n                    status: \"found\",\r\n                });\r\n            }\r\n            this.state.Quagga.stop();\r\n        }\r\n    };\r\n    handleError = (err) => {\r\n        console.error(err);\r\n    };\r\n\r\n    displayQrCode = () => {\r\n        if (this.state.status !== \"found\") {\r\n            return (\r\n                <QrReader\r\n                    delay={300}\r\n                    onError={this.handleError}\r\n                    onScan={this.handleScan}\r\n                    style={{ width: \"100%\" }}\r\n                    showViewFinder={false}\r\n                />\r\n            );\r\n        } else {\r\n            return <React.Fragment />;\r\n        }\r\n    };\r\n\r\n    displayBarCode = () => {\r\n        if (this.state.status !== \"found\") {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"header\">\r\n                        {this.state.scanning ? \"true\" : \"false\"}\r\n                        {/* {this.state.devices?.length > 4 ? (\r\n                            <button className=\"code-switch-camera\" onClick={this.switchCamera}>\r\n                                <span className=\"material-icons\">cameraswitch</span>\r\n                                {this.state.usedCamera}\r\n                            </button>\r\n                        ) : (\r\n                            <React.Fragment />\r\n                        )} */}\r\n                        <ul className=\"results\">\r\n                            {this.state.results.map((result, i) => (\r\n                                <div key={result.codeResult.code + i}>\r\n                                    {this.state.status === \"waiting\"\r\n                                        ? \"Vrification du code\" + result?.codeResult?.code\r\n                                        : \"\"}\r\n                                    {this.state.status === \"not found\"\r\n                                        ? \"code non trouv, merci de ressayer\"\r\n                                        : \"\"}\r\n                                </div>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                    {this.state.scanning ? (\r\n                        <Scanner\r\n                            onDetected={this._onDetected}\r\n                            setQuagga={this.setQuagga}\r\n                            usedCameraId={this.usedCameraId}\r\n                        />\r\n                    ) : null}\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            return <React.Fragment />;\r\n        }\r\n    };\r\n\r\n    switchReader = () => {\r\n        if (this.state.reading) this.setState({ reading: false });\r\n        else this.setState({ reading: true });\r\n    };\r\n\r\n    render() {\r\n        console.log(\"Results: \", this.state.results, this.state.redirect);\r\n        if (\r\n            this.state.barcode &&\r\n            this.state.bcProductId &&\r\n            (this.props.barcode !== this.state.barcode ||\r\n                this.props.bcProductId !== this.state.bcProductId)\r\n        ) {\r\n            return (\r\n                <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\r\n            );\r\n        }\r\n        if (this.state.barcode && this.props.barcode !== this.state.barcode) {\r\n            return <Redirect to={\"/products/\" + this.state.barcode} />;\r\n        } else {\r\n            return (\r\n                <div className=\"code-reader-container\">\r\n                    <span\r\n                        class=\"close\"\r\n                        onClick={() => {\r\n                            this.props?.onCrossClicked(false);\r\n                        }}\r\n                    >\r\n                        &times;\r\n                    </span>\r\n                    <div className=\"code-switch\" onClick={this.switchReader}>\r\n                        <div className=\"span-code-switch\">\r\n                            <span\r\n                                className={\r\n                                    this.state.reading ? \"material-icons\" : \"material-icons green\"\r\n                                }\r\n                            >\r\n                                view_week\r\n                            </span>\r\n                            <span>Barcode</span>\r\n                        </div>\r\n                        <Switch\r\n                            onChange={this.switchReader}\r\n                            uncheckedIcon={false}\r\n                            checkedIcon={false}\r\n                            checked={this.state.reading}\r\n                            onColor={\"#888\"}\r\n                            offColor={\"#888\"}\r\n                        />\r\n                        <div className=\"span-code-switch\">\r\n                            <span\r\n                                className={\r\n                                    !this.state.reading ? \"material-icons\" : \"material-icons green\"\r\n                                }\r\n                            >\r\n                                qr_code_scanner\r\n                            </span>\r\n                            <span>QR Code</span>\r\n                        </div>\r\n                    </div>\r\n                    {this.state.reading ? this.displayQrCode() : this.displayBarCode()}\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Scan_home;\r\n","import \"./Navbar.css\";\r\nimport React from \"react\";\r\nimport ButtonHistory from \"../Button/ButtonHistory\";\r\nimport ButtonProfil from \"../Button/ButtonProfil\";\r\nimport ButtonScan from \"../Button/ButtonScan\";\r\nimport Scan from \"../Scan/Scan\";\r\nimport Scan_home from \"../Test/Scan_home\";\r\nimport { ScanSettings } from \"scandit-sdk\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\n\r\nclass Navbar extends React.Component {\r\n    state = {\r\n        showScanner: false,\r\n        barcode: undefined,\r\n        bcProductId: undefined,\r\n        height: 0,\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.updateWindowDimensions();\r\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions = () => {\r\n        this.setState({ height: window.innerHeight });\r\n    };\r\n\r\n    handleScannerButton = (bool) => {\r\n        this.setState({ showScanner: bool });\r\n    };\r\n\r\n    handleBarcode = (res) => {\r\n        if (res) {\r\n            //dtect par barcode scanner\r\n            let arr = res.split(\"/\");\r\n            if (arr.length > 1) {\r\n                this.setState({\r\n                    barcode: arr[4],\r\n                    bcProductId: arr[5],\r\n                    showScanner: false,\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    barcode: arr[0],\r\n                    showScanner: false,\r\n                    bcProductId: undefined,\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    render = () => {\r\n        if (this.state.height < 550) {\r\n            return <React.Fragment />;\r\n        }\r\n        if (\r\n            this.state.barcode &&\r\n            this.state.bcProductId &&\r\n            (this.props.barcode !== this.state.barcode ||\r\n                this.props.bcProductId !== this.state.bcProductId)\r\n        ) {\r\n            return (\r\n                <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\r\n            );\r\n        }\r\n\r\n        if (this.state.barcode && this.props.barcode !== this.state.barcode) {\r\n            return <Redirect to={\"/products/\" + this.state.barcode} />;\r\n        }\r\n\r\n        if (!this.state.showScanner) {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"navbar-container\">\r\n                        <Link\r\n                            to=\"/history\"\r\n                            className={\r\n                                window.location.pathname == \"/history\"\r\n                                    ? \"navbar-link navbar-text-left navbar-selected\"\r\n                                    : \"navbar-link navbar-text-left \"\r\n                            }\r\n                        >\r\n                            <ButtonHistory />\r\n                        </Link>\r\n                        <div onClick={() => this.handleScannerButton(true)}>\r\n                            <div className=\"navbar-circle\">\r\n                                <ButtonScan />\r\n                            </div>\r\n                        </div>\r\n                        <span className=\"navbar-scan-text\">Scan</span>\r\n                        <Link\r\n                            to=\"/profil\"\r\n                            className={\r\n                                window.location.pathname == \"/profil\"\r\n                                    ? \"navbar-link navbar-text-right navbar-selected\"\r\n                                    : \"navbar-link navbar-text-right \"\r\n                            }\r\n                        >\r\n                            <ButtonProfil />\r\n                        </Link>\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            return (\r\n                <Scan\r\n                    onCrossClicked={this.handleScannerButton}\r\n                    // playSoundOnScan={true}\r\n                    vibrateOnScan={true}\r\n                    enableTorchToggle={true}\r\n                    enablePinchToZoom={true}\r\n                    enableCameraSwitcher={true}\r\n                    guiStyle={\"viewfinder\"}\r\n                    scanSettings={\r\n                        new ScanSettings({\r\n                            enabledSymbologies: [\r\n                                \"qr\",\r\n                                \"ean8\",\r\n                                \"ean13\",\r\n                                \"upca\",\r\n                                \"upce\",\r\n                                \"code128\",\r\n                                \"code39\",\r\n                                \"code93\",\r\n                                \"itf\",\r\n                            ],\r\n                            codeDuplicateFilter: 1000,\r\n                        })\r\n                    }\r\n                    onScan={(scanResult) => {\r\n                        console.log(scanResult.barcodes[0].data);\r\n                        this.handleBarcode(scanResult.barcodes[0].data);\r\n                    }}\r\n                    onError={(error) => {\r\n                        console.error(error.message);\r\n                    }}\r\n                />\r\n                // <Scan_home onCrossClicked={this.handleScannerButton} history={this.props.history} />\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default Navbar;\r\n","export default __webpack_public_path__ + \"static/media/logo.0dcb8e95.svg\";","export default __webpack_public_path__ + \"static/media/bitmap.6f490d5b.png\";","import './Header.css';\r\nimport logo from '../../assets/images/logo.svg';\r\nimport blob from \"../../assets/images/bitmap.png\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <div>\r\n      <div>\r\n\t\t\t\t\t\t<img src={blob} className=\"blob-top\" alt=\"Blob\" />\r\n\t\t\t\t</div>\r\n        <div>\r\n          <img src={blob} className=\"blob-left\" alt=\"Blob\" />\r\n        </div>\r\n        <div>\r\n          <img src={blob} className=\"blob-right\" alt=\"Blob\" />\r\n        </div>\r\n      <div className=\"header-container\">\r\n        <img src={logo} className=\"header-logo\" alt=\"Logo\"/>\r\n        <span>Lowympact</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;","import { React, Component, Fragment } from \"react\";\r\nimport fruits from \"../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport Navbar from \"../components/Navbar/Navbar\";\r\nimport Header from \"../components/Header/Header\";\r\nimport \"./History.css\";\r\n// import { ITEMS } from \"../assets/scanned/items\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction RenderHistoryItem({ item }) {\r\n    var labelColor;\r\n    if (item.label === \"d\" || item.label === \"e\") {\r\n        labelColor = \"red\";\r\n    } else if (item.label === \"c\") {\r\n        labelColor = \"yellow\";\r\n    } else if (item.label === \"a\" || item.label === \"b\") {\r\n        labelColor = \"green\";\r\n    }\r\n\r\n    var pathProduct = \"/products/\" + item.barcode;\r\n    if (item.bcProductId) {\r\n        pathProduct += \"/\" + item.bcProductId;\r\n    }\r\n\r\n    // Mock Soutenance\r\n    if (item.barcode === \"80135463\") {\r\n        item.name = \"Nutella 200g\";\r\n    }\r\n\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n            <Link className=\"history-item\" to={pathProduct}>\r\n                <div className=\"history-img-container\">\r\n                    <img src={item.image} alt=\"\" />\r\n                </div>\r\n                <div className=\"history-name-container\">\r\n                    <div className=\"history-name\">{item.name}</div>\r\n                    <div className=\"history-brand\">{item.brand}</div>\r\n                </div>\r\n                <div className=\"history-label-container\">\r\n                    <div style={{ color: labelColor }}></div>\r\n                    <div className=\"history-label\">\r\n                        {item.label == \"not-applicable\" ? \"\" : item.label}\r\n                    </div>\r\n                </div>\r\n                <div style={{ marginRight: \"10px\", color: \"rgb(41,72,102)\" }}>{\">\"}</div>\r\n            </Link>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\nclass History extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            items: undefined,\r\n            loading: true,\r\n            userId: undefined,\r\n        };\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let userId = localStorage.getItem(\"userId\");\r\n        let token = localStorage.getItem(\"token\");\r\n        if (userId && token) {\r\n            this.setState({ userId: userId });\r\n            this.loadHistoryInformations(userId);\r\n        } else {\r\n            this.loadLocalStorageHistory(userId);\r\n        }\r\n    };\r\n\r\n    loadHistoryInformations = (userId) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}/history`,\r\n            // `http://localhost:8080/api/v1/users/${userId}/history`,\r\n\r\n            {\r\n                method: \"get\",\r\n                credentials: \"include\",\r\n                headers: new Headers({\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n\r\n                this.setState({\r\n                    items: res?.data,\r\n                    loading: false,\r\n                });\r\n            });\r\n    };\r\n\r\n    loadLocalStorageHistory = () => {\r\n        let history = JSON.parse(localStorage.getItem(\"local_history\"));\r\n        this.setState({\r\n            items: history,\r\n            loading: false,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        if (this.state.items) {\r\n            let itemList = <Fragment />;\r\n            if (!this.loading) {\r\n                itemList = this.state.items.map((item) => {\r\n                    return (\r\n                        <div key={item.id}>\r\n                            <RenderHistoryItem item={item} />\r\n                        </div>\r\n                    );\r\n                });\r\n            } else {\r\n                itemList = (\r\n                    <div className=\"loader\">\r\n                        <img src=\"/images/utils/loading.gif\" alt=\"\" />\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            if (Object.keys(this.state.items).length === 0)\r\n                return (\r\n                    <div>\r\n                        <Header />\r\n                        <Navbar />\r\n                        <motion.div\r\n                            className=\"App\"\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                        >\r\n                            <div>\r\n                                <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                                <p className=\"logo-text\">Commence  scanner des produits !</p>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                );\r\n            else\r\n                return (\r\n                    <div>\r\n                        <div className=\"screen\">\r\n                            <div className=\"screen-title\"></div>\r\n                            {itemList}\r\n                        </div>\r\n                        <Header />\r\n                        <Navbar />\r\n                    </div>\r\n                );\r\n        } else {\r\n            let image = (\r\n                <div>\r\n                    <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                    <p className=\"logo-text\">Commence  scanner des produits !</p>\r\n                </div>\r\n            );\r\n            if (this.state.loading) {\r\n                image = (\r\n                    <div className=\"loader\">\r\n                        <img src=\"/images/utils/loading.gif\" alt=\"\" />\r\n                    </div>\r\n                );\r\n            }\r\n            return (\r\n                <div>\r\n                    <Header />\r\n                    <Navbar />\r\n                    <motion.div\r\n                        className=\"App\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                    >\r\n                        {image}\r\n                    </motion.div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default History;\r\n","import logo from \"../assets/images/logo.svg\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Error404() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<header className=\"App-header\">\r\n\t\t\t\t<img src={logo} className=\"logo\" alt=\"logo\" />\r\n\t\t\t\t<h1>Erreur 404</h1>\r\n\t\t\t\t<Link to=\"/\">Retourner  l'accueil</Link>\r\n\t\t\t</header>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Error404;\r\n","import '../../pages/Login.css';\r\nfunction ButtonCreateAccount() {\r\n    return (\r\n      <div>\r\n        Crer un compte\r\n      </div>\r\n    );\r\n  }\r\n  export default ButtonCreateAccount;\r\n","\r\nfunction ButtonLogin() {\r\n    return (\r\n      <div>\r\n        Me connecter\r\n      </div>\r\n    );\r\n  }\r\n  export default ButtonLogin;","function ButtonNoAccount() {\r\n\treturn <div>Continuer sans compte {\">\"}</div>;\r\n}\r\nexport default ButtonNoAccount;\r\n","import React from \"react\";\r\nimport logo from \"../assets/images/logo.svg\";\r\nimport fruits from \"../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport \"./Login.css\";\r\nimport ButtonCreateAccount from \"../components/Button/ButtonCreateAccount\";\r\nimport ButtonLogin from \"../components/Button/ButtonLogin\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ButtonNoAccount from \"../components/Button/ButtonNoAccount\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nclass Login extends React.Component {\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n        const queryString = window.location.search;\r\n        const urlParams = new URLSearchParams(queryString);\r\n\r\n        if (window.innerWidth > 1200 && urlParams.get(\"from\") != \"website\") {\r\n            window.location.assign(\"https://web.lowympact.fr\");\r\n        }\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            console.log(decodedToken, dateNow.getTime() / 1000);\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === false) {\r\n            console.log(\"here\");\r\n            this.props.history.push(`/history`); // redirection vers la page login\r\n        }\r\n    };\r\n    render = () => {\r\n        return (\r\n            <motion.div exit={{ opacity: 0 }}>\r\n                <div className=\"login-logo\">\r\n                    <img src={logo} className=\"logo\" alt=\"Logo\" />\r\n                </div>\r\n                <div className=\"login-lowympact\">Lowympact</div>\r\n                <Link to=\"/signup\" className=\"button-account\">\r\n                    <ButtonCreateAccount />\r\n                </Link>\r\n                <Link to=\"/signin\" className=\"button-connect\">\r\n                    <ButtonLogin />\r\n                </Link>\r\n                <Link to=\"/history\" className=\"button-no-account\">\r\n                    <ButtonNoAccount />\r\n                </Link>\r\n                <div className=\"logo-fruits\">\r\n                    <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                </div>\r\n            </motion.div>\r\n        );\r\n    };\r\n}\r\nexport default Login;\r\n","import L from \"leaflet\";\r\n\r\nL.Curve = L.Path.extend({\r\n\toptions: {},\r\n\r\n\tinitialize: function (path, options) {\r\n\t\t//1\r\n\t\tL.setOptions(this, options);\r\n\t\tthis._initialUpdate = true;\r\n\t\tthis._setPath(path);\r\n\t},\r\n\r\n\tgetPath: function () {\r\n\t\treturn this._coords;\r\n\t},\r\n\r\n\tsetPath: function (path, options) {\r\n\t\tthis._initialUpdate = true;\r\n\t\tthis._setPath(path);\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\treturn this._bounds;\r\n\t},\r\n\r\n\t_setPath: function (path) {\r\n\t\t//2\r\n\t\tthis._coords = path;\r\n\t\tthis._bounds = this._computeBounds();\r\n\t},\r\n\r\n\t_computeBounds: function () {\r\n\t\t//3\r\n\t\tvar bound = new L.LatLngBounds();\r\n\t\tvar lastPoint;\r\n\t\tvar lastCommand;\r\n\t\tvar coord;\r\n\t\tfor (var i = 0; i < this._coords.length; i++) {\r\n\t\t\tcoord = this._coords[i];\r\n\t\t\tif (typeof coord == \"string\" || coord instanceof String) {\r\n\t\t\t\tlastCommand = coord;\r\n\t\t\t} else if (lastCommand == \"H\") {\r\n\t\t\t\tbound.extend([lastPoint.lat, coord[0]]);\r\n\t\t\t\tlastPoint = new L.latLng(lastPoint.lat, coord[0]);\r\n\t\t\t} else if (lastCommand == \"V\") {\r\n\t\t\t\tbound.extend([coord[0], lastPoint.lng]);\r\n\t\t\t\tlastPoint = new L.latLng(coord[0], lastPoint.lng);\r\n\t\t\t} else if (lastCommand == \"C\") {\r\n\t\t\t\tvar controlPoint1 = new L.latLng(coord[0], coord[1]);\r\n\t\t\t\tcoord = this._coords[++i];\r\n\t\t\t\tvar controlPoint2 = new L.latLng(coord[0], coord[1]);\r\n\t\t\t\tcoord = this._coords[++i];\r\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\r\n\r\n\t\t\t\tbound.extend(controlPoint1);\r\n\t\t\t\tbound.extend(controlPoint2);\r\n\t\t\t\tbound.extend(endPoint);\r\n\r\n\t\t\t\tendPoint.controlPoint1 = controlPoint1;\r\n\t\t\t\tendPoint.controlPoint2 = controlPoint2;\r\n\t\t\t\tlastPoint = endPoint;\r\n\t\t\t} else if (lastCommand == \"S\") {\r\n\t\t\t\tvar controlPoint2 = new L.latLng(coord[0], coord[1]);\r\n\t\t\t\tcoord = this._coords[++i];\r\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\r\n\r\n\t\t\t\tvar controlPoint1 = lastPoint;\r\n\t\t\t\tif (lastPoint.controlPoint2) {\r\n\t\t\t\t\tvar diffLat = lastPoint.lat - lastPoint.controlPoint2.lat;\r\n\t\t\t\t\tvar diffLng = lastPoint.lng - lastPoint.controlPoint2.lng;\r\n\t\t\t\t\tcontrolPoint1 = new L.latLng(\r\n\t\t\t\t\t\tlastPoint.lat + diffLat,\r\n\t\t\t\t\t\tlastPoint.lng + diffLng\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbound.extend(controlPoint1);\r\n\t\t\t\tbound.extend(controlPoint2);\r\n\t\t\t\tbound.extend(endPoint);\r\n\r\n\t\t\t\tendPoint.controlPoint1 = controlPoint1;\r\n\t\t\t\tendPoint.controlPoint2 = controlPoint2;\r\n\t\t\t\tlastPoint = endPoint;\r\n\t\t\t} else if (lastCommand == \"Q\") {\r\n\t\t\t\tvar controlPoint = new L.latLng(coord[0], coord[1]);\r\n\t\t\t\tcoord = this._coords[++i];\r\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\r\n\r\n\t\t\t\tbound.extend(controlPoint);\r\n\t\t\t\tbound.extend(endPoint);\r\n\r\n\t\t\t\tendPoint.controlPoint = controlPoint;\r\n\t\t\t\tlastPoint = endPoint;\r\n\t\t\t} else if (lastCommand == \"T\") {\r\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\r\n\r\n\t\t\t\tvar controlPoint = lastPoint;\r\n\t\t\t\tif (lastPoint.controlPoint) {\r\n\t\t\t\t\tvar diffLat = lastPoint.lat - lastPoint.controlPoint.lat;\r\n\t\t\t\t\tvar diffLng = lastPoint.lng - lastPoint.controlPoint.lng;\r\n\t\t\t\t\tcontrolPoint = new L.latLng(\r\n\t\t\t\t\t\tlastPoint.lat + diffLat,\r\n\t\t\t\t\t\tlastPoint.lng + diffLng\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbound.extend(controlPoint);\r\n\t\t\t\tbound.extend(endPoint);\r\n\r\n\t\t\t\tendPoint.controlPoint = controlPoint;\r\n\t\t\t\tlastPoint = endPoint;\r\n\t\t\t} else {\r\n\t\t\t\tbound.extend(coord);\r\n\t\t\t\tlastPoint = new L.latLng(coord[0], coord[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bound;\r\n\t},\r\n\r\n\t//TODO: use a centroid algorithm instead\r\n\tgetCenter: function () {\r\n\t\treturn this._bounds.getCenter();\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\t//5\r\n\t\tif (!this._map) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._updatePath();\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\t//6\r\n\t\tthis._renderer._updatecurve(this);\r\n\t},\r\n\r\n\t_project: function () {\r\n\t\t//4\r\n\t\tvar coord, lastCoord, curCommand, curPoint;\r\n\r\n\t\tthis._points = [];\r\n\r\n\t\tfor (var i = 0; i < this._coords.length; i++) {\r\n\t\t\tcoord = this._coords[i];\r\n\t\t\tif (typeof coord == \"string\" || coord instanceof String) {\r\n\t\t\t\tthis._points.push(coord);\r\n\t\t\t\tcurCommand = coord;\r\n\t\t\t} else {\r\n\t\t\t\tswitch (coord.length) {\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint(coord);\r\n\t\t\t\t\t\tlastCoord = coord;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (curCommand == \"H\") {\r\n\t\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint([\r\n\t\t\t\t\t\t\t\tlastCoord[0],\r\n\t\t\t\t\t\t\t\tcoord[0],\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tlastCoord = [lastCoord[0], coord[0]];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint([\r\n\t\t\t\t\t\t\t\tcoord[0],\r\n\t\t\t\t\t\t\t\tlastCoord[1],\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tlastCoord = [coord[0], lastCoord[1]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis._points.push(curPoint);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n\r\nL.curve = function (path, options) {\r\n\treturn new L.Curve(path, options);\r\n};\r\n\r\nL.SVG.include({\r\n\t//7\r\n\t_updatecurve: function (layer) {\r\n\t\tthis._setPath(layer, this._curvePointsToPath(layer._points));\r\n\t\tif (layer.options.animate) {\r\n\t\t\tvar path = layer._path;\r\n\t\t\tvar length = path.getTotalLength();\r\n\r\n\t\t\tif (!layer.options.dashArray) {\r\n\t\t\t\tpath.style.strokeDasharray = length + \" \" + length;\r\n\t\t\t}\r\n\r\n\t\t\tif (layer._initialUpdate) {\r\n\t\t\t\tpath.animate(\r\n\t\t\t\t\t[{ strokeDashoffset: length }, { strokeDashoffset: 0 }],\r\n\t\t\t\t\tlayer.options.animate\r\n\t\t\t\t);\r\n\t\t\t\tlayer._initialUpdate = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_curvePointsToPath: function (points) {\r\n\t\tvar point,\r\n\t\t\tcurCommand,\r\n\t\t\tstr = \"\";\r\n\t\tfor (var i = 0; i < points.length; i++) {\r\n\t\t\tpoint = points[i];\r\n\t\t\tif (typeof point == \"string\" || point instanceof String) {\r\n\t\t\t\tcurCommand = point;\r\n\t\t\t\tstr += curCommand;\r\n\t\t\t} else {\r\n\t\t\t\tswitch (curCommand) {\r\n\t\t\t\t\tcase \"H\":\r\n\t\t\t\t\t\tstr += point.x + \" \";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"V\":\r\n\t\t\t\t\t\tstr += point.y + \" \";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tstr += point.x + \",\" + point.y + \" \";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str || \"M0 0\";\r\n\t},\r\n});\r\n","// import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Path, withLeaflet } from \"react-leaflet\";\r\nimport { curve } from \"./leaflet.curve\";\r\nimport L from \"leaflet\";\r\n\r\nclass Curve extends Path {\r\n\tcreateLeafletElement(props) {\r\n\t\tconst { positions, option, ...options } = props;\r\n\t\treturn L.curve(positions, option, this.getOptions(options));\r\n\t}\r\n\r\n\tupdateLeafletElement(fromProps, toProps) {\r\n\t\tif (toProps.positions !== fromProps.positions) {\r\n\t\t\tthis.leafletElement.setPath(toProps.positions);\r\n\t\t}\r\n\t\tthis.setStyleIfChanged(fromProps, toProps);\r\n\t}\r\n}\r\n\r\nCurve.propTypes = {\r\n\tchildren: PropTypes.oneOfType([\r\n\t\tPropTypes.arrayOf(PropTypes.node),\r\n\t\tPropTypes.node,\r\n\t]),\r\n\toption: PropTypes.object,\r\n\tpositions: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default withLeaflet(Curve);\r\n\r\n/*\r\n  componentWillMount() {\r\n    super.componentWillMount();\r\n    const { positions, ...options } = this.props\r\n    this.leafletElement = L.curve(positions, this.getOptions(options))\r\n  }*/\r\n","import React from \"react\";\r\nimport { Map, TileLayer, Marker } from \"react-leaflet\";\r\nimport \"./Traceability.css\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport { Curve } from \"./leaflet-curve\";\r\nimport L from \"leaflet\";\r\n// Import Swiper styles\r\nimport \"swiper/swiper-bundle.css\";\r\n\r\nclass Traceability extends React.Component {\r\n    map = undefined;\r\n    state = {\r\n        zoom: 12,\r\n        swiper: undefined,\r\n        currentIndex: 0,\r\n        map: undefined,\r\n    };\r\n\r\n    getMaterialIcon = (mode) => {\r\n        switch (mode) {\r\n            case \"Charette\":\r\n                return \"directions_bike\";\r\n            case \"Plane\":\r\n                return \"flight_takeoff\";\r\n            case \"Train\":\r\n                return \"train\";\r\n            case \"Boat\":\r\n                return \"directions_boat_filled\";\r\n            case \"Truck\":\r\n                return \"local_shipping\";\r\n            default:\r\n                return \"nature_people\";\r\n        }\r\n    };\r\n\r\n    getTransportMode = (mode) => {\r\n        switch (mode) {\r\n            case \"Charette\":\r\n                return \"vlo\";\r\n            case \"Plane\":\r\n                return \"avion\";\r\n            case \"Train\":\r\n                return \"train\";\r\n            case \"Boat\":\r\n                return \"bateau\";\r\n            case \"Truck\":\r\n                return \"camion\";\r\n            default:\r\n                return mode;\r\n        }\r\n    };\r\n    getTranslation = (mode) => {\r\n        switch (mode) {\r\n            case \"maker\":\r\n                return \"Fabricant\";\r\n            case \"productor\":\r\n                return \"Producteur\";\r\n            case \"shop\":\r\n                return \"Revendeur\";\r\n            default:\r\n                return mode;\r\n        }\r\n    };\r\n\r\n    displaySlides = () => {\r\n        let slides = <React.Fragment />;\r\n        if (this.props.products) {\r\n            slides = this.props.products.map((product) => {\r\n                let pastille = \"product-slide-pastille past-green\";\r\n                if (product.TransportCO2Impact?.value > 10) {\r\n                    pastille = \"product-slide-pastille past-orange\";\r\n                }\r\n                if (product.TransportCO2Impact?.value > 100) {\r\n                    pastille = \"product-slide-pastille past-red\";\r\n                }\r\n\r\n                return (\r\n                    <SwiperSlide>\r\n                        <div className=\"product-slide-container\">\r\n                            <div className=\"product-slide-icon\">\r\n                                <span class=\"material-icons\">\r\n                                    {this.getMaterialIcon(product.transport)}\r\n                                </span>\r\n\r\n                                <div className=\"product-slide-name\">\r\n                                    <span className=\"product-slide-name-product\">\r\n                                        {product.productsOutput[0].productName}\r\n                                    </span>\r\n                                    <span className=\"product-slide-name-transport\">\r\n                                        Transport en {this.getTransportMode(product.transport)}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"product-slide-origin-wrapper\">\r\n                                <div className=\"product-transport-ui\">\r\n                                    <div className=\"transport-ui-circle\"></div>\r\n                                    <div className=\"transport-ui-tiret\"></div>\r\n                                    <div className=\"transport-ui-circle circle-bis\"></div>\r\n                                </div>\r\n                                <div className=\"product-slide-transport-container\">\r\n                                    <div className=\"product-slide-bigname\">\r\n                                        <span>\r\n                                            {product.seller.localisation.city},{\" \"}\r\n                                            {product.seller.localisation.country}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"product-slide-lowername2\">\r\n                                        {this.getTranslation(product.seller?.type)}\r\n                                        {\": \"}\r\n                                        {product.seller?.name}\r\n                                    </div>\r\n\r\n                                    <div className=\"product-slide-bigname bigname-lower\">\r\n                                        <span>\r\n                                            {product.buyer.localisation.city},{\" \"}\r\n                                            {product.buyer.localisation.country}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"product-slide-lowername2\">\r\n                                        {this.getTranslation(product.buyer?.type)}\r\n                                        {\": \"}\r\n                                        {product.buyer?.name}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"product-slide-arrow\">{\">\"}</div>\r\n                            <div className=\"product-slide-consumption\">\r\n                                <div className={pastille}></div>\r\n                                <div>{Math.round(product.dist.value)} km </div>\r\n                                <div>\r\n                                    {product.TransportCO2Impact?.value > 1\r\n                                        ? Math.round(product.TransportCO2Impact?.value)\r\n                                        : \"< 1\"}{\" \"}\r\n                                    kg CO2{\" \"}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </SwiperSlide>\r\n                );\r\n            });\r\n        }\r\n        return slides;\r\n    };\r\n\r\n    handleMarkerClick = (latlng, index) => {\r\n        // window.scrollTo({ top: \"8000px\", behavior: \"smooth\" });\r\n        let elem = document.getElementsByClassName(\"swiper-container\");\r\n        if (elem[0]) {\r\n            elem[0].scrollIntoView({ behavior: \"smooth\" });\r\n        }\r\n\r\n        if (index >= this.props.products?.length) {\r\n            this.state.swiper.slideTo(index - 1, 500);\r\n        } else {\r\n            this.state.swiper.slideTo(index, 500);\r\n        }\r\n        let zoom = 5;\r\n        if (this.props.products && this.props.products[index]) {\r\n            let p = this.props.products[index];\r\n\r\n            zoom = getZoomRatio(\r\n                [p.buyer.localisation.latitude, p.buyer.localisation.longitude],\r\n                [p.seller.localisation.latitude, p.seller.localisation.longitude]\r\n            );\r\n        }\r\n\r\n        this.map.leafletElement.flyTo(latlng, zoom, { duration: 0.5 });\r\n    };\r\n\r\n    onSlideChange = (index) => {\r\n        this.setState({ currentIndex: index });\r\n        let zoom = 5;\r\n        if (this.props.products && this.props.products[index]) {\r\n            let p = this.props.products[index];\r\n\r\n            zoom = getZoomRatio(\r\n                [p.buyer.localisation.latitude, p.buyer.localisation.longitude],\r\n                [p.seller.localisation.latitude, p.seller.localisation.longitude]\r\n            );\r\n\r\n            let lat =\r\n                (parseFloat(p.seller.localisation.latitude) +\r\n                    parseFloat(p.buyer.localisation.latitude)) /\r\n                2;\r\n            let long =\r\n                (parseFloat(p.seller.localisation.longitude) +\r\n                    parseFloat(p.buyer.localisation.longitude)) /\r\n                2;\r\n\r\n            this.map.leafletElement.flyTo([lat, long], zoom, { duration: 0.5 });\r\n        }\r\n    };\r\n\r\n    displayMarker = () => {\r\n        let markers = <React.Fragment />;\r\n        if (this.props.products) {\r\n            markers = this.props.products.map((product, i) => {\r\n                let marker1 = <React.Fragment />;\r\n                let lat1 = parseFloat(product?.buyer?.localisation?.latitude);\r\n                let long1 = parseFloat(product?.buyer?.localisation?.longitude);\r\n                let marker2 = <React.Fragment />;\r\n                let lat2 = parseFloat(product?.seller?.localisation?.latitude);\r\n                let long2 = parseFloat(product?.seller?.localisation?.longitude);\r\n                let icon;\r\n                let icon2;\r\n                let zIndex = 0;\r\n                if (i === this.state.currentIndex) {\r\n                    icon = new L.Icon({\r\n                        iconUrl: \"/images/utils/map.png\", //require('../../images/logo/logo.svg'),\r\n                        iconRetinaUrl: \"/images/utils/map.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\r\n                        iconSize: new L.Point(32, 32),\r\n                        className: \"leaflet-mark-icon\",\r\n                    });\r\n                    icon2 = new L.Icon({\r\n                        iconUrl: \"/images/utils/map.png\", //require('../../images/logo/logo.svg'),\r\n                        iconRetinaUrl: \"/images/utils/map3.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\r\n                        iconSize: new L.Point(32, 32),\r\n                        className: \"leaflet-mark-icon\",\r\n                    });\r\n                    zIndex = 5;\r\n                } else {\r\n                    icon = new L.Icon({\r\n                        iconUrl: \"/images/utils/map2.png\", //require('../../images/logo/logo.svg'),\r\n                        iconRetinaUrl: \"/images/utils/map2.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\r\n                        iconSize: new L.Point(25, 25),\r\n                        className: \"leaflet-mark-icon\",\r\n                    });\r\n                    icon2 = new L.Icon({\r\n                        iconUrl: \"/images/utils/map2.png\", //require('../../images/logo/logo.svg'),\r\n                        iconRetinaUrl: \"/images/utils/map2.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\r\n                        iconSize: new L.Point(25, 25),\r\n                        className: \"leaflet-mark-icon\",\r\n                    });\r\n                }\r\n\r\n                if (lat1 && long1) {\r\n                    marker1 = (\r\n                        <Marker\r\n                            zIndexOffset={zIndex}\r\n                            icon={icon}\r\n                            position={[lat1, long1]}\r\n                            onClick={() =>\r\n                                this.handleMarkerClick(\r\n                                    [\r\n                                        parseFloat(product.buyer.localisation.latitude),\r\n                                        parseFloat(product.buyer.localisation.longitude),\r\n                                    ],\r\n                                    i + 1\r\n                                )\r\n                            }\r\n                        >\r\n                            {/* <Popup>{product.buyer.name}</Popup> */}\r\n                        </Marker>\r\n                    );\r\n                }\r\n                if (lat2 && long2) {\r\n                    marker2 = (\r\n                        <Marker\r\n                            zIndexOffset={zIndex}\r\n                            icon={icon2}\r\n                            position={[lat2, long2]}\r\n                            onClick={() =>\r\n                                this.handleMarkerClick(\r\n                                    [\r\n                                        parseFloat(product.seller.localisation.latitude),\r\n                                        parseFloat(product.seller.localisation.longitude),\r\n                                    ],\r\n                                    i\r\n                                )\r\n                            }\r\n                        >\r\n                            {/* <Popup>{product.seller.name}</Popup> */}\r\n                        </Marker>\r\n                    );\r\n                }\r\n\r\n                let color = \"#1b3044\";\r\n                let curves = document.getElementsByClassName(\"leaflet-interactive\");\r\n\r\n                if (curves && curves[i] && i === this.state.currentIndex) {\r\n                    curves[i].setAttribute(\"stroke\", \"#78be95\");\r\n                } else if (curves && curves[i]) {\r\n                    curves[i].setAttribute(\"stroke\", \"#1b3044\");\r\n                }\r\n\r\n                return (\r\n                    <React.Fragment>\r\n                        <div className=\"test\">\r\n                            <Curve\r\n                                positions={getCurveOptions(lat2, long2, lat1, long1)}\r\n                                option={{\r\n                                    color: color,\r\n                                    fill: false,\r\n                                    // animate: animate,\r\n                                    delay: 5000,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {marker1}\r\n                        {marker2}\r\n                    </React.Fragment>\r\n                );\r\n            });\r\n        }\r\n        return markers;\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <div className=\"tracability-container\">\r\n                <div className=\"product-CO2-total-tracability-container\">\r\n                    <span className=\"product-CO2-total-tracability\">\r\n                        Impact total carbone :&nbsp;\r\n                        <span className=\"carbon-total-number\">\r\n                            {parseFloat(this.props.totalCO2Traceability).toFixed(1)}\r\n                        </span>\r\n                        kg CO2 soit &nbsp;\r\n                        <span className=\"carbon-total-number\">\r\n                            {parseFloat(\r\n                                ((this.props.totalCO2Traceability * 0.05) / 11.0) * 1000.0\r\n                            ).toFixed(1)}\r\n                        </span>\r\n                        kms parcourus en voiture\r\n                    </span>\r\n                </div>\r\n\r\n                <Map\r\n                    center={[51.505, -0.09]}\r\n                    zoom={1}\r\n                    minZoom={1}\r\n                    scrollWheelZoom={true}\r\n                    dragging={false}\r\n                    maxBounds={[\r\n                        [-90, -180],\r\n                        [90, 180],\r\n                    ]}\r\n                    maxBoundsViscosity={1}\r\n                    ref={(ref) => {\r\n                        this.map = ref;\r\n                        this.props.getBottomRef(ref);\r\n                    }}\r\n                    whenCreated={(map) => this.setState({ map })}\r\n                >\r\n                    <TileLayer\r\n                        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a>'\r\n                        url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png\" //'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png' //'https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n                    />\r\n\r\n                    {this.displayMarker()}\r\n                </Map>\r\n                <Swiper\r\n                    spaceBetween={10}\r\n                    slidesPerView={1.2}\r\n                    centeredSlides={true}\r\n                    onSlideChange={(i) => this.onSlideChange(i.activeIndex)}\r\n                    onSwiper={(swiper) => this.setState({ swiper: swiper })}\r\n                >\r\n                    {this.displaySlides()}\r\n                </Swiper>\r\n            </div>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Traceability;\r\n\r\nfunction getDistance(origin, destination) {\r\n    // return distance in meters\r\n    var lon1 = toRadian(origin[1]),\r\n        lat1 = toRadian(origin[0]),\r\n        lon2 = toRadian(destination[1]),\r\n        lat2 = toRadian(destination[0]);\r\n\r\n    var deltaLat = lat2 - lat1;\r\n    var deltaLon = lon2 - lon1;\r\n\r\n    var a =\r\n        Math.pow(Math.sin(deltaLat / 2), 2) +\r\n        Math.cos(lat1) * Math.cos(lat2) * Math.pow(Math.sin(deltaLon / 2), 2);\r\n    var c = 2 * Math.asin(Math.sqrt(a));\r\n    var EARTH_RADIUS = 6371;\r\n    return c; //* EARTH_RADIUS * 1000;\r\n}\r\n\r\nfunction toRadian(degree) {\r\n    return (degree * Math.PI) / 180;\r\n}\r\n\r\nfunction getZoomRatio(origin, destination) {\r\n    var distance = getDistance(origin, destination);\r\n\r\n    return 9 - Math.sqrt(distance * 150);\r\n}\r\n\r\nfunction getCurveOptions(lat1, long1, lat2, long2) {\r\n    var latlng1 = [lat1, long1],\r\n        latlng2 = [lat2, long2];\r\n\r\n    var offsetX = latlng2[1] - latlng1[1],\r\n        offsetY = latlng2[0] - latlng1[0];\r\n\r\n    var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),\r\n        theta = Math.atan2(offsetY, offsetX);\r\n\r\n    var thetaOffset = 3.14 / 10;\r\n\r\n    var r2 = r / 2 / Math.cos(thetaOffset),\r\n        theta2 = theta + thetaOffset;\r\n\r\n    var midpointX = r2 * Math.cos(theta2) + latlng1[1],\r\n        midpointY = r2 * Math.sin(theta2) + latlng1[0];\r\n\r\n    var midpointLatLng = [midpointY, midpointX];\r\n\r\n    return [\"M\", latlng1, \"Q\", midpointLatLng, latlng2];\r\n}\r\n\r\nfunction getChildElementIndex(node) {\r\n    return Array.prototype.indexOf.call(node.parentNode.children, node);\r\n}\r\n","import React from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport \"swiper/swiper-bundle.css\";\r\n\r\nclass Alternatives extends React.Component {\r\n    state = {\r\n        swiper: undefined,\r\n    };\r\n\r\n    renderListAlternatives = (listItems) => {\r\n        var res = <React.Fragment></React.Fragment>;\r\n        res = listItems.map((item) => {\r\n            var pathProduct = \"/products/\" + item.id;\r\n            // Mock Front\r\n            if (item.id === \"8001505005707\") {\r\n                pathProduct += \"/24\";\r\n            }\r\n\r\n            if (item.id !== this.props.barcode) {\r\n                return (\r\n                    <SwiperSlide key={item.id}>\r\n                        <a href={pathProduct} className=\"product-alternative\">\r\n                            <div>\r\n                                <img\r\n                                    src={item.img_url}\r\n                                    className=\"product-alternative-image\"\r\n                                    alt=\"\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"product-alternative-text\">\r\n                                <label className=\"product-alternative-title\">{item.name}</label>\r\n                                <label className=\"product-alternative-brand\">{}</label>\r\n                                <RenderColor item={item} />\r\n                            </div>\r\n                            <div className=\"product-alternative-fleche\">{\">\"}</div>\r\n                        </a>\r\n                    </SwiperSlide>\r\n                );\r\n            } else {\r\n                return <React.Fragment></React.Fragment>;\r\n            }\r\n        });\r\n\r\n        return res;\r\n    };\r\n\r\n    alternativesloop = () => {\r\n        var alternativesList = <React.Fragment></React.Fragment>;\r\n\r\n        if (\r\n            this.props.alternatives &&\r\n            this.props.alternatives != \"loading\" &&\r\n            this.props.alternatives != \"\"\r\n        ) {\r\n            var alternatives_a = <React.Fragment></React.Fragment>;\r\n            var alternatives_b = <React.Fragment></React.Fragment>;\r\n            var alternatives_c = <React.Fragment></React.Fragment>;\r\n            var alternatives_d = <React.Fragment></React.Fragment>;\r\n\r\n            this.props.alternatives.a.sort(function (a, b) {\r\n                return b.eco_score - a.eco_score;\r\n            });\r\n\r\n            this.props.alternatives.b.sort(function (a, b) {\r\n                return b.eco_score - a.eco_score;\r\n            });\r\n            this.props.alternatives.c.sort(function (a, b) {\r\n                return b.eco_score - a.eco_score;\r\n            });\r\n            this.props.alternatives.d.sort(function (a, b) {\r\n                return b.eco_score - a.eco_score;\r\n            });\r\n\r\n            switch (this.props.ecoScore) {\r\n                case \"a\":\r\n                    break;\r\n                case \"b\":\r\n                    alternatives_a = this.renderListAlternatives(this.props.alternatives.a);\r\n                    break;\r\n                case \"c\":\r\n                    alternatives_a = this.renderListAlternatives(this.props.alternatives.a);\r\n                    alternatives_b = this.renderListAlternatives(this.props.alternatives.b);\r\n                    break;\r\n                case \"d\":\r\n                    alternatives_a = this.renderListAlternatives(this.props.alternatives.a);\r\n                    alternatives_b = this.renderListAlternatives(this.props.alternatives.b);\r\n                    alternatives_c = this.renderListAlternatives(this.props.alternatives.c);\r\n                    break;\r\n                case \"e\":\r\n                    alternatives_a = this.renderListAlternatives(this.props.alternatives.a);\r\n                    alternatives_b = this.renderListAlternatives(this.props.alternatives.b);\r\n                    alternatives_c = this.renderListAlternatives(this.props.alternatives.c);\r\n                    alternatives_d = this.renderListAlternatives(this.props.alternatives.d);\r\n                    break;\r\n                default:\r\n            }\r\n\r\n            alternativesList = (\r\n                <React.Fragment>\r\n                    {alternatives_a} {alternatives_b} {alternatives_c} {alternatives_d}\r\n                </React.Fragment>\r\n            );\r\n        }\r\n\r\n        return alternativesList;\r\n    };\r\n\r\n    render = () => {\r\n        var alternatives_title = \"\";\r\n\r\n        if (this.props.alternatives === \"\") {\r\n            alternatives_title = \"Pas d'alternatives disponible\";\r\n        } else {\r\n            if (this.props.alternatives === \"loading\") {\r\n                alternatives_title = \"Chargement des alternatives ...\";\r\n            } else {\r\n                alternatives_title = \"Alternatives\";\r\n            }\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n                <span className=\"title-part-environnement\">{alternatives_title}</span>\r\n                {this.props.alternatives &&\r\n                this.props.alternatives != \"loading\" &&\r\n                this.props.alternatives != \"\" ? (\r\n                    <Swiper\r\n                        spaceBetween={0}\r\n                        observer={true}\r\n                        observeParents={true}\r\n                        slidesPerView={1}\r\n                        // centeredSlides={true}\r\n                        onSwiper={(swiper) => this.setState({ swiper: swiper })}\r\n                    >\r\n                        {this.alternativesloop()}\r\n                    </Swiper>\r\n                ) : (\r\n                    <React.Fragment />\r\n                )}\r\n            </React.Fragment>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Alternatives;\r\n\r\nfunction RenderColor({ item }) {\r\n    var labelColor;\r\n    var labelLevel;\r\n    if (item.eco_score <= 33) {\r\n        labelColor = \"red\";\r\n        labelLevel = \"Mauvais\";\r\n    } else if (item.eco_score > 33 && item.eco_score < 67) {\r\n        labelColor = \"yellow\";\r\n        labelLevel = \"Moyen\";\r\n    } else {\r\n        labelColor = \"green\";\r\n        labelLevel = \"Bonne\";\r\n    }\r\n    return (\r\n        <div className=\"product-alternative-label-position\">\r\n            <div className=\"product-alternative-label\">\r\n                <div style={{ color: labelColor }}></div>\r\n                <div className=\"product-alternative-label-text\">{item.eco_score}/100</div>\r\n            </div>\r\n            <div className=\"product-alternative-label-level \">{labelLevel}</div>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Map, TileLayer, Marker, Polygon } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\nclass Origins extends React.Component {\r\n    state = {\r\n        polygon: [],\r\n        activeCountry: \"\",\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.getCountries();\r\n    };\r\n\r\n    setActiveCountry = (country) => {\r\n        console.log(country);\r\n        this.setState({ activeCountry: country });\r\n    };\r\n\r\n    getCountries = () => {\r\n        this.props.origins?.map((origin) => {\r\n            if (origin != \"en:ghana\") {\r\n                fetch(`https://api.lowympact.fr/api/v1/countries/${origin}`)\r\n                    .then((res) => res.json())\r\n                    .then((res) => {\r\n                        let polygon = this.state.polygon;\r\n                        console.log(res);\r\n                        if (res.success && res.data?.country) {\r\n                            polygon.push({\r\n                                geo: res.data.country.coordinates,\r\n                                name: res.data.country.name,\r\n                            });\r\n                            this.setState({\r\n                                polygon: polygon,\r\n                                activeCountry:\r\n                                    this.state.activeCountry + res.data.country.name + \", \",\r\n                            });\r\n                        }\r\n                    });\r\n            }\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        if (this.state.polygon.length == 0) return <React.Fragment />;\r\n        else {\r\n            return (\r\n                <div className=\"environnement-map-container\">\r\n                    <div className=\"product-co2-impact-header\">\r\n                        <div className=\"product-co2-impact-logo\">\r\n                            <div className=\"material-icons icon-label-co2-impact\">place</div>\r\n                        </div>\r\n                        <div className=\"product-co2-impact-title\">\r\n                            <div className=\"product-co2-impact-title-text\">\r\n                                Provenance des ingrdients\r\n                            </div>\r\n                            <div className=\"product-co2-impact-title-label\">\r\n                                Pays d'origine : {this.state.activeCountry}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Map\r\n                        center={[51.505, -0.09]}\r\n                        zoom={-1}\r\n                        minZoom={0}\r\n                        className=\"environnement-map\"\r\n                        scrollWheelZoom={true}\r\n                        dragging={false}\r\n                        maxBounds={[\r\n                            [-90, -180],\r\n                            [90, 180],\r\n                        ]}\r\n                        maxBoundsViscosity={1}\r\n                        whenCreated={(map) => this.setState({ map })}\r\n                    >\r\n                        <TileLayer\r\n                            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a>'\r\n                            url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png\" //'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png' //'https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n                        />\r\n                        {this.state.polygon.map((poly, i) => {\r\n                            if (poly)\r\n                                return (\r\n                                    <Polygon\r\n                                        onClick={() => this.setActiveCountry(poly.name)}\r\n                                        color={\"color:white\"}\r\n                                        fillColor={\r\n                                            this.activeCountry == poly.name ? \"blue\" : \"green\"\r\n                                        }\r\n                                        opacity={\"1\"}\r\n                                        positions={poly.geo}\r\n                                        key={i}\r\n                                    />\r\n                                );\r\n                        })}\r\n                    </Map>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default Origins;\r\n","import React from \"react\";\r\nimport Alternatives from \"./Alternatives\";\r\nimport { CircleProgress } from \"react-gradient-progress\";\r\nimport Origins from \"./Origins\";\r\nimport \"./Environnement.css\";\r\n\r\nclass Environnement extends React.Component {\r\n    state = {\r\n        swiper: undefined,\r\n        currentIndex: 0,\r\n        width: undefined,\r\n        showTransport: false,\r\n        materials: [],\r\n    };\r\n\r\n    getMaterialIcon = (mode) => {\r\n        switch (mode) {\r\n            case \"Transformation\":\r\n                return \"transform\";\r\n            case \"Arrow\":\r\n                if (this.state.showTransport) return \"arrow_drop_up\";\r\n                else return \"arrow_drop_down\";\r\n            case \"Consommation\":\r\n                return \"microwave\";\r\n            case \"Distribution\":\r\n                return \"store\";\r\n            case \"Recyclable\":\r\n                return \"check_circle_outline\";\r\n            case \"Non recyclable\":\r\n                return \"highlight_off\";\r\n            case \"Truck\":\r\n                return \"local_shipping\";\r\n            case \"Packaging\":\r\n                return \"inventory_2\";\r\n            case \"Agriculture\":\r\n                return \"agriculture\";\r\n            case \"Transport\":\r\n                return \"local_shipping\";\r\n            default:\r\n                return \"view_in_ar\";\r\n        }\r\n    };\r\n\r\n    getColor = (note) => {\r\n        if (note > 67) {\r\n            return \"green\";\r\n        }\r\n        if (note <= 33) {\r\n            return \"red\";\r\n        }\r\n        return \"yellow\";\r\n    };\r\n\r\n    getColorImpact = (note) => {\r\n        if (note > 70) {\r\n            return \"green\";\r\n        }\r\n        if (note <= 40) {\r\n            return \"red\";\r\n        }\r\n        return \"yellow\";\r\n    };\r\n\r\n    getLabel = (note) => {\r\n        if (note > 67) {\r\n            return \"Bon\";\r\n        }\r\n        if (note <= 33) {\r\n            return \"Mauvais\";\r\n        }\r\n        return \"Moyen\";\r\n    };\r\n\r\n    getLabelImpact = (note) => {\r\n        if (note > 60) {\r\n            return \"Impact fort\";\r\n        }\r\n        if (note <= 30) {\r\n            return \"Impact faible\";\r\n        }\r\n        return \"Impact moyen\";\r\n    };\r\n\r\n    getLabelImpactPackaging = (note) => {\r\n        if (note > 2) {\r\n            return \"Impact faible\";\r\n        }\r\n        if (note < -2) {\r\n            return \"Impact fort\";\r\n        }\r\n        return \"Impact moyen\";\r\n    };\r\n\r\n    getColorImpactPackaging = (note) => {\r\n        if (note > 2) {\r\n            return \"green\";\r\n        }\r\n        if (note < -2) {\r\n            return \"red\";\r\n        }\r\n        return \"yellow\";\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.updateWindowDimensions();\r\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions = () => {\r\n        this.setState({ width: window.innerWidth });\r\n    };\r\n\r\n    displayCO2Repartition = (pourcentage, nbKg, type) => {\r\n        return (\r\n            <div className=\"product-co2-impact-container\">\r\n                <div className=\"product-co2-impact-header\">\r\n                    <div className=\"product-co2-impact-logo\">\r\n                        <div className=\"material-icons icon-label-co2-impact\">\r\n                            {this.getMaterialIcon(type)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"product-co2-impact-title\">\r\n                        <div className=\"product-co2-impact-title-text\">CO2 {type}</div>\r\n                        <div className=\"product-co2-impact-title-label\">Rpartition</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"product-co2-impact-content\">\r\n                    <div className=\"product-transport-impact-content-details-text\">\r\n                        {parseFloat(nbKg).toFixed(3)}kg C02 eq/kg produit\r\n                    </div>\r\n                    <div className=\"product-co2-impact-content-progress\">\r\n                        <CircleProgress\r\n                            percentage={parseFloat(pourcentage * 100).toFixed(1)}\r\n                            strokeWidth={window.innerWidth * (1.0 / 60.0)}\r\n                            width={window.innerWidth * (1.0 / 5.0)}\r\n                            fontSize={window.innerWidth * (1.0 / 25.0)}\r\n                            primaryColor={[\"#FF3333\", \"#33FF63\"]}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    displayRepartitionAllItems = () => {\r\n        var html_agriculture = <React.Fragment></React.Fragment>;\r\n        var html_transport = <React.Fragment></React.Fragment>;\r\n        var html_consommation = <React.Fragment></React.Fragment>;\r\n        var html_distribution = <React.Fragment></React.Fragment>;\r\n        var html_packaging = <React.Fragment></React.Fragment>;\r\n        var html_processing = <React.Fragment></React.Fragment>;\r\n        var html_total = <React.Fragment></React.Fragment>;\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_agriculture) {\r\n            html_agriculture = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_agriculture /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_agriculture,\r\n                \"Agriculture\"\r\n            );\r\n        }\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_transportation) {\r\n            html_transport = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_transportation /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_transportation,\r\n                \"Transport\"\r\n            );\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_consumption) {\r\n            html_consommation = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_consumption /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_consumption,\r\n                \"Consommation\"\r\n            );\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_distribution) {\r\n            html_distribution = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_distribution /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_distribution,\r\n                \"Distribution\"\r\n            );\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_packaging) {\r\n            html_packaging = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_packaging /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_packaging,\r\n                \"Emballage\"\r\n            );\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_processing) {\r\n            html_processing = this.displayCO2Repartition(\r\n                this.props.dataEcoScore?.agribalyse?.co2_processing /\r\n                    this.props.dataEcoScore?.agribalyse?.co2_total,\r\n                this.props.dataEcoScore?.agribalyse?.co2_processing,\r\n                \"Transformation\"\r\n            );\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_total) {\r\n            html_total = (\r\n                <span className=\"product-CO2-total\">\r\n                    Impact carbone gnrique :&nbsp;\r\n                    <span className=\"carbon-total-number\">\r\n                        {parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total).toFixed(3)}\r\n                    </span>\r\n                    kg C02 eq/kg produit\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let res = (\r\n            <React.Fragment>\r\n                {html_total}\r\n                {html_agriculture}\r\n                {html_transport}\r\n                {html_consommation}\r\n                {html_distribution}\r\n                {html_packaging}\r\n                {html_processing}\r\n            </React.Fragment>\r\n        );\r\n\r\n        return res;\r\n    };\r\n\r\n    handleShowTransport = () => {\r\n        this.setState({ showTransport: !this.state.showTransport });\r\n    };\r\n\r\n    displayTransportImpact = () => {\r\n        let res = <React.Fragment></React.Fragment>;\r\n\r\n        var agribalyse_CO2 = undefined;\r\n        var transportation_score = undefined;\r\n        var transport_final_indicator = undefined;\r\n        var n = 0;\r\n\r\n        if (this.props.dataEcoScore?.agribalyse?.co2_transportation) {\r\n            agribalyse_CO2 = 0.5 * this.props.dataEcoScore?.agribalyse?.co2_transportation;\r\n            n += 1;\r\n        }\r\n\r\n        if (this.props.dataEcoScore?.adjustments?.origins_of_ingredients?.value_fr) {\r\n            transportation_score =\r\n                0.5 +\r\n                this.props.dataEcoScore?.adjustments?.origins_of_ingredients?.value_fr *\r\n                    (-1.0 / 40.0);\r\n            n += 1;\r\n        }\r\n        if (n > 0) {\r\n            if (!agribalyse_CO2) {\r\n                agribalyse_CO2 = 0;\r\n            }\r\n            if (!transportation_score) {\r\n                transportation_score = 0;\r\n            }\r\n            transport_final_indicator = (agribalyse_CO2 + transportation_score) / n;\r\n            if (transport_final_indicator > 1) {\r\n                transport_final_indicator = 1;\r\n            }\r\n            if (transport_final_indicator < 0) {\r\n                transport_final_indicator = 0;\r\n            }\r\n        }\r\n\r\n        let co2_impact_html = <React.Fragment></React.Fragment>;\r\n        let transportation_score_html = <React.Fragment></React.Fragment>;\r\n\r\n        if (agribalyse_CO2 > 0) {\r\n            co2_impact_html = (\r\n                <div className=\"product-transport-impact-content-details-text\">\r\n                    {parseFloat(this.props.dataEcoScore?.agribalyse?.co2_transportation).toFixed(3)}\r\n                    kg C02 eq/kg produit\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (transportation_score > 0) {\r\n            transportation_score_html = (\r\n                <div className=\"product-transport-impact-content-details-score\">\r\n                    Score environnemental du transport vers la France :\r\n                    <span\r\n                        style={{\r\n                            color: this.getColorImpact(100 - transportation_score * 100),\r\n                        }}\r\n                    >\r\n                        {Math.round(99 - transportation_score * 100)}\r\n                    </span>\r\n                    /100\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!this.props.displayTranportImpact && transport_final_indicator) {\r\n            transport_final_indicator = Math.round(transport_final_indicator * 100);\r\n            return (\r\n                <div\r\n                    className=\"product-transport-impact-container\"\r\n                    onClick={this.handleShowTransport}\r\n                >\r\n                    <div className=\"product-transport-impact-header\">\r\n                        <div className=\"product-transport-impact-logo\">\r\n                            <div className=\"material-icons icon-label-transport-impact\">\r\n                                {this.getMaterialIcon(\"Truck\")}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"product-transport-impact-title\">\r\n                            <div className=\"product-transport-impact-title-text\">\r\n                                Impact du transport\r\n                            </div>\r\n                            <div className=\"product-transport-impact-title-label\">\r\n                                {this.getLabelImpact(transport_final_indicator)}\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            className=\"product-transport-impact-color-label\"\r\n                            style={{\r\n                                color: this.getColorImpact(100 - transport_final_indicator),\r\n                            }}\r\n                        >\r\n                            \r\n                        </div>\r\n                    </div>\r\n                    <div className=\"arrow-container\">\r\n                        <div className=\"material-icons icon-label-arrow\">\r\n                            {this.getMaterialIcon(\"Arrow\")}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        className={\r\n                            this.state.showTransport ? \"animation-appear\" : \"animation-disappear\"\r\n                        }\r\n                    >\r\n                        <div className=\"product-transport-impact-content\">\r\n                            <div className=\"product-transport-impact-content-text\">\r\n                                Score total :\r\n                            </div>\r\n                            <div className=\"product-transport-impact-content-progress\">\r\n                                <CircleProgress\r\n                                    percentage={100 - transport_final_indicator}\r\n                                    strokeWidth={window.innerWidth * (1.0 / 50.0)}\r\n                                    width={window.innerWidth * (1.0 / 4.0)}\r\n                                    fontSize={0}\r\n                                    primaryColor={[\"#33FF63\", \"#FF3333\"]}\r\n                                />\r\n                                <span className=\"impact-percentage-progressBar\">\r\n                                    {100 - transport_final_indicator}/100\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"product-transport-impact-content-details\">\r\n                            {co2_impact_html}\r\n                            {transportation_score_html}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return res;\r\n    };\r\n\r\n    displayPackagingDetailImpact = () => {\r\n        let res = <React.Fragment></React.Fragment>;\r\n\r\n        if (this.props.dataEcoScore?.adjustments?.packaging?.packagings) {\r\n            var materials = [];\r\n            let slides = <React.Fragment></React.Fragment>;\r\n\r\n            this.props.dataEcoScore?.adjustments?.packaging?.packagings.map((data) => {\r\n                if (data?.material.split(\":\")[1] != \"unknown\") {\r\n                    materials.push(data?.material.split(\":\")[1]);\r\n                }\r\n            });\r\n\r\n            slides = materials\r\n                .filter(function (item, pos) {\r\n                    return materials.indexOf(item) == pos;\r\n                })\r\n                .map((data) => {\r\n                    var separator = \"\";\r\n                    if (materials.indexOf(data) < materials.length - 1) {\r\n                        separator = \" ; \";\r\n                    }\r\n                    return (\r\n                        <React.Fragment>\r\n                            <span>\r\n                                {data} {separator}\r\n                            </span>\r\n                        </React.Fragment>\r\n                    );\r\n                });\r\n\r\n            if (materials.length > 0) {\r\n                res = (\r\n                    <React.Fragment>\r\n                        <div className=\"product-co2-impact-content\">\r\n                            <div className=\"product-packaging-impact-content-details-text\">\r\n                                Matriaux utiliss : &nbsp;{slides}\r\n                            </div>\r\n                        </div>\r\n                    </React.Fragment>\r\n                );\r\n            } else {\r\n                res = (\r\n                    <React.Fragment>\r\n                        <div className=\"product-co2-impact-content\">\r\n                            <div className=\"product-packaging-impact-content-details-text\">\r\n                                Matriaux utiliss : &nbsp; Inconnu\r\n                            </div>\r\n                        </div>\r\n                    </React.Fragment>\r\n                );\r\n            }\r\n        }\r\n\r\n        return res;\r\n    };\r\n\r\n    displayPackagingImpact = () => {\r\n        let res = <React.Fragment></React.Fragment>;\r\n\r\n        if (this.props.dataEcoScore?.adjustments?.packaging?.value) {\r\n            return (\r\n                <div className=\"product-co2-impact-container\">\r\n                    <div className=\"product-co2-impact-header\">\r\n                        <div className=\"product-co2-impact-logo\">\r\n                            <div className=\"material-icons icon-label-co2-impact\">\r\n                                {this.getMaterialIcon(\"\")}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"product-co2-impact-title\">\r\n                            <div className=\"product-co2-impact-title-text\">\r\n                                Impact de l'emballage\r\n                            </div>\r\n                            <div className=\"product-co2-impact-title-label\">\r\n                                {this.getLabelImpactPackaging(\r\n                                    this.props.dataEcoScore?.adjustments?.packaging?.value\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            className=\"product-transport-impact-color-label\"\r\n                            style={{\r\n                                color: this.getColorImpactPackaging(\r\n                                    this.props.dataEcoScore?.adjustments?.packaging?.value\r\n                                ),\r\n                            }}\r\n                        >\r\n                            \r\n                        </div>\r\n                    </div>\r\n                    {this.displayPackagingDetailImpact()}\r\n                </div>\r\n            );\r\n        } else {\r\n            return res;\r\n        }\r\n    };\r\n\r\n    render = () => {\r\n        if (this.props.barcode) {\r\n            return (\r\n                <React.Fragment>\r\n                    {this.displayTransportImpact()}\r\n                    {this.props.origins ? (\r\n                        <Origins origins={this.props.origins} />\r\n                    ) : (\r\n                        <React.Fragment />\r\n                    )}\r\n                    {this.displayPackagingImpact()}\r\n                    {this.displayRepartitionAllItems()}\r\n\r\n                    <Alternatives\r\n                        barcode={this.props.barcode}\r\n                        alternatives={this.props.alternatives}\r\n                        ecoScore={this.props.ecoScore}\r\n                    />\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            return <React.Fragment></React.Fragment>;\r\n        }\r\n    };\r\n}\r\n\r\nexport default Environnement;\r\n","import React from \"react\";\r\nimport Navbar from \"../components/Navbar/Navbar\";\r\nimport Traceability from \"../components/Traceability/Traceability\";\r\nimport Environnement from \"../components/Environnement/Environnement\";\r\nimport Labels from \"../components/Labels/Labels\";\r\nimport \"./Product.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nclass Product extends React.Component {\r\n    state = {\r\n        barcode: this.props.match.params.barcode,\r\n        bcProductId: this.props.match.params.bcProductId,\r\n        product: undefined,\r\n        productImageUrl: undefined,\r\n        productName: undefined,\r\n        genericName: undefined,\r\n        ecoScore: undefined,\r\n        dataEcoScore: undefined,\r\n        value: 0,\r\n        connected: false,\r\n        productData: undefined,\r\n        userId: undefined,\r\n        cart: 0,\r\n        totalCO2Traceability: undefined,\r\n        alternatives: undefined,\r\n        countries: [],\r\n    };\r\n\r\n    isFlipping = false;\r\n\r\n    //for scrolling\r\n    getBottomRef = (component) => {\r\n        this.bottomComponent = component;\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n        let userId = localStorage.getItem(\"userId\");\r\n        if (userId) {\r\n            this.setState({ userId: userId });\r\n            this.loadHistory(userId);\r\n        }\r\n        this.loadFromOpenFoodFacts(this.props.match.params.barcode);\r\n        if (this.props.match.params.bcProductId) {\r\n            this.loadProductInformations(\r\n                this.props.match.params.barcode,\r\n                this.props.match.params.bcProductId\r\n            );\r\n        }\r\n    };\r\n\r\n    handleBarCodeUpdate = () => {\r\n        if (this.state.barcode !== this.props.match.params.barcode) {\r\n            this.setState({\r\n                barcode: this.props.match.params.barcode,\r\n                bcProductId: this.props.match.params.bcProductId,\r\n            });\r\n            this.loadFromOpenFoodFacts(this.props.match.params.barcode);\r\n            if (this.props.match.params.bcProductId) {\r\n                this.loadProductInformations(\r\n                    this.props.match.params.barcode,\r\n                    this.props.match.params.bcProductId\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === false) {\r\n            this.setState({ connected: true });\r\n        }\r\n    };\r\n\r\n    loadProductInformations = (barcode, bcProductId) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/products/${barcode}?bcProductId=${bcProductId}`,\r\n            // `http://localhost:8080/api/v1/products/${barcode}?bcProductId=${bcProductId}`,\r\n            {\r\n                method: \"get\",\r\n                credentials: \"include\",\r\n                headers: new Headers({\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    \"Content-Type\": \"application/json\",\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                this.setState({\r\n                    products: res?.data?.traceability,\r\n                    impact: res?.data?.impact,\r\n                    totalCO2Traceability: res?.data?.transportCO2Impact,\r\n                });\r\n            });\r\n    };\r\n\r\n    loadAlternatives = (code, score) => {\r\n        this.setState({ alternatives: \"loading\" });\r\n        fetch(`https://api.lowympact.fr/api/v1/alternatives/${code}`)\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                if (res.success && res.data?.alternativesInfos) {\r\n                    if (\r\n                        res.data?.alternativesInfos?.a?.length == 0 &&\r\n                        res.data?.alternativesInfos?.b?.length == 0 &&\r\n                        res.data?.alternativesInfos?.c?.length == 0 &&\r\n                        res.data?.alternativesInfos?.d?.length == 0\r\n                    ) {\r\n                        this.setState({ alternatives: \"\" });\r\n                    } else {\r\n                        this.setState({ alternatives: res.data.alternativesInfos });\r\n                    }\r\n                } else {\r\n                    this.setState({ alternatives: \"\" });\r\n                }\r\n            });\r\n    };\r\n\r\n    loadFromOpenFoodFacts = (barcode) => {\r\n        let dataEcoScore;\r\n\r\n        fetch(`https://world.openfoodfacts.org/api/v0/product/${barcode}.json/`)\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                let productImageUrl = res?.product?.image_url;\r\n                let productName = res?.product?.product_name;\r\n                let genericName = res?.product?.generic_name;\r\n                let ecoScore = res?.product?.ecoscore_grade;\r\n\r\n                dataEcoScore = res?.product?.ecoscore_data;\r\n\r\n                console.log(res);\r\n                let origins = res?.product?.origins_hierarchy;\r\n                if (origins && origins != \"\") {\r\n                    this.setState({ origins: origins });\r\n                }\r\n\r\n                if (res?.product) {\r\n                    this.setState({ productData: res.product });\r\n                }\r\n\r\n                if (productImageUrl) {\r\n                    this.setState({ productImageUrl: productImageUrl });\r\n                }\r\n                if (productName) {\r\n                    this.setState({ productName: productName });\r\n                }\r\n                if (genericName) {\r\n                    this.setState({ genericName: genericName });\r\n                }\r\n                if (\r\n                    ecoScore &&\r\n                    (ecoScore === \"a\" ||\r\n                        ecoScore === \"b\" ||\r\n                        ecoScore === \"c\" ||\r\n                        ecoScore === \"d\" ||\r\n                        ecoScore === \"e\")\r\n                ) {\r\n                    this.setState({ ecoScore: ecoScore });\r\n                }\r\n                if (dataEcoScore) {\r\n                    this.setState({ dataEcoScore: dataEcoScore });\r\n                }\r\n                if (res.status === 1) {\r\n                    this.saveHistory();\r\n                }\r\n\r\n                // Mock Soutenance\r\n                if (barcode === \"80135463\") {\r\n                    this.setState({ productName: \"Nutella 200g\" });\r\n                }\r\n\r\n                var scoreSearch = \"a\";\r\n\r\n                switch (res.product?.ecoscore_grade) {\r\n                    case \"b\":\r\n                        scoreSearch = \"a\";\r\n                        break;\r\n                    case \"c\":\r\n                        scoreSearch = \"b\";\r\n                        break;\r\n                    case \"d\":\r\n                        scoreSearch = \"c\";\r\n                        break;\r\n                    case \"e\":\r\n                        scoreSearch = \"c\";\r\n                        break;\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n                if (res.product?.ecoscore_grade != \"a\") {\r\n                    this.loadAlternatives(\r\n                        res.product.categories_properties[\"ciqual_food_code:en\"],\r\n                        scoreSearch\r\n                    );\r\n                } else {\r\n                    this.setState({ alternatives: \"\" });\r\n                }\r\n            });\r\n    };\r\n\r\n    loadHistory = (userId) => {\r\n        if (userId && this.state.barcode && this.state.bcProductId) {\r\n            fetch(\r\n                `https://api.lowympact.fr/api/v1/users/${userId}/cart/${this.state.barcode}?bcProductAddress=${this.state.bcProductId}`,\r\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/history`,\r\n                {\r\n                    method: \"get\",\r\n                    credentials: \"include\",\r\n                    headers: new Headers({\r\n                        Authorization: localStorage.getItem(\"token\"),\r\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                        \"Content-Type\": \"application/json\",\r\n                    }),\r\n                }\r\n            )\r\n                .then((response) => response.json())\r\n                .then((res) => {\r\n                    if (res.success) {\r\n                        this.setState({ cart: res.data?.quantity });\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    saveHistory = async () => {\r\n        await delay(2000);\r\n\r\n        if (!this.state.connected) {\r\n            let history = JSON.parse(localStorage.getItem(\"local_history\"));\r\n            let exist = null;\r\n            if (history) {\r\n                exist = history?.find(\r\n                    (element) =>\r\n                        element.barcode === this.state.barcode &&\r\n                        element.bcProductId == this.state.bcProductId\r\n                );\r\n            } else {\r\n                history = [];\r\n            }\r\n\r\n            if (!exist || exist?.length === 0) {\r\n                history.push({\r\n                    barcode: this.state.barcode,\r\n                    bcProductId: this.state.bcProductId,\r\n                    brand: this.state.productData.brands,\r\n                    image: this.state.productImageUrl,\r\n                    label: this.state.ecoScore,\r\n                    name: this.state.productName,\r\n                });\r\n                localStorage.setItem(\"local_history\", JSON.stringify(history));\r\n            }\r\n        } else if (this.state.userId) {\r\n            fetch(\r\n                `https://api.lowympact.fr/api/v1/users/${this.state.userId}/history`,\r\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/history`,\r\n                {\r\n                    method: \"put\",\r\n                    credentials: \"include\",\r\n                    headers: new Headers({\r\n                        Authorization: localStorage.getItem(\"token\"),\r\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                        \"Content-Type\": \"application/json\",\r\n                    }),\r\n                    body: JSON.stringify({\r\n                        barcode: this.state.barcode,\r\n                        bcProductAddress: this.state.bcProductId,\r\n                    }),\r\n                }\r\n            )\r\n                .then((response) => response.json())\r\n                .then((res) => {\r\n                    console.log(res);\r\n                });\r\n        }\r\n    };\r\n\r\n    addToCart = () => {\r\n        if (this.state.barcode && this.state.cart >= 0) {\r\n            let co2 = -1;\r\n            if (this.state.dataEcoScore?.agribalyse?.co2_total) {\r\n                co2 = parseFloat(this.state.dataEcoScore?.agribalyse?.co2_total);\r\n            }\r\n\r\n            let ecoscore = \"unkown\";\r\n            if (this.state.ecoScore) {\r\n                ecoscore = this.state.ecoScore;\r\n            }\r\n            this.flip();\r\n            fetch(\r\n                `https://api.lowympact.fr/api/v1/users/${this.state.userId}/cart`,\r\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/cart`,\r\n                {\r\n                    method: \"put\",\r\n                    credentials: \"include\",\r\n                    headers: new Headers({\r\n                        Authorization: localStorage.getItem(\"token\"),\r\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                        \"Content-Type\": \"application/json\",\r\n                    }),\r\n                    body: JSON.stringify({\r\n                        barcode: this.state.barcode,\r\n                        bcProductAddress: this.state.bcProductId,\r\n                        quantityDelta: 1,\r\n                        ecoscore: ecoscore,\r\n                        carbonImpact: co2,\r\n                    }),\r\n                }\r\n            )\r\n                .then((response) => response.json())\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    if (res.success) {\r\n                        this.setState({ cart: this.state.cart + 1 });\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    removeFromCart = () => {\r\n        if (this.state.barcode && this.state.cart > 0) {\r\n            this.flip();\r\n            let co2 = -1;\r\n            if (this.state.dataEcoScore?.agribalyse?.co2_total) {\r\n                co2 = parseFloat(this.state.dataEcoScore?.agribalyse?.co2_total);\r\n            }\r\n            let ecoscore = \"unkown\";\r\n            if (this.state.ecoScore) {\r\n                ecoscore = this.state.ecoScore;\r\n            }\r\n            fetch(\r\n                `https://api.lowympact.fr/api/v1/users/${this.state.userId}/cart`,\r\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/cart`,\r\n                {\r\n                    method: \"put\",\r\n                    credentials: \"include\",\r\n                    headers: new Headers({\r\n                        Authorization: localStorage.getItem(\"token\"),\r\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                        \"Content-Type\": \"application/json\",\r\n                    }),\r\n                    body: JSON.stringify({\r\n                        barcode: this.state.barcode,\r\n                        bcProductAddress: this.state.bcProductId,\r\n                        quantityDelta: -1,\r\n                        ecoscore: ecoscore,\r\n                        carbonImpact: co2,\r\n                    }),\r\n                }\r\n            )\r\n                .then((response) => response.json())\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    if (res.success) {\r\n                        this.setState({ cart: this.state.cart - 1 });\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    flip = async (event) => {\r\n        // if (!this.isFlipping) {\r\n        // \tthis.isFlipping = true;\r\n        // \tawait delay(500);\r\n        console.log(this.imageFlip.style.transform);\r\n        if (this.imageFlip && !this.state.isFlipping) {\r\n            if (this.imageFlip.style.transform === \"rotateY(360deg)\") {\r\n                this.imageFlip.style.transform = \"rotateY(0deg)\";\r\n            } else {\r\n                this.imageFlip.style.transform = \"rotateY(360deg)\";\r\n            }\r\n        }\r\n        // await delay(1000);\r\n        // this.isFlipping = false;\r\n        // }\r\n    };\r\n\r\n    displayImage = () => {\r\n        this.handleBarCodeUpdate();\r\n\r\n        let image = <React.Fragment />;\r\n        let productName = <React.Fragment />;\r\n        let genericName = <React.Fragment />;\r\n        let ecoScore = <React.Fragment />;\r\n        if (this.state.productImageUrl) {\r\n            image = (\r\n                <img src={this.state.productImageUrl} className=\"product-image\" alt=\"produit\" />\r\n            );\r\n        }\r\n\r\n        if (this.state.productName) {\r\n            productName = <div className=\"product-name\">{this.state.productName}</div>;\r\n        }\r\n        if (this.state.ecoScore) {\r\n            let scoreClass = \"color_score_\" + this.state.ecoScore;\r\n            ecoScore = (\r\n                <div className=\"product-ecoscore-image\">\r\n                    <span className={\"circle-score \" + scoreClass}> </span>\r\n                    EcoScore :<span className=\"uppercase \">{\" \" + this.state.ecoScore}</span>\r\n                </div>\r\n            );\r\n        } else if (this.state.genericName) {\r\n            genericName = <div className=\"product-generic-name\">{this.state.genericName}</div>;\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.userId ? (\r\n                    <div\r\n                        className={this.state.cart > 0 ? \"add-to-cart green\" : \"add-to-cart\"}\r\n                        onClick={this.addToCart}\r\n                    >\r\n                        <span className=\"cart-count\">\r\n                            {this.state.cart > 0 ? this.state.cart : \"\"}\r\n                        </span>\r\n                        <span class=\"material-icons\">add_shopping_cart</span>\r\n                    </div>\r\n                ) : (\r\n                    <React.Fragment />\r\n                )}\r\n                {this.state.cart > 0 ? (\r\n                    <div className=\"remove-from-cart\" onClick={this.removeFromCart}>\r\n                        <span class=\"material-icons\">remove_shopping_cart</span>\r\n                    </div>\r\n                ) : (\r\n                    <React.Fragment />\r\n                )}\r\n                {image}\r\n                {productName}\r\n                <div className=\"product-bottom-image-div\">\r\n                    {genericName}\r\n                    {ecoScore}\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    handleChange = (event, newValue) => {\r\n        this.setState({ value: newValue });\r\n        if (newValue === 1) {\r\n            let elem = document.getElementsByClassName(\"swiper-container\");\r\n            if (elem[0]) {\r\n                elem[0].scrollIntoView({ behavior: \"smooth\" });\r\n            }\r\n        }\r\n    };\r\n\r\n    displayNavbar = () => {\r\n        let retour = <React.Fragment />;\r\n        if (this.state.bcProductId) {\r\n            retour = (\r\n                <div className=\"product-navbar-container\">\r\n                    <button\r\n                        className={\r\n                            this.state.value === 0\r\n                                ? \"product-navbar-button selected\"\r\n                                : \"product-navbar-button\"\r\n                        }\r\n                        onClick={() => this.handleChange(\"\", 0)}\r\n                    >\r\n                        Environnement\r\n                    </button>\r\n                    <button\r\n                        className={\r\n                            this.state.value === 1\r\n                                ? \"product-navbar-button selected\"\r\n                                : \"product-navbar-button\"\r\n                        }\r\n                        onClick={() => this.handleChange(\"\", 1)}\r\n                    >\r\n                        Traabilit\r\n                    </button>\r\n                    <div\r\n                        className={\r\n                            this.state.value === 0\r\n                                ? \"navbar-under nav-left\"\r\n                                : \"navbar-under nav-right\"\r\n                        }\r\n                    ></div>\r\n                </div>\r\n            );\r\n        }\r\n        return retour;\r\n    };\r\n\r\n    render = () => {\r\n        //tri des produits\r\n        let products = this.state.products?.sort((a, b) => {\r\n            if (a.depth > b.depth) return -1;\r\n            else return 1;\r\n        });\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"product-page-container\">\r\n                    <div className=\"product-header-container\">\r\n                        <div className=\"product-history-link\">\r\n                            <Link to=\"/history\"> {\"<\"} Historique</Link>\r\n                        </div>\r\n                        <img\r\n                            className=\"product-bitmap-image\"\r\n                            src=\"/images/utils/bitmap.png\"\r\n                            alt=\"\"\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        className=\"product-image-container\"\r\n                        // onClick={this.flip}\r\n                        ref={(ref) => (this.imageFlip = ref)}\r\n                    >\r\n                        {this.displayImage()}\r\n                    </div>\r\n\r\n                    {this.displayNavbar()}\r\n\r\n                    {/* <AppBar position=\"static\">\r\n\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\taria-label=\"simple tabs example\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tab label=\"Traabilit\" />\r\n\t\t\t\t\t\t\t<Tab label=\"Environnement\" />\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<TabPanel value={this.state.value} index={0}></TabPanel>\r\n\t\t\t\t\t<TabPanel value={this.state.value} index={1}>\r\n\t\t\t\t</TabPanel> */}\r\n                    {this.state.value === 0 ? (\r\n                        <Environnement\r\n                            dataEcoScore={this.state.dataEcoScore}\r\n                            ecoScore={this.state.ecoScore}\r\n                            origins={this.state.origins}\r\n                            displayTranportImpact={\r\n                                this.props.match.params.bcProductId !== null &&\r\n                                this.props.match.params.bcProductId !== undefined\r\n                            }\r\n                            barcode={this.props.match.params.barcode}\r\n                            alternatives={this.state.alternatives}\r\n                        ></Environnement>\r\n                    ) : (\r\n                        <div className=\"product-bottom-container\">\r\n                            <Traceability\r\n                                products={products}\r\n                                getBottomRef={this.getBottomRef}\r\n                                totalCO2Traceability={this.state.totalCO2Traceability}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <Navbar\r\n                        barcode={this.props.match.params.barcode}\r\n                        bcProductId={this.props.match.params.bcProductId}\r\n                    />\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Product;\r\n\r\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\r\n","import React from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\n// Import Swiper styles\r\nimport \"swiper/swiper-bundle.css\";\r\nimport \"./Labels.css\";\r\n\r\nclass Labels extends React.Component {\r\n\tdisplaySpecies = () => {\r\n\t\tif (\r\n\t\t\tthis.props.dataEcoScore?.adjustments?.threatened_species?.length ===\r\n\t\t\t0\r\n\t\t) {\r\n\t\t\treturn <div></div>;\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\tthis.props.dataEcoScore?.adjustments?.threatened_species\r\n\t\t\t\t\t?.value < 0\r\n\t\t\t) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-bad\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">warning_amber</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.threatened_species?.ingredient\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-good\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">task_alt</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.threatened_species?.ingredient\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tdisplaySpecies = () => {\r\n\t\tif (\r\n\t\t\t!this.props.dataEcoScore?.adjustments?.threatened_species\r\n\t\t\t\t?.ingredient\r\n\t\t) {\r\n\t\t\treturn <div></div>;\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\tthis.props.dataEcoScore?.adjustments?.threatened_species\r\n\t\t\t\t\t?.value < 0\r\n\t\t\t) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-bad\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">warning_amber</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.threatened_species?.ingredient\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-good\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">task_alt</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.threatened_species?.ingredient\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tdisplayProduction = () => {\r\n\t\tif (!this.props.dataEcoScore?.adjustments?.production_system?.label) {\r\n\t\t\treturn <div></div>;\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\tthis.props.dataEcoScore?.adjustments?.production_system?.value <\r\n\t\t\t\t0\r\n\t\t\t) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-bad\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">warning_amber</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.production_system?.label\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"labels-container-good\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">task_alt</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.dataEcoScore?.adjustments\r\n\t\t\t\t\t\t\t\t\t?.production_system?.label\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (\r\n\t\t\tthis.props.dataEcoScore?.adjustments?.threatened_species?.length !=\r\n\t\t\t\t0 &&\r\n\t\t\tthis.props.dataEcoScore?.adjustments?.production_system?.label\r\n\t\t) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1>Labels</h1>\r\n\r\n\t\t\t\t\t<div className=\"labels-container\">\r\n\t\t\t\t\t\t{this.displaySpecies()}\r\n\t\t\t\t\t\t{this.displayProduction()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn <React.Fragment />;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Labels;\r\n","import React from \"react\";\r\nimport Navbar from \"../components/Navbar/Navbar\";\r\nimport Header from \"../components/Header/Header\";\r\nimport \"./Profil.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nclass Profil extends React.Component {\r\n    state = {\r\n        connected: false,\r\n    };\r\n\r\n    disconnect = () => {\r\n        localStorage.clear();\r\n        this.props.history.push(\"/login\");\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === false) {\r\n            this.setState({ connected: true }); // redirection vers la page login\r\n        }\r\n    };\r\n\r\n    displayConnectedProfil = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <h2 className=\"profil-title\">Bienvenue sur ton profil!</h2>\r\n                <Link to=\"/stats\" className=\"profil-button\">\r\n                    Statistiques\r\n                </Link>\r\n                <Link to=\"/configuration\" className=\"profil-button\">\r\n                    Configuration\r\n                </Link>\r\n                <div onClick={this.disconnect} className=\"profil-button\">\r\n                    Dconnecter\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    displayUnconnectedProfil = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <h2 className=\"profil-title\">Non connect</h2>\r\n                <p>Connecte toi pour que ton historique soit sauvegard !</p>\r\n                <Link to=\"/login\" className=\"profil-button\">\r\n                    Me Connecter\r\n                </Link>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Link to=\"/\">\r\n                    <Header />\r\n                </Link>\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"profil-screen\"\r\n                >\r\n                    <div className=\"profil-picture\">\r\n                        <div class=\"material-icons\">person</div>\r\n                    </div>\r\n                    {this.state.connected\r\n                        ? this.displayConnectedProfil()\r\n                        : this.displayUnconnectedProfil()}\r\n                </motion.div>\r\n                <Navbar />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Profil;\r\n","import React from \"react\";\r\n\r\nfunction ButtonSignup() {\r\n  return (\r\n  <div>\r\n    Crer mon compte\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default ButtonSignup;","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport ButtonSignup from \"../components/Button/ButtonSignup\";\r\nimport fruits from \"../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport Header from \"../components/Header/Header\";\r\nimport \"./Login.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const validEmail = new RegExp(\"^[a-zA-Z0-9._:$!%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]$\");\r\n\r\nclass Signup extends Component {\r\n    state = {\r\n        userName: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        errors: [],\r\n        redirect: false,\r\n        submit: false,\r\n    };\r\n\r\n    validate() {\r\n        var errors = [];\r\n        if (this.state.userName.length === 0) {\r\n            errors.push(\"Saissez votre nom\");\r\n        }\r\n        if (this.state.email.length === 0) {\r\n            errors.push(\"Saissez votre adresse e-mail\");\r\n        }\r\n        if (validEmail.test(this.state.email) === false) {\r\n            errors.push(\"Saissez une adresse e-mail valide\");\r\n        }\r\n        if (this.state.password.length < 6) {\r\n            errors.push(\"Entre un mot de passe. 6 carcteres minimum requis\");\r\n        }\r\n        if (this.state.password !== this.state.confirmPassword) {\r\n            errors.push(\"Les mots de passe ne correspondent pas\");\r\n        }\r\n        this.setState({ errors: errors });\r\n        return errors;\r\n    }\r\n\r\n    signUser = async () => {\r\n        let errors = await fetch(`https://api.lowympact.fr/api/v1/users/`, {\r\n            method: \"post\",\r\n            credentials: \"include\",\r\n            headers: new Headers({\r\n                \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                \"Content-Type\": \"application/json\",\r\n            }),\r\n            body: JSON.stringify({\r\n                username: this.state.userName,\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n            }),\r\n        })\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                let errors = [];\r\n\r\n                if (!res.success) {\r\n                    errors.push(\"Il y a dj un compte avec ce mail ou une erreur rseau.\");\r\n                } else {\r\n                    localStorage.setItem(\"token\", res.token);\r\n                    localStorage.setItem(\"userId\", res._id);\r\n                    this.props.history.push(\"/history\");\r\n                }\r\n                this.setState({ errors: errors });\r\n                return errors;\r\n            });\r\n        return errors;\r\n    };\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        let errors = this.validate();\r\n        //console.log(\"errors: \" + errors);\r\n        if (errors.length === 0) {\r\n            errors = await this.signUser();\r\n        }\r\n        if (errors.length === 0) {\r\n            this.setState({ redirect: true });\r\n        }\r\n    };\r\n\r\n    displayErrors = () => {\r\n        let errors = <React.Fragment></React.Fragment>;\r\n        errors = this.state.errors.map((error) => {\r\n            return <p>{error}</p>;\r\n        });\r\n        return errors;\r\n    };\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            return <Redirect to=\"/history\" />;\r\n        }\r\n        //console.log(\"render\");\r\n        return (\r\n            <React.Fragment>\r\n                <Link to=\"/login\">\r\n                    <Header />\r\n                </Link>\r\n                <div className=\"logo-fruits\">\r\n                    <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                </div>\r\n                <Link className=\"back-button\" to=\"/login\">\r\n                    {\"< Retour\"}\r\n                </Link>\r\n                <div className=\"signup-container\">\r\n                    <form className=\"forms\">\r\n                        <label>\r\n                            nom\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.userName}\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        userName: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"text\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            email\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.email}\r\n                                onChange={(evt) => this.setState({ email: evt.target.value })}\r\n                                type=\"email\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            mot de passe\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.password}\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        password: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"password\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            confirmer mot de passe\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.passwordConfirm}\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        confirmPassword: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"password\"\r\n                            />\r\n                        </label>\r\n                    </form>\r\n                    <label className=\"errors-signup\">{this.displayErrors()}</label>\r\n                    <div className=\"button-signup\" onClick={this.handleSubmit}>\r\n                        <ButtonSignup />\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nexport default Signup;\r\n","import React from \"react\";\r\n\r\nfunction ButtonSignin() {\r\n  return (\r\n  <div>\r\n    Me connecter\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default ButtonSignin;","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport ButtonSignin from \"../components/Button/ButtonSignin\";\r\nimport fruits from \"../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport Header from \"../components/Header/Header\";\r\nimport blob from \"../assets/images/bitmap.png\";\r\nimport \"./Login.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nfunction validate(email, password) {\r\n    const errors = [];\r\n\r\n    if (email.length === 0) {\r\n        errors.push(<p>Saissez votre adresse e-mail</p>);\r\n    }\r\n    if (password.length === 0) {\r\n        errors.push(<p>Saissez votre mot de passe</p>);\r\n    }\r\n    return errors;\r\n}\r\n\r\nclass Signin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            errors: [],\r\n            redirect: false,\r\n            loginSuccessful: null,\r\n        };\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const { email, password } = this.state;\r\n        const errors = validate(email, password);\r\n        //console.log(email, password, errors);\r\n        this.setState({ errors });\r\n        if (errors.length === 0) {\r\n            this.Connect();\r\n        }\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === false) {\r\n            this.setState({ redirect: true }); // redirection vers la page login\r\n        }\r\n    };\r\n\r\n    Connect = () => {\r\n        fetch(`https://api.lowympact.fr/api/v1/users/login`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n\r\n                //'x-access-token': localStorage.getItem('token'),\r\n            },\r\n            body: JSON.stringify({\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n            }),\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                //console.log(data);\r\n                if (data.error === \"No user found\") {\r\n                    this.setState({ loginSuccessful: false });\r\n                    let err = this.state.errors;\r\n                    err.push(<p>Utilisateur Inconnu</p>);\r\n                    this.setState({ errors: err });\r\n                } else if (data.error === \"Incorrect password\" || !data.success) {\r\n                    this.setState({ loginSuccessful: false });\r\n                    let err = this.state.errors;\r\n                    err.push(<p>Mot de passe Incorrect</p>);\r\n                    this.setState({ errors: err });\r\n                } else {\r\n                    // console.log(data);\r\n                    localStorage.setItem(\"token\", data.token);\r\n                    localStorage.setItem(\"userId\", data._id);\r\n                    this.setState({ loginSuccessful: true, redirect: true });\r\n                    //this.props.history.goBack();\t// a ajouter pour tre redirig vers la page initialement\r\n                    // demande. On doit cependant rediriger si la page demande\r\n                    // tait la page de login\r\n                }\r\n            });\r\n    };\r\n\r\n    onPasswordChange = () => {\r\n        this.setState({\r\n            password: this.passwordInput.value,\r\n            email: this.emailInput.value,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            return <Redirect to=\"/history\" />;\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n                <Link to=\"/login\">\r\n                    <Header />\r\n                </Link>\r\n                <div className=\"logo-fruits\">\r\n                    <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                </div>\r\n\r\n                <Link className=\"back-button\" to=\"/login\">\r\n                    {\"< Retour\"}\r\n                </Link>\r\n                <div className=\"signin-container\">\r\n                    <form className=\"forms\">\r\n                        <label>\r\n                            email\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.email}\r\n                                onChange={this.onPasswordChange}\r\n                                ref={(ref) => (this.emailInput = ref)}\r\n                                type=\"email\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            mot de passe\r\n                            <input\r\n                                className=\"input-forms\"\r\n                                value={this.state.password}\r\n                                onChange={this.onPasswordChange}\r\n                                ref={(ref) => (this.passwordInput = ref)}\r\n                                type=\"password\"\r\n                            />\r\n                        </label>\r\n                    </form>\r\n                    <label className=\"errors-signin\">{this.state.errors}</label>\r\n                    <div className=\"button-signin\" onClick={this.handleSubmit}>\r\n                        <ButtonSignin />\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nexport default Signin;\r\n","import React from \"react\";\r\n\r\nfunction ButtonChangePassword() {\r\n  return (\r\n  <div>\r\n    Changer mot de passe\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default ButtonChangePassword;","export const USERS =\r\n    {\r\n        id: 0,\r\n        email: \"bububu@bababa.com\",\r\n        password: \"123456\"\r\n    };","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport ButtonChangePassword from \"../components/Button/ButtonChangePassword\";\r\nimport fruits from \"../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport Header from \"../components/Header/Header\";\r\nimport Navbar from \"../components/Navbar/Navbar\";\r\nimport \"./ProfileConfiguration.css\";\r\nimport { USERS } from \"../assets/users/users\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction validate(newPassword, confirmPassword) {\r\n    const errors = [];\r\n    if (newPassword.length < 6) {\r\n        errors.push(<p>Entre un mot de passe. 6 caractres minimum requis</p>);\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n        errors.push(<p>Les mots de passe ne correspondent pas</p>);\r\n    }\r\n    return errors;\r\n}\r\n\r\nclass ProfileConfiguration extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: USERS,\r\n            currentPassword: \"\",\r\n            newPassword: \"\",\r\n            confirmPassword: \"\",\r\n            errors: [],\r\n            redirect: false,\r\n        };\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        e.preventDefault();\r\n        const { currentPassword, newPassword, confirmPassword } = this.state;\r\n        const errors = validate(newPassword, confirmPassword);\r\n        console.log(this.state.user.email, currentPassword, newPassword, confirmPassword, errors);\r\n        this.setState({ errors });\r\n        if (errors.length === 0) {\r\n            this.changeUserInfo(this.state.user._id, currentPassword, newPassword);\r\n        }\r\n    };\r\n\r\n    changeUserInfo = (userId, currentPassword, newPassword) => {\r\n        console.log(\"hey\");\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}`,\r\n            // `http://localhost:8080/api/v1/users/login`,\r\n            {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                },\r\n                body: JSON.stringify({\r\n                    currentPassword: currentPassword,\r\n                    newPassword: newPassword,\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                if (res.success === false) {\r\n                    this.setState({\r\n                        errors: [...this.state.errors, res.error],\r\n                    });\r\n                } else {\r\n                    this.setState({ redirect: true });\r\n                }\r\n            });\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === true) {\r\n            this.setState({ redirect: true }); // redirection vers la page login\r\n        }\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n        let userId = localStorage.getItem(\"userId\");\r\n        if (userId) {\r\n            this.loadUserInfo(userId);\r\n        }\r\n    };\r\n\r\n    loadUserInfo = (userId) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}`,\r\n            // `http://localhost:8080/api/v1/users/login`,\r\n            {\r\n                method: \"GET\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                },\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n\r\n                this.setState({ user: res.data });\r\n            });\r\n    };\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            return <Redirect to=\"/profil\" />;\r\n        }\r\n        console.log(this.state.redirect);\r\n        return (\r\n            <div className=\"screen\">\r\n                <Link to=\"/\">\r\n                    <Header />\r\n                </Link>\r\n                <Navbar />\r\n                <div className=\"logo-fruits\">\r\n                    <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                </div>\r\n                <Link className=\"back-button\" to=\"/profil\">\r\n                    {\"< Retour\"}\r\n                </Link>\r\n                <div className=\"configuration-screen-title\"></div>\r\n                <div className=\"errors-change-password\">{this.state.errors}</div>\r\n                <div className=\"configuration-container\">\r\n                    <div className=\"configuration-email-block\">\r\n                        <div>email</div>\r\n                        <div>{this.state.user.email}</div>\r\n                    </div>\r\n                    <form className=\"configuration-form\">\r\n                        <label>\r\n                            {/* Mot de passe actuel */}\r\n                            <input\r\n                                placeholder=\"mot de passe actuel\"\r\n                                className=\"input-forms\"\r\n                                value={this.state.currentPassword}\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        currentPassword: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"password\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            {/* Nouveau mot de passe */}\r\n                            <input\r\n                                value={this.state.newPassword}\r\n                                className=\"input-forms\"\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        newPassword: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"password\"\r\n                                placeholder=\"nouveau mot de passe\"\r\n                            />\r\n                        </label>\r\n                        <label>\r\n                            {/* Confirmation de mot de passe */}\r\n                            <input\r\n                                placeholder=\"confirmation de mdp\"\r\n                                className=\"input-forms\"\r\n                                value={this.state.confirmPassword}\r\n                                onChange={(evt) =>\r\n                                    this.setState({\r\n                                        confirmPassword: evt.target.value,\r\n                                    })\r\n                                }\r\n                                type=\"password\"\r\n                            />\r\n                        </label>\r\n                        <Link className=\"button-change-password\" onClick={this.handleChange} to=\"\">\r\n                            <ButtonChangePassword />\r\n                        </Link>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default ProfileConfiguration;\r\n","import React from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\n// Import Swiper styles\r\nimport \"swiper/swiper-bundle.css\";\r\n\r\n//Import Pie Chart\r\nimport { PieChart } from \"react-minimal-pie-chart\";\r\n\r\nimport fruits from \"../../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nclass DoughnutChartEcoScore extends React.Component {\r\n    state = {\r\n        swiper: undefined,\r\n        selectedSegment: undefined,\r\n    };\r\n\r\n    displayChart = () => {\r\n        let chart = <React.Fragment></React.Fragment>;\r\n        if (this.props.ecoScoreData && this.props.cartedProduct > 0) {\r\n            let data = [\r\n                {\r\n                    title: \"EcoScore A\",\r\n                    value: this.props.ecoScoreData.a,\r\n                    color: \"#1e8f4f\",\r\n                },\r\n                {\r\n                    title: \"EcoScore B\",\r\n                    value: this.props.ecoScoreData.b,\r\n                    color: \"#5fad0c\",\r\n                },\r\n                {\r\n                    title: \"EcoScore C\",\r\n                    value: this.props.ecoScoreData.c,\r\n                    color: \"#ecb10f\",\r\n                },\r\n                {\r\n                    title: \"EcoScore D\",\r\n                    value: this.props.ecoScoreData.d,\r\n                    color: \"#ff6f1e\",\r\n                },\r\n                {\r\n                    title: \"EcoScore E\",\r\n                    value: this.props.ecoScoreData.e,\r\n                    color: \"#df1e1f\",\r\n                },\r\n                {\r\n                    title: \"EcoScore Inconnu\",\r\n                    value: this.props.ecoScoreData.unknown,\r\n                    color: \"#000000\",\r\n                },\r\n            ];\r\n            chart = (\r\n                <PieChart\r\n                    data={data}\r\n                    lineWidth={30}\r\n                    paddingAngle={1}\r\n                    radius={PieChart.defaultProps.radius - 3}\r\n                    animate\r\n                    animationDuration={700}\r\n                    label={({ dataEntry }) => `${Math.round(dataEntry.percentage)}%`}\r\n                    labelStyle={(index) =>\r\n                        index === this.state.selectedSegment\r\n                            ? {\r\n                                  fontSize: \"6px\",\r\n                                  fontFamily: \"comfortaa\",\r\n                                  fill: data[index].color,\r\n                              }\r\n                            : {\r\n                                  fontSize: \"0px\",\r\n                                  fontFamily: \"comfortaa\",\r\n                                  fill: data[index].color,\r\n                              }\r\n                    }\r\n                    labelPosition={60}\r\n                    segmentsStyle={{\r\n                        transition: \"stroke .3s ease-out\",\r\n                        cursor: \"pointer\",\r\n                    }}\r\n                    segmentsShift={(index) => (index === this.state.selectedSegment ? 3 : 0)}\r\n                    onClick={(event, index) => {\r\n                        if (index === this.state.selectedSegment) {\r\n                            this.setState({ selectedSegment: undefined });\r\n                            this.state.swiper.slideTo(0, 500);\r\n                        } else {\r\n                            this.setState({ selectedSegment: index });\r\n                            this.state.swiper.slideTo(index + 1, 500);\r\n                        }\r\n                    }}\r\n                />\r\n            );\r\n        } else {\r\n            chart = (\r\n                <motion.div\r\n                    className=\"stats-no-product\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                >\r\n                    <div>\r\n                        <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                        <p className=\"logo-text\">Commence  scanner des produits !</p>\r\n                    </div>\r\n                </motion.div>\r\n            );\r\n        }\r\n        return chart;\r\n    };\r\n\r\n    onSlideChange = (index) => {\r\n        if (index === 0) {\r\n            this.setState({ selectedSegment: undefined });\r\n        } else {\r\n            this.setState({ selectedSegment: index - 1 });\r\n        }\r\n    };\r\n\r\n    displaySlides = () => {\r\n        let slides = <React.Fragment></React.Fragment>;\r\n        if (this.props.ecoScoreData && this.props.cartedProduct > 0) {\r\n            slides = (\r\n                <React.Fragment>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <img\r\n                                className=\"stats-ecoscore-full\"\r\n                                src=\"/images/utils/ecoScoreFull.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore A : {this.props.ecoScoreData.a}{\" \"}\r\n                                {this.props.ecoScoreData.a > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                            <img\r\n                                className=\"stats-ecoscore-image\"\r\n                                src=\"/images/utils/ecoScoreA.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore B : {this.props.ecoScoreData.b}{\" \"}\r\n                                {this.props.ecoScoreData.b > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                            <img\r\n                                className=\"stats-ecoscore-image\"\r\n                                src=\"/images/utils/ecoScoreB.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore C : {this.props.ecoScoreData.c}{\" \"}\r\n                                {this.props.ecoScoreData.c > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                            <img\r\n                                className=\"stats-ecoscore-image\"\r\n                                src=\"/images/utils/ecoScoreC.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore D : {this.props.ecoScoreData.d}{\" \"}\r\n                                {this.props.ecoScoreData.d > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                            <img\r\n                                className=\"stats-ecoscore-image\"\r\n                                src=\"/images/utils/ecoScoreD.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore E : {this.props.ecoScoreData.e}{\" \"}\r\n                                {this.props.ecoScoreData.e > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                            <img\r\n                                className=\"stats-ecoscore-image\"\r\n                                src=\"/images/utils/ecoScoreE.png\"\r\n                                alt=\"\"\r\n                            />\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} EcoScore Inconnu : {this.props.ecoScoreData.unknown}{\" \"}\r\n                                {this.props.ecoScoreData.unknown > 1 ? \" produits\" : \" produit\"}\r\n                            </span>\r\n                        </div>\r\n                    </SwiperSlide>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n        return slides;\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"stats-chart-pie\">{this.displayChart()}</div>\r\n                <div className=\"stats-chart-slider\">\r\n                    <Swiper\r\n                        spaceBetween={0}\r\n                        slidesPerView={1}\r\n                        centeredSlides={true}\r\n                        onSlideChange={(i) => this.onSlideChange(i.activeIndex)}\r\n                        onSwiper={(swiper) => this.setState({ swiper: swiper })}\r\n                    >\r\n                        {this.displaySlides()}\r\n                    </Swiper>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n}\r\n\r\nexport default DoughnutChartEcoScore;\r\n","import React from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\n// Import Swiper styles\r\nimport \"swiper/swiper-bundle.css\";\r\n\r\n//Import Bar Chart\r\nimport Chart from \"react-apexcharts\";\r\n\r\nimport fruits from \"../../assets/images/fruits-vegetables-basket-by-oblik-studio.svg\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst monthNames = [\r\n    \"Janvier\",\r\n    \"Fvrier\",\r\n    \"Mars\",\r\n    \"Avril\",\r\n    \"Mai\",\r\n    \"Juin\",\r\n    \"Juillet\",\r\n    \"Aot\",\r\n    \"Septembre\",\r\n    \"Octobre\",\r\n    \"Novembre\",\r\n    \"Dcembre\",\r\n];\r\n\r\nclass BarChartCarbonImpact extends React.Component {\r\n    state = {\r\n        selectedSegment: 0,\r\n        options: {\r\n            chart: {\r\n                toolbar: {\r\n                    show: false,\r\n                },\r\n                dropShadow: {\r\n                    enabled: true,\r\n                    top: 0,\r\n                    left: 0,\r\n                    blur: 2,\r\n                    opacity: 0.5,\r\n                },\r\n            },\r\n            plotOptions: {\r\n                bar: {\r\n                    borderRadius: 5,\r\n                    horizontal: true,\r\n                },\r\n            },\r\n            xaxis: {\r\n                categories: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\"],\r\n                labels: {\r\n                    style: {\r\n                        fontSize: \"12px\",\r\n                        fontFamily: \"Comfortaa\",\r\n                        fontColor: \"#1b3044\",\r\n                    },\r\n                },\r\n                title: {\r\n                    text: \"CO quivalent (kg)\",\r\n                    style: {\r\n                        fontSize: \"12px\",\r\n                        fontFamily: \"Comfortaa\",\r\n                        fontColor: \"#1b3044\",\r\n                    },\r\n                },\r\n            },\r\n            yaxis: {\r\n                labels: {\r\n                    style: {\r\n                        fontSize: \"12px\",\r\n                        fontFamily: \"Comfortaa\",\r\n                        fontColor: \"#1b3044\",\r\n                    },\r\n                },\r\n            },\r\n            dataLabels: {\r\n                enabled: true,\r\n                style: {\r\n                    fontSize: \"10px\",\r\n                    fontFamily: \"Comfortaa\",\r\n                },\r\n            },\r\n            noData: {\r\n                text: \"Chargement...\",\r\n            },\r\n            fill: {\r\n                colors: [\"#ff914d\"],\r\n            },\r\n            grid: {\r\n                xaxis: {\r\n                    lines: {\r\n                        show: true,\r\n                    },\r\n                },\r\n                yaxis: {\r\n                    lines: {\r\n                        show: false,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    };\r\n\r\n    displayChart = () => {\r\n        let chart = <React.Fragment></React.Fragment>;\r\n        if (this.props.carbonImpactData && this.props.cartedProduct > 0) {\r\n            let dataSize = this.props.carbonImpactData.data.length;\r\n            let xaxis = [];\r\n            let now;\r\n\r\n            switch (this.props.carbonImpactData.unit) {\r\n                case \"weekly\":\r\n                    let d = new Date();\r\n                    d.setHours(0, 0, 0, 0);\r\n                    d.setDate(d.getDate() + 4 - (d.getDay() || 7));\r\n                    let yearStart = new Date(d.getFullYear(), 0, 1);\r\n                    now = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);\r\n                    for (let i = dataSize - 1; i >= 0; i--) {\r\n                        xaxis.push(\"Semaine \" + (now - i));\r\n                    }\r\n                    break;\r\n                case \"monthly\":\r\n                    now = new Date().getMonth();\r\n                    let year = new Date().getFullYear();\r\n                    for (let i = dataSize - 1; i >= 0; i--) {\r\n                        let monthNum = now - i;\r\n                        if (monthNum < 0) {\r\n                            xaxis.push(monthNames[monthNum + 12] + \" \" + (year - 1));\r\n                        } else {\r\n                            xaxis.push(monthNames[monthNum] + \" \" + year);\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"yearly\":\r\n                    now = new Date().getFullYear();\r\n                    for (let i = dataSize - 1; i >= 0; i--) {\r\n                        xaxis.push((now - i).toString());\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            this.state.options.xaxis.categories = xaxis;\r\n\r\n            let series = [\r\n                {\r\n                    name: \"CO quivalent (kg)\",\r\n                    data: [],\r\n                },\r\n            ];\r\n\r\n            let sortedData = this.props.carbonImpactData.data;\r\n            console.log(sortedData);\r\n            sortedData.sort((a, b) => (a.offset > b.offset ? 1 : -1));\r\n            console.log(sortedData);\r\n\r\n            for (let i = 0; i < sortedData.length; i++) {\r\n                let finalValue =\r\n                    this.state.selectedSegment === 0\r\n                        ? sortedData[i].impact.toFixed(2)\r\n                        : (sortedData[i].impact / sortedData[i].nbProducts).toFixed(2);\r\n                series[0].data.push(finalValue);\r\n            }\r\n\r\n            chart = (\r\n                <React.Fragment>\r\n                    <div className=\"stats-chart-bar\">\r\n                        <Chart\r\n                            options={this.state.options}\r\n                            series={series}\r\n                            type=\"bar\"\r\n                            height={350}\r\n                        ></Chart>\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            chart = (\r\n                <motion.div\r\n                    className=\"stats-no-product\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                >\r\n                    <div>\r\n                        <img src={fruits} className=\"logo\" alt=\"Fruits\" />\r\n                        <p className=\"logo-text\">Commence  scanner des produits !</p>\r\n                    </div>\r\n                </motion.div>\r\n            );\r\n        }\r\n        return chart;\r\n    };\r\n\r\n    onSlideChange = (index) => {\r\n        this.setState({ selectedSegment: this.state.selectedSegment === 0 ? 1 : 0 });\r\n    };\r\n\r\n    displaySlides = () => {\r\n        let slides = <React.Fragment></React.Fragment>;\r\n        if (this.props.carbonImpactData && this.props.cartedProduct > 0) {\r\n            slides = (\r\n                <React.Fragment>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">{\">\"} Impact Carbone total</span>\r\n                        </div>\r\n                    </SwiperSlide>\r\n                    <SwiperSlide>\r\n                        <div className=\"stats-slider\">\r\n                            <span className=\"stats-slider-text\">\r\n                                {\">\"} Impact Carbone par produit\r\n                            </span>\r\n                        </div>\r\n                    </SwiperSlide>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n        return slides;\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <React.Fragment>\r\n                {this.displayChart()}\r\n                <div className=\"stats-chart-slider\">\r\n                    <Swiper\r\n                        spaceBetween={0}\r\n                        slidesPerView={1}\r\n                        centeredSlides={true}\r\n                        onSlideChange={(i) => this.onSlideChange(i.activeIndex)}\r\n                        onSwiper={(swiper) => this.setState({ swiper: swiper })}\r\n                    >\r\n                        {this.displaySlides()}\r\n                    </Swiper>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n}\r\n\r\nexport default BarChartCarbonImpact;\r\n","import React from \"react\";\r\nimport Navbar from \"../components/Navbar/Navbar\";\r\nimport DoughnutChartEcoScore from \"../components/Charts/DoughnutChartEcoScore\";\r\nimport BarChartCarbonImpact from \"../components/Charts/BarChartCarbonImpact\";\r\nimport \"./Product.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nclass Statistics extends React.Component {\r\n    state = {\r\n        ecoScoreData: undefined,\r\n        carbonImpactData: undefined,\r\n        username: undefined,\r\n        scannedProduct: undefined,\r\n        cartedProduct: undefined,\r\n        userId: undefined,\r\n        value: 0,\r\n    };\r\n\r\n    Verify = () => {\r\n        let isExpired = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            var decodedToken = jwt.decode(token, { complete: true });\r\n            var dateNow = new Date();\r\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\r\n                isExpired = false;\r\n            }\r\n        }\r\n        if (isExpired === false) {\r\n            this.setState({ connected: true });\r\n        }\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.Verify();\r\n        let userId = localStorage.getItem(\"userId\");\r\n        if (userId) {\r\n            this.setState({ userId: userId });\r\n        }\r\n        this.loadUserData(userId);\r\n        this.loadEcoScoreData(userId, \"fromBeginning\");\r\n        this.loadCarbonImpactData(userId, \"fromBeginning\");\r\n    };\r\n\r\n    loadUserData = (userId) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}`,\r\n            // `http://localhost:8080/api/v1/users/${userId}`,\r\n            {\r\n                method: \"get\",\r\n                credentials: \"include\",\r\n                headers: new Headers({\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    \"Content-Type\": \"application/json\",\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                this.setState({\r\n                    username: res?.data?.username,\r\n                    scannedProduct: res?.scannedProduct,\r\n                    cartedProduct: res?.cartedProduct,\r\n                });\r\n            });\r\n    };\r\n\r\n    loadEcoScoreData = (userId, typeAggregate) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}/statistics?typeStatistic=ecoscore&typeAggregate=${typeAggregate}`,\r\n            // `http://localhost:8080/api/v1/users/${userId}/statistics?typeStatistic=ecoscore&typeAggregate=${typeAggregate}`,\r\n            {\r\n                method: \"get\",\r\n                credentials: \"include\",\r\n                headers: new Headers({\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    \"Content-Type\": \"application/json\",\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                this.setState({\r\n                    ecoScoreData: res?.statistics?.ecoscore,\r\n                });\r\n            });\r\n    };\r\n\r\n    loadCarbonImpactData = (userId, typeAggregate) => {\r\n        fetch(\r\n            `https://api.lowympact.fr/api/v1/users/${userId}/statistics?typeStatistic=carbonImpact&typeAggregate=${typeAggregate}`,\r\n            // `http://localhost:8080/api/v1/users/${userId}/statistics?typeStatistic=carbonImpact&typeAggregate=${typeAggregate}`,\r\n            {\r\n                method: \"get\",\r\n                credentials: \"include\",\r\n                headers: new Headers({\r\n                    authorization: localStorage.getItem(\"token\"),\r\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\r\n                    \"Content-Type\": \"application/json\",\r\n                }),\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((res) => {\r\n                console.log(res);\r\n                this.setState({\r\n                    carbonImpactData: res?.statistics?.carbonImpact,\r\n                });\r\n            });\r\n    };\r\n\r\n    displayStats = () => {\r\n        let scannedProduct = <React.Fragment />;\r\n        let cartedProduct = <React.Fragment />;\r\n\r\n        if (this.state.scannedProduct !== undefined) {\r\n            scannedProduct = (\r\n                <div className=\"stats-header-text\">\r\n                    <span className={\"circle-stats color_score_stats\"}> </span>\r\n                    {this.state.scannedProduct > 1 ? \"Produits scanns :\" : \"Produit scann :\"}\r\n                    <span className=\"uppercase \"> {this.state.scannedProduct}</span>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (this.state.cartedProduct !== undefined) {\r\n            cartedProduct = (\r\n                <div className=\"stats-header-text\">\r\n                    <span className={\"circle-stats color_score_stats\"}> </span>\r\n                    {this.state.cartedProduct > 1 ? \"Produits achets :\" : \"Produit achet :\"}\r\n                    <span className=\"uppercase \"> {this.state.cartedProduct}</span>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {scannedProduct}\r\n                {cartedProduct}\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    handleChange = (event, newValue) => {\r\n        this.setState({ value: newValue });\r\n    };\r\n\r\n    displayNavbar = () => {\r\n        let retour = (\r\n            <div className=\"stats-navbar-container\">\r\n                <button\r\n                    className={\r\n                        this.state.value === 0\r\n                            ? \"stats-navbar-button selected\"\r\n                            : \"stats-navbar-button\"\r\n                    }\r\n                    onClick={() => this.handleChange(\"\", 0)}\r\n                >\r\n                    EcoScore\r\n                </button>\r\n                <button\r\n                    className={\r\n                        this.state.value === 1\r\n                            ? \"stats-navbar-button selected\"\r\n                            : \"stats-navbar-button\"\r\n                    }\r\n                    onClick={() => this.handleChange(\"\", 1)}\r\n                >\r\n                    Impact Carbone\r\n                </button>\r\n                <div\r\n                    className={\r\n                        this.state.value === 0 ? \"navbar-under nav-left\" : \"navbar-under nav-right\"\r\n                    }\r\n                ></div>\r\n            </div>\r\n        );\r\n        return retour;\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"stats-page-container\">\r\n                    <div className=\"stats-header-container\">\r\n                        <div className=\"stats-profil-link\">\r\n                            <Link to=\"/profil\"> {\"<\"} Profil</Link>\r\n                        </div>\r\n                        <img className=\"stats-bitmap-image\" src=\"/images/utils/bitmap.png\" alt=\"\" />\r\n                    </div>\r\n\r\n                    <div className=\"stats-welcome\">\r\n                        <span className=\"stats-welcome-text\">\r\n                            {this.state.username\r\n                                ? this.state.username + \", voici ton rcapitulatif Lowympact...\"\r\n                                : \"\"}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"stats-text-container\">{this.displayStats()}</div>\r\n\r\n                    {this.displayNavbar()}\r\n\r\n                    {this.state.value === 0 ? (\r\n                        <DoughnutChartEcoScore\r\n                            ecoScoreData={this.state.ecoScoreData}\r\n                            scannedProduct={this.state.scannedProduct}\r\n                            cartedProduct={this.state.cartedProduct}\r\n                        ></DoughnutChartEcoScore>\r\n                    ) : (\r\n                        <BarChartCarbonImpact\r\n                            carbonImpactData={this.state.carbonImpactData}\r\n                            scannedProduct={this.state.scannedProduct}\r\n                            cartedProduct={this.state.cartedProduct}\r\n                        ></BarChartCarbonImpact>\r\n                    )}\r\n\r\n                    <Navbar />\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Statistics;\r\n\r\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\r\n","import React, { Component } from \"react\";\r\nimport { BrowserRouter as Router, Route, Redirect, Switch } from \"react-router-dom\";\r\nimport { AnimatePresence } from \"framer-motion\";\r\n\r\nimport \"./App.css\";\r\nimport History from \"./pages/History\";\r\nimport Error404 from \"./pages/Error404\";\r\nimport Login from \"./pages/Login\";\r\nimport Product from \"./pages/Product\";\r\nimport Profil from \"./pages/Profil\";\r\nimport Signup from \"./pages/Signup\";\r\nimport Signin from \"./pages/Signin\";\r\nimport ProfileConfiguration from \"./pages/ProfileConfiguration\";\r\nimport Statistics from \"./pages/Statistics\";\r\nimport Scan_home from \"./components/Test/Scan_home\";\r\n\r\nclass App extends Component {\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <AnimatePresence exitBeforeEnter={true}>\r\n                    <Switch>\r\n                        {/* Front Pages */}\r\n                        <Route path=\"/history\" component={History} exact key={1} />\r\n                        <Route path=\"/profil\" component={Profil} exact key={2} />\r\n                        <Route path=\"/login\" component={Login} exact />\r\n                        <Route path=\"/\" component={Login} exact key={1} />\r\n                        <Route path=\"/products/:barcode/:bcProductId\" component={Product} exact />\r\n                        <Route path=\"/products/:barcode\" component={Product} exact />\r\n                        <Route path=\"/signup\" component={Signup} exact />\r\n                        <Route path=\"/signin\" component={Signin} exact />\r\n                        <Route path=\"/configuration\" component={ProfileConfiguration} exact />\r\n                        <Route path=\"/stats\" component={Statistics} exact />\r\n                        <Route path=\"/test\" component={Scan_home} exact />\r\n                        {/* Errors Pages */}\r\n                        <Route path=\"/error404\" component={Error404} />\r\n                        <Redirect to=\"/error404\" />\r\n                        {/* <Route path=\"/MAINTENANCE\" component={ Maintenance } /> */}\r\n                    </Switch>\r\n                </AnimatePresence>\r\n                {/* </Suspense> */}\r\n            </Router>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}