{"version":3,"sources":["pages/Profil.js","assets/images/logo.svg","assets/images/bitmap.png","components/Header/Header.js","components/Button/ButtonHistory.js","components/Button/ButtonProfil.js","components/Button/ButtonScan.js","components/Scan/Scanner.js","components/Scan/Scan.js","components/Navbar/Navbar.js"],"names":["Profil","state","connected","disconnect","localStorage","clear","props","history","push","componentDidMount","Verify","isExpired","token","getItem","decodedToken","jwt","decode","complete","dateNow","Date","payload","exp","getTime","setState","displayConnectedProfil","Fragment","className","to","onClick","displayUnconnectedProfil","this","React","Component","Header","src","blob","alt","logo","ButtonHistory","ButtonProfil","ButtonScan","Scanner","error","usedCamera","devices","processingImage","switchCamera","num","length","Quagga","stop","QuaggaInit","deviceId","a","queryString","window","location","search","urlParams","URLSearchParams","get","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","enumerateDevices","then","videoDevices","forEach","device","kind","maxResolution","i","video","exact","stream","getVideoTracks","track","capabilities","getCapabilities","height","max","label","match","usedCameraId","getTracks","err","console","log","width","init","inputStream","type","constraints","focusMode","min","aspectRatio","locator","patchSize","halfSample","locate","area","top","right","left","bottom","numOfWorkers","hardwareConcurrency","decoder","readers","debug","drawBoundingBox","showFrequency","drawScanline","showPattern","multiple","singleChannel","start","setQuagga","onDetected","_onDetected","result","onDrop","image","reader","FileReader","readAsDataURL","onloadend","decodeSingle","codeResult","code","offDetected","id","withIcon","withPreview","buttonText","onChange","imgExtension","maxFileSize","href","Scan","scanning","status","results","reading","barcode","undefined","bcProductId","quagga","_scan","res","fetch","response","json","showScanner","handleScan","data","arr","split","handleError","displayQrCode","delay","onError","onScan","style","showViewFinder","displayBarCode","map","switchReader","Navbar","updateWindowDimensions","innerHeight","handleScannerButton","bool","render","pathname","addEventListener","removeEventListener"],"mappings":"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","file":"static/js/7.aacf1271.chunk.js","sourcesContent":["import React from \"react\";\nimport Navbar from \"../components/Navbar/Navbar\";\nimport Header from \"../components/Header/Header\";\nimport \"./Profil.css\";\nimport { Link } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\n\nclass Profil extends React.Component {\n    state = {\n        connected: false,\n    };\n\n    disconnect = () => {\n        localStorage.clear();\n        this.props.history.push(\"/login\");\n    };\n\n    componentDidMount = () => {\n        this.Verify();\n    };\n\n    Verify = () => {\n        let isExpired = true;\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n            var decodedToken = jwt.decode(token, { complete: true });\n            var dateNow = new Date();\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\n                isExpired = false;\n            }\n        }\n        if (isExpired === false) {\n            this.setState({ connected: true }); // redirection vers la page login\n        }\n    };\n\n    displayConnectedProfil = () => {\n        return (\n            <React.Fragment>\n                <h2 className=\"profil-title\">Bienvenue sur ton profil!</h2>\n                <Link to=\"/stats\" className=\"profil-button\">\n                    Statistiques\n                </Link>\n                <Link to=\"/configuration\" className=\"profil-button\">\n                    Configuration\n                </Link>\n                <div onClick={this.disconnect} className=\"profil-button\">\n                    Déconnecter\n                </div>\n            </React.Fragment>\n        );\n    };\n\n    displayUnconnectedProfil = () => {\n        return (\n            <React.Fragment>\n                <h2 className=\"profil-title\">Non connecté</h2>\n                <p>Connecte toi pour que ton historique soit sauvegardé !</p>\n                <Link to=\"/login\" className=\"profil-button\">\n                    Me Connecter\n                </Link>\n            </React.Fragment>\n        );\n    };\n\n    render() {\n        return (\n            <div>\n                <Link to=\"/\">\n                    <Header />\n                </Link>\n                <div className=\"profil-screen\">\n                    <div className=\"profil-picture\">\n                        <div className=\"material-icons\">person</div>\n                    </div>\n                    {this.state.connected\n                        ? this.displayConnectedProfil()\n                        : this.displayUnconnectedProfil()}\n                </div>\n                <Navbar />\n            </div>\n        );\n    }\n}\n\nexport default Profil;\n","export default __webpack_public_path__ + \"static/media/logo.b235ef42.svg\";","export default __webpack_public_path__ + \"static/media/bitmap.6f490d5b.png\";","import \"./Header.css\";\nimport logo from \"../../assets/images/logo.svg\";\nimport blob from \"../../assets/images/bitmap.png\";\nimport React from \"react\";\n\nfunction Header(props) {\n    return (\n        <div>\n            <div>\n                <img src={blob} className=\"blob-top\" alt=\"Blob\" />\n            </div>\n            {props.history ? (\n                <React.Fragment />\n            ) : (\n                <React.Fragment>\n                    <div>\n                        <img src={blob} className=\"blob-left\" alt=\"Blob\" />\n                    </div>\n                    <div>\n                        <img src={blob} className=\"blob-right\" alt=\"Blob\" />\n                    </div>{\" \"}\n                </React.Fragment>\n            )}\n            <div className=\"header-container\">\n                <img src={logo} className=\"header-logo\" alt=\"Logo\" />\n                <span>Lowympact</span>\n            </div>\n        </div>\n    );\n}\n\nexport default Header;\n","import \"./ButtonNavBar.css\";\n\nfunction ButtonHistory() {\n    return (\n        <div>\n            <div className=\"button-logo\">\n                <span className=\"material-icons\">history</span>\n            </div>\n            <div>Historique</div>\n        </div>\n    );\n}\n\nexport default ButtonHistory;\n","function ButtonProfil() {\n    return (\n        <div>\n            <div>\n                <span className=\"material-icons\">person</span>\n            </div>\n            <div>Profil</div>\n        </div>\n    );\n}\n\nexport default ButtonProfil;\n","import { React } from \"react\";\n\nfunction ButtonScan() {\n    return (\n        <div>\n            <div className=\"navbar-scan-icon\">\n                <span className=\"material-icons\">qr_code_scanner</span>\n            </div>\n        </div>\n    );\n}\n\nexport default ButtonScan;\n","import React, { Component } from \"react\";\nimport Quagga from \"@ericblade/quagga2\";\nimport ImageUploader from \"react-images-upload\";\n\nclass Scanner extends Component {\n    state = {\n        error: false,\n        usedCamera: 0,\n        devices: [],\n        processingImage: false,\n    };\n\n    switchCamera = () => {\n        let num = this.state.usedCamera + 1;\n        if (num >= this.state.devices.length) {\n            num = 0;\n        }\n        this.setState({ usedCamera: num });\n        Quagga.stop();\n        this.QuaggaInit(this.state.devices[num].deviceId);\n    };\n\n    componentDidMount = async () => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const camera = urlParams.get(\"camera\");\n        if (camera == \"false\") {\n            this.setState({ error: true });\n        } else if (\n            navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.msGetUserMedia\n        ) {\n            let usedCameraId;\n            const devices = await navigator.mediaDevices\n                .enumerateDevices()\n                .then(function (devices) {\n                    return devices;\n                });\n            let videoDevices = [];\n            devices.forEach((device) => {\n                if (device.kind === \"videoinput\") {\n                    videoDevices.push(device);\n                    // if (device.label.match(/back/) != null) {\n                    //     ////console.log(\"Found video device: \" + JSON.stringify(device));\n                    // }\n                }\n            });\n            // ALL  cameras\n            //console.log(videoDevices);\n            this.setState({ devices: videoDevices });\n\n            // open every video device and dump its characteristics\n            let maxResolution = -1;\n            for (let i in videoDevices) {\n                const device = videoDevices[i];\n                // //console.log(\"Opening video device \" + device.deviceId + \" (\" + device.label + \")\");\n\n                await navigator.mediaDevices\n                    .getUserMedia({\n                        video: { deviceId: { exact: device.deviceId } },\n                    })\n                    .then(\n                        (stream) => {\n                            stream.getVideoTracks().forEach((track) => {\n                                const capabilities = track.getCapabilities();\n\n                                if (\n                                    capabilities.height.max >= maxResolution &&\n                                    device.label.match(/back/) != null\n                                ) {\n                                    maxResolution = capabilities.height.max;\n                                    usedCameraId = device.deviceId;\n                                    this.setState({ usedCamera: i });\n                                }\n\n                                ////console.log(\"Track capabilities: \" + JSON.stringify(capabilities));\n                            });\n\n                            stream.getTracks().forEach((track) => track.stop());\n                        },\n                        (err) => console.log(err)\n                    );\n            }\n            this.QuaggaInit(usedCameraId);\n        } else {\n            this.setState({ error: true });\n        }\n    };\n\n    QuaggaInit = (usedCameraId, width = 1920, height = 1080) => {\n        Quagga.init(\n            {\n                inputStream: {\n                    type: \"LiveStream\",\n                    constraints: {\n                        deviceId: usedCameraId,\n                        focusMode: \"continuous\",\n                        width: { min: width },\n                        height: { min: height },\n                        aspectRatio: {\n                            min: 1,\n                            max: 2,\n                        },\n                    },\n                },\n                locator: {\n                    patchSize: \"normal\",\n                    halfSample: false,\n                },\n                locate: false,\n                area: {\n                    top: \"30%\",\n                    right: \"25%\",\n                    left: \"25%\",\n                    bottom: \"30%\",\n                },\n                numOfWorkers: window.navigator.hardwareConcurrency || 2,\n                decoder: {\n                    readers: [\"ean_reader\"],\n                },\n                debug: {\n                    drawBoundingBox: true,\n                    showFrequency: true,\n                    drawScanline: true,\n                    showPattern: true,\n                },\n                multiple: false,\n                singleChannel: false,\n            },\n            (err) => {\n                if (err) {\n                    //console.log(err);\n                    if (width != 960 && height != 540) {\n                        this.QuaggaInit(usedCameraId, 960, 540);\n                        // console.log(\"here\");\n                    } else {\n                        this.setState({ error: true });\n                    }\n                    return false;\n                }\n                Quagga.start();\n            }\n        );\n        this.props.setQuagga(Quagga);\n        Quagga.onDetected(this._onDetected);\n    };\n\n    componentWillUnmount() {\n        Quagga.offDetected(this._onDetected);\n    }\n\n    _onDetected = async (result) => {\n        let stop = await this.props.onDetected(result);\n        console.log(stop);\n        if (stop) {\n            Quagga.stop();\n        }\n    };\n\n    onDrop = (image) => {\n        try {\n            this.setState({ processingImage: true });\n            console.log(image[image.length - 1]);\n            let reader = new FileReader();\n            reader.readAsDataURL(image[image.length - 1]);\n            reader.onloadend = () => {\n                Quagga.decodeSingle(\n                    {\n                        decoder: {\n                            readers: [\"ean_reader\"], // List of active readers\n                        },\n                        locate: true, // try to locate the barcode in the image\n                        src: reader.result, //image[image.length - 1], // or 'data:image/jpg;base64,' + data\n                    },\n                    (result) => {\n                        console.log(result);\n                        if (result) {\n                            this._onDetected(result);\n                            console.log(\"result\", result.codeResult?.code);\n                        } else {\n                            console.log(\"not detected\");\n                        }\n                    }\n                );\n            };\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                <div id=\"interactive\" className=\"viewport\" />\n\n                {this.state.devices?.length > 1 ? (\n                    <button className=\"code-switch-camera\" onClick={this.switchCamera}>\n                        <span className=\"material-icons\">cameraswitch</span>\n                        {this.state.usedCamera}\n                    </button>\n                ) : (\n                    <React.Fragment />\n                )}\n                {this.state.error ? (\n                    <div className=\"scan-error\">\n                        <ImageUploader\n                            withIcon={true}\n                            withPreview={false}\n                            buttonText=\"Importer une image\"\n                            onChange={this.onDrop}\n                            imgExtension={[\".jpg\", \".gif\", \".png\", \".jpeg\"]}\n                            maxFileSize={5242880}\n                        />\n                        <p>\n                            Il semblerait que votre caméra ne soit pas détectée. Vous pouvez\n                            importer une photo de votre bibliothèque, ou essayer un autre\n                            navigateur. Si le problème persiste, contactez-nous{\" \"}\n                            <a href=\"mailto:contact@lowympact.fr?Subject=Lowympact-camera not working\">\n                                via ce lien\n                            </a>\n                        </p>\n                    </div>\n                ) : (\n                    <React.Fragment />\n                )}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default Scanner;\n","import React, { Component } from \"react\";\nimport Scanner from \"./Scanner\";\nimport QrReader from \"react-qr-reader\";\nimport Switch from \"react-switch\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./Scan.css\";\n\nclass Scan extends Component {\n    state = {\n        scanning: true,\n        status: \"\",\n        results: [],\n        usedCameraId: \"3f6fc4177028f25c3e8215f4444838450630b8d656c627ef511346545d37f302\",\n        devices: [],\n        reading: false, //false : barcode - true: qrcode\n        barcode: undefined,\n        bcProductId: undefined,\n        Quagga: undefined,\n    };\n\n    setQuagga = (quagga) => {\n        if (this.state.Quagga) {\n            this.state.Quagga.stop();\n        }\n        this.setState({ Quagga: quagga });\n    };\n\n    _scan = () => {\n        this.setState({ scanning: !this.state.scanning, status: \"\" });\n    };\n\n    _onDetected = async (res) => {\n        if (res) {\n            if (res.codeResult && res.codeResult.code) {\n                this.setState({\n                    results: [res],\n                    scanning: true,\n                    status: \"waiting\",\n                });\n                let response = await fetch(\n                    `https://world.openfoodfacts.org/api/v0/product/${res.codeResult.code}.json/`\n                );\n                let result = await response.json();\n                if (result.status !== 0) {\n                    this.setState({\n                        scanning: false,\n                        status: \"found\",\n                        barcode: res.codeResult.code,\n                    });\n                    this.props.showScanner(false);\n                    if (this.state.Quagga) this.state.Quagga.stop();\n                    return true;\n                } else {\n                    this.setState({\n                        scanning: true,\n                        status: \"not found\",\n                    });\n                    return false;\n                }\n            }\n        }\n    };\n\n    handleScan = (data) => {\n        if (data) {\n            let arr = data.split(\"/\");\n            if (arr.length > 1) {\n                this.setState({\n                    scanning: false,\n                    barcode: arr[4],\n                    bcProductId: arr[5],\n                    status: \"found\",\n                });\n            }\n            if (this.state.Quagga) this.state.Quagga.stop();\n        }\n    };\n    handleError = (err) => {\n        console.error(err);\n    };\n\n    displayQrCode = () => {\n        if (this.state.status !== \"found\") {\n            return (\n                <QrReader\n                    delay={300}\n                    onError={this.handleError}\n                    onScan={this.handleScan}\n                    style={{ width: \"100%\" }}\n                    showViewFinder={false}\n                />\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n\n    displayBarCode = () => {\n        if (this.state.status !== \"found\") {\n            return (\n                <React.Fragment>\n                    <div className=\"header\">\n                        <ul className=\"results\">\n                            {this.state.results.map((result, i) => (\n                                <div key={result.codeResult.code + i}>\n                                    {this.state.status === \"waiting\"\n                                        ? \"Vérification du code : \" + result?.codeResult?.code\n                                        : \"\"}\n                                    {this.state.status === \"not found\"\n                                        ? \"Code non trouvé, merci de réessayer\"\n                                        : \"\"}\n                                </div>\n                            ))}\n                        </ul>\n                    </div>\n                    {this.state.scanning ? (\n                        <Scanner\n                            onDetected={this._onDetected}\n                            setQuagga={this.setQuagga}\n                            usedCameraId={this.usedCameraId}\n                        />\n                    ) : null}\n                </React.Fragment>\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n\n    switchReader = () => {\n        if (this.state.reading) this.setState({ reading: false });\n        else {\n            if (this.state.Quagga) this.state.Quagga.stop();\n            this.setState({ reading: true });\n        }\n    };\n\n    render() {\n        if (\n            this.state.barcode &&\n            this.state.bcProductId &&\n            (this.props.barcode !== this.state.barcode ||\n                this.props.bcProductId !== this.state.bcProductId)\n        ) {\n            return (\n                <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\n            );\n        }\n        if (this.state.barcode && this.props.barcode !== this.state.barcode) {\n            return <Redirect to={\"/products/\" + this.state.barcode} />;\n        } else {\n            return (\n                <div className=\"code-reader-container\">\n                    <span\n                        className=\"close\"\n                        onClick={() => {\n                            if (this.state.Quagga) this.state.Quagga.stop();\n\n                            this.props.showScanner(false);\n                        }}\n                    >\n                        &times;\n                    </span>\n                    {/* <div className=\"code-switch\" onClick={this.switchReader}>\n                        <div className=\"span-code-switch\">\n                            <span\n                                className={\n                                    this.state.reading ? \"material-icons\" : \"material-icons green\"\n                                }\n                            >\n                                view_week\n                            </span>\n                            <span>Barcode</span>\n                        </div>\n                        <Switch\n                            onChange={this.switchReader}\n                            uncheckedIcon={false}\n                            checkedIcon={false}\n                            checked={this.state.reading}\n                            onColor={\"#888\"}\n                            offColor={\"#888\"}\n                        />\n                        <div className=\"span-code-switch\">\n                            <span\n                                className={\n                                    !this.state.reading ? \"material-icons\" : \"material-icons green\"\n                                }\n                            >\n                                qr_code_scanner\n                            </span>\n                            <span>QR Code</span>\n                        </div>\n                    </div> */}\n                    {/* {this.state.reading ? this.displayQrCode() : this.displayBarCode()} */}\n                    {this.displayBarCode()}\n                </div>\n            );\n        }\n    }\n}\n\nexport default Scan;\n","import \"./Navbar.css\";\nimport React from \"react\";\nimport ButtonHistory from \"../Button/ButtonHistory\";\nimport ButtonProfil from \"../Button/ButtonProfil\";\nimport ButtonScan from \"../Button/ButtonScan\";\n// import Scan from \"../Scan/Scan\";\nimport Scan from \"../Scan/Scan\";\n// import { ScanSettings } from \"scandit-sdk\";\nimport { Link } from \"react-router-dom\";\n\nclass Navbar extends React.Component {\n    state = {\n        showScanner: false,\n        barcode: undefined,\n        bcProductId: undefined,\n        height: 0,\n    };\n\n    componentDidMount() {\n        this.updateWindowDimensions();\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    updateWindowDimensions = () => {\n        this.setState({ height: window.innerHeight });\n    };\n\n    handleScannerButton = (bool) => {\n        this.setState({ showScanner: bool });\n    };\n\n    // handleBarcode = (res) => {\n    //     if (res) {\n    //         //détecté par barcode scanner\n    //         let arr = res.split(\"/\");\n    //         if (arr.length > 1) {\n    //             this.setState({\n    //                 barcode: arr[4],\n    //                 bcProductId: arr[5],\n    //                 showScanner: false,\n    //             });\n    //         } else {\n    //             this.setState({\n    //                 barcode: arr[0],\n    //                 showScanner: false,\n    //                 bcProductId: undefined,\n    //             });\n    //         }\n    //     }\n    // };\n\n    render = () => {\n        if (this.state.height < 550) {\n            return <React.Fragment />;\n        }\n        // if (\n        //     this.state.barcode &&\n        //     this.state.bcProductId &&\n        //     (this.props.barcode !== this.state.barcode ||\n        //         this.props.bcProductId !== this.state.bcProductId)\n        // ) {\n        //     return (\n        //         <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\n        //     );\n        // }\n\n        // if (this.state.barcode && this.props.barcode !== this.state.barcode) {\n        //     return <Redirect to={\"/products/\" + this.state.barcode} />;\n        // }\n\n        if (!this.state.showScanner) {\n            return (\n                <React.Fragment>\n                    <div className=\"navbar-container\">\n                        <Link\n                            to=\"/history\"\n                            className={\n                                window.location.pathname === \"/history\"\n                                    ? \"navbar-link navbar-text-left navbar-selected\"\n                                    : \"navbar-link navbar-text-left \"\n                            }\n                        >\n                            <ButtonHistory />\n                        </Link>\n                        <div onClick={() => this.handleScannerButton(true)}>\n                            <div className=\"navbar-circle\">\n                                <ButtonScan />\n                            </div>\n                        </div>\n                        <span className=\"navbar-scan-text\">Scan</span>\n                        <Link\n                            to=\"/profil\"\n                            className={\n                                window.location.pathname === \"/profil\"\n                                    ? \"navbar-link navbar-text-right navbar-selected\"\n                                    : \"navbar-link navbar-text-right \"\n                            }\n                        >\n                            <ButtonProfil />\n                        </Link>\n                    </div>\n                </React.Fragment>\n            );\n        } else {\n            return (\n                // <Scan\n                //     onCrossClicked={this.handleScannerButton}\n                //     // playSoundOnScan={true}\n                //     vibrateOnScan={true}\n                //     enableTorchToggle={true}\n                //     enablePinchToZoom={true}\n                //     enableCameraSwitcher={true}\n                //     guiStyle={\"viewfinder\"}\n                //     scanSettings={\n                //         new ScanSettings({\n                //             enabledSymbologies: [\n                //                 \"qr\",\n                //                 \"ean8\",\n                //                 \"ean13\",\n                //                 \"upca\",\n                //                 \"upce\",\n                //                 \"code128\",\n                //                 \"code39\",\n                //                 \"code93\",\n                //                 \"itf\",\n                //             ],\n                //             codeDuplicateFilter: 1000,\n                //         })\n                //     }\n                //     onScan={(scanResult) => {\n                //         //console.log(scanResult.barcodes[0].data);\n                //         this.handleBarcode(scanResult.barcodes[0].data);\n                //     }}\n                //     onError={(error) => {\n                //         console.error(error.message);\n                //     }}\n                // />\n                <Scan showScanner={this.handleScannerButton} history={this.props.history} />\n            );\n        }\n    };\n}\n\nexport default Navbar;\n"],"sourceRoot":""}