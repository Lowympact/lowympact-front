{"version":3,"sources":["components/Traceability/leaflet-curve/leaflet.curve.js","components/Traceability/leaflet-curve/Curve.js","components/Traceability/Traceability.js","components/Environnement/Alternatives.js","components/Environnement/Origins.js","components/Environnement/EmpreinteCarbone.js","components/Environnement/Environnement.js","pages/Product.js","components/Button/ButtonHistory.js","components/Button/ButtonProfil.js","components/Button/ButtonScan.js","components/Scan/Scanner.js","components/Scan/Scan.js","components/Navbar/Navbar.js"],"names":["L","Curve","Path","extend","options","initialize","path","setOptions","this","_initialUpdate","_setPath","getPath","_coords","setPath","redraw","getBounds","_bounds","_computeBounds","lastPoint","lastCommand","coord","bound","LatLngBounds","i","length","String","lat","latLng","lng","controlPoint1","controlPoint2","endPoint","diffLat","diffLng","controlPoint","getCenter","_update","_map","_updatePath","_renderer","_updatecurve","_project","lastCoord","curCommand","curPoint","_points","push","latLngToLayerPoint","curve","SVG","include","layer","_curvePointsToPath","animate","_path","getTotalLength","dashArray","style","strokeDasharray","strokeDashoffset","points","point","str","x","y","props","positions","option","getOptions","fromProps","toProps","leafletElement","setStyleIfChanged","propTypes","children","PropTypes","oneOfType","arrayOf","node","object","array","isRequired","withLeaflet","Traceability","map","undefined","state","zoom","swiper","currentIndex","getMaterialIcon","mode","getTransportMode","getTranslation","displaySlides","slides","Fragment","products","product","pastille","TransportCO2Impact","value","className","transport","productsOutput","productName","seller","localisation","city","country","type","name","buyer","Math","round","dist","handleMarkerClick","latlng","index","elem","document","getElementsByClassName","scrollIntoView","behavior","slideTo","p","getZoomRatio","latitude","longitude","flyTo","duration","onSlideChange","setState","parseFloat","long","displayMarker","markers","icon","icon2","marker1","lat1","long1","marker2","lat2","long2","zIndex","Icon","iconUrl","iconRetinaUrl","iconSize","Point","Marker","zIndexOffset","position","onClick","curves","setAttribute","getCurveOptions","color","fill","delay","render","totalCO2Traceability","toFixed","Map","center","minZoom","scrollWheelZoom","dragging","maxBounds","maxBoundsViscosity","ref","getBottomRef","whenCreated","TileLayer","attribution","url","spaceBetween","slidesPerView","centeredSlides","activeIndex","onSwiper","React","Component","toRadian","degree","PI","origin","destination","distance","lon1","lon2","deltaLat","deltaLon","a","pow","sin","cos","asin","sqrt","getDistance","latlng1","latlng2","offsetX","offsetY","r","theta","atan2","r2","theta2","midpointX","Alternatives","componentDidMount","ecoScore","loadAlternatives","ciqual_code","componentDidUpdate","lastProps","code","alternatives","fetch","then","response","json","res","success","data","alternativesInfos","b","c","d","renderListAlternatives","listItems","item","pathProduct","id","barcode","href","src","img_url","alt","RenderColor","alternativesloop","tab","alternativesList","sort","eco_score","concat","alternatives_title","autoPlay","interval","centerMode","centerSlidePercentage","showThumbs","showIndicators","showStatus","labelColor","labelLevel","Origins","polygon","activeCountry","getCountries","setActiveCountry","origins","geo","coordinates","poly","Polygon","fillColor","opacity","EmpreinteCarbone","alea","setAlea","nb","dataEcoScore","agribalyse","co2_total","repartition","image","percent","co2_agriculture","co2_transportation","co2_packaging","co2_processing","co2_distribution","co2_consumption","equivalent","getEquivalent","circle","co2","Environnement","width","materials","getColor","note","getColorImpact","getLabel","getLabelImpact","getLabelImpactPackaging","getColorImpactPackaging","updateWindowDimensions","window","innerWidth","displayPackagingDetailImpact","adjustments","packaging","packagings","material","split","filter","pos","indexOf","separator","displayPackagingImpact","addEventListener","removeEventListener","Product","match","params","bcProductId","productImageUrl","genericName","connected","productData","userId","cart","countries","isFlipping","component","bottomComponent","Verify","localStorage","getItem","loadCartInfo","loadFromOpenFoodFacts","loadProductInformations","handleBarCodeUpdate","isExpired","token","decodedToken","jwt","decode","complete","dateNow","Date","payload","exp","getTime","method","credentials","headers","Headers","traceability","impact","transportCO2Impact","image_url","product_name","generic_name","ecoscore_grade","ecoscore_data","origins_hierarchy","status","saveHistory","Authorization","console","log","quantity","queryString","location","search","urlParams","URLSearchParams","get","history","JSON","parse","element","brand","brands","label","date","now","setItem","stringify","body","bcProductAddress","addToCart","ecoscore","flip","quantityDelta","carbonImpact","removeFromCart","event","imageFlip","transform","displayImage","scoreClass","handleChange","newValue","displayNavbar","retour","depth","to","displayTranportImpact","Navbar","ms","Promise","setTimeout","ButtonHistory","ButtonProfil","ButtonScan","Scanner","error","noBackCamera","usedCamera","devices","processingImage","text","mutlipleTracks","switchCamera","num","Quagga","stop","QuaggaInit","deviceId","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","enumerateDevices","kind","videoDevices","capabilities","device","video","exact","stream","getVideoTracks","track","getCapabilities","getTracks","forEach","err","all","capa","max","height","init","inputStream","constraints","locator","patchSize","halfSample","locate","area","top","right","left","bottom","numOfWorkers","hardwareConcurrency","decoder","readers","multiple","singleChannel","start","setQuagga","onDetected","_onDetected","result","onDrop","reader","FileReader","readAsDataURL","onloadend","decodeSingle","codeResult","setImport","offDetected","textImage","withIcon","withPreview","buttonText","onChange","imgExtension","maxFileSize","labelClass","Scan","scanning","results","usedCameraId","reading","quagga","_scan","showScanner","handleScan","arr","handleError","displayQrCode","onError","onScan","showViewFinder","displayBarCode","switchReader","innerHeight","handleScannerButton","bool","pathname"],"mappings":"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","file":"static/js/10.ecdc4d77.chunk.js","sourcesContent":["import L from \"leaflet\";\n\nL.Curve = L.Path.extend({\n\toptions: {},\n\n\tinitialize: function (path, options) {\n\t\t//1\n\t\tL.setOptions(this, options);\n\t\tthis._initialUpdate = true;\n\t\tthis._setPath(path);\n\t},\n\n\tgetPath: function () {\n\t\treturn this._coords;\n\t},\n\n\tsetPath: function (path, options) {\n\t\tthis._initialUpdate = true;\n\t\tthis._setPath(path);\n\t\treturn this.redraw();\n\t},\n\n\tgetBounds: function () {\n\t\treturn this._bounds;\n\t},\n\n\t_setPath: function (path) {\n\t\t//2\n\t\tthis._coords = path;\n\t\tthis._bounds = this._computeBounds();\n\t},\n\n\t_computeBounds: function () {\n\t\t//3\n\t\tvar bound = new L.LatLngBounds();\n\t\tvar lastPoint;\n\t\tvar lastCommand;\n\t\tvar coord;\n\t\tfor (var i = 0; i < this._coords.length; i++) {\n\t\t\tcoord = this._coords[i];\n\t\t\tif (typeof coord == \"string\" || coord instanceof String) {\n\t\t\t\tlastCommand = coord;\n\t\t\t} else if (lastCommand == \"H\") {\n\t\t\t\tbound.extend([lastPoint.lat, coord[0]]);\n\t\t\t\tlastPoint = new L.latLng(lastPoint.lat, coord[0]);\n\t\t\t} else if (lastCommand == \"V\") {\n\t\t\t\tbound.extend([coord[0], lastPoint.lng]);\n\t\t\t\tlastPoint = new L.latLng(coord[0], lastPoint.lng);\n\t\t\t} else if (lastCommand == \"C\") {\n\t\t\t\tvar controlPoint1 = new L.latLng(coord[0], coord[1]);\n\t\t\t\tcoord = this._coords[++i];\n\t\t\t\tvar controlPoint2 = new L.latLng(coord[0], coord[1]);\n\t\t\t\tcoord = this._coords[++i];\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\n\n\t\t\t\tbound.extend(controlPoint1);\n\t\t\t\tbound.extend(controlPoint2);\n\t\t\t\tbound.extend(endPoint);\n\n\t\t\t\tendPoint.controlPoint1 = controlPoint1;\n\t\t\t\tendPoint.controlPoint2 = controlPoint2;\n\t\t\t\tlastPoint = endPoint;\n\t\t\t} else if (lastCommand == \"S\") {\n\t\t\t\tvar controlPoint2 = new L.latLng(coord[0], coord[1]);\n\t\t\t\tcoord = this._coords[++i];\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\n\n\t\t\t\tvar controlPoint1 = lastPoint;\n\t\t\t\tif (lastPoint.controlPoint2) {\n\t\t\t\t\tvar diffLat = lastPoint.lat - lastPoint.controlPoint2.lat;\n\t\t\t\t\tvar diffLng = lastPoint.lng - lastPoint.controlPoint2.lng;\n\t\t\t\t\tcontrolPoint1 = new L.latLng(\n\t\t\t\t\t\tlastPoint.lat + diffLat,\n\t\t\t\t\t\tlastPoint.lng + diffLng\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tbound.extend(controlPoint1);\n\t\t\t\tbound.extend(controlPoint2);\n\t\t\t\tbound.extend(endPoint);\n\n\t\t\t\tendPoint.controlPoint1 = controlPoint1;\n\t\t\t\tendPoint.controlPoint2 = controlPoint2;\n\t\t\t\tlastPoint = endPoint;\n\t\t\t} else if (lastCommand == \"Q\") {\n\t\t\t\tvar controlPoint = new L.latLng(coord[0], coord[1]);\n\t\t\t\tcoord = this._coords[++i];\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\n\n\t\t\t\tbound.extend(controlPoint);\n\t\t\t\tbound.extend(endPoint);\n\n\t\t\t\tendPoint.controlPoint = controlPoint;\n\t\t\t\tlastPoint = endPoint;\n\t\t\t} else if (lastCommand == \"T\") {\n\t\t\t\tvar endPoint = new L.latLng(coord[0], coord[1]);\n\n\t\t\t\tvar controlPoint = lastPoint;\n\t\t\t\tif (lastPoint.controlPoint) {\n\t\t\t\t\tvar diffLat = lastPoint.lat - lastPoint.controlPoint.lat;\n\t\t\t\t\tvar diffLng = lastPoint.lng - lastPoint.controlPoint.lng;\n\t\t\t\t\tcontrolPoint = new L.latLng(\n\t\t\t\t\t\tlastPoint.lat + diffLat,\n\t\t\t\t\t\tlastPoint.lng + diffLng\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tbound.extend(controlPoint);\n\t\t\t\tbound.extend(endPoint);\n\n\t\t\t\tendPoint.controlPoint = controlPoint;\n\t\t\t\tlastPoint = endPoint;\n\t\t\t} else {\n\t\t\t\tbound.extend(coord);\n\t\t\t\tlastPoint = new L.latLng(coord[0], coord[1]);\n\t\t\t}\n\t\t}\n\t\treturn bound;\n\t},\n\n\t//TODO: use a centroid algorithm instead\n\tgetCenter: function () {\n\t\treturn this._bounds.getCenter();\n\t},\n\n\t_update: function () {\n\t\t//5\n\t\tif (!this._map) {\n\t\t\treturn;\n\t\t}\n\t\tthis._updatePath();\n\t},\n\n\t_updatePath: function () {\n\t\t//6\n\t\tthis._renderer._updatecurve(this);\n\t},\n\n\t_project: function () {\n\t\t//4\n\t\tvar coord, lastCoord, curCommand, curPoint;\n\n\t\tthis._points = [];\n\n\t\tfor (var i = 0; i < this._coords.length; i++) {\n\t\t\tcoord = this._coords[i];\n\t\t\tif (typeof coord == \"string\" || coord instanceof String) {\n\t\t\t\tthis._points.push(coord);\n\t\t\t\tcurCommand = coord;\n\t\t\t} else {\n\t\t\t\tswitch (coord.length) {\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint(coord);\n\t\t\t\t\t\tlastCoord = coord;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tif (curCommand == \"H\") {\n\t\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint([\n\t\t\t\t\t\t\t\tlastCoord[0],\n\t\t\t\t\t\t\t\tcoord[0],\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\tlastCoord = [lastCoord[0], coord[0]];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurPoint = this._map.latLngToLayerPoint([\n\t\t\t\t\t\t\t\tcoord[0],\n\t\t\t\t\t\t\t\tlastCoord[1],\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\tlastCoord = [coord[0], lastCoord[1]];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis._points.push(curPoint);\n\t\t\t}\n\t\t}\n\t},\n});\n\nL.curve = function (path, options) {\n\treturn new L.Curve(path, options);\n};\n\nL.SVG.include({\n\t//7\n\t_updatecurve: function (layer) {\n\t\tthis._setPath(layer, this._curvePointsToPath(layer._points));\n\t\tif (layer.options.animate) {\n\t\t\tvar path = layer._path;\n\t\t\tvar length = path.getTotalLength();\n\n\t\t\tif (!layer.options.dashArray) {\n\t\t\t\tpath.style.strokeDasharray = length + \" \" + length;\n\t\t\t}\n\n\t\t\tif (layer._initialUpdate) {\n\t\t\t\tpath.animate(\n\t\t\t\t\t[{ strokeDashoffset: length }, { strokeDashoffset: 0 }],\n\t\t\t\t\tlayer.options.animate\n\t\t\t\t);\n\t\t\t\tlayer._initialUpdate = false;\n\t\t\t}\n\t\t}\n\t},\n\n\t_curvePointsToPath: function (points) {\n\t\tvar point,\n\t\t\tcurCommand,\n\t\t\tstr = \"\";\n\t\tfor (var i = 0; i < points.length; i++) {\n\t\t\tpoint = points[i];\n\t\t\tif (typeof point == \"string\" || point instanceof String) {\n\t\t\t\tcurCommand = point;\n\t\t\t\tstr += curCommand;\n\t\t\t} else {\n\t\t\t\tswitch (curCommand) {\n\t\t\t\t\tcase \"H\":\n\t\t\t\t\t\tstr += point.x + \" \";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"V\":\n\t\t\t\t\t\tstr += point.y + \" \";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstr += point.x + \",\" + point.y + \" \";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn str || \"M0 0\";\n\t},\n});\n","// import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Path, withLeaflet } from \"react-leaflet\";\nimport { curve } from \"./leaflet.curve\";\nimport L from \"leaflet\";\n\nclass Curve extends Path {\n\tcreateLeafletElement(props) {\n\t\tconst { positions, option, ...options } = props;\n\t\treturn L.curve(positions, option, this.getOptions(options));\n\t}\n\n\tupdateLeafletElement(fromProps, toProps) {\n\t\tif (toProps.positions !== fromProps.positions) {\n\t\t\tthis.leafletElement.setPath(toProps.positions);\n\t\t}\n\t\tthis.setStyleIfChanged(fromProps, toProps);\n\t}\n}\n\nCurve.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t]),\n\toption: PropTypes.object,\n\tpositions: PropTypes.array.isRequired,\n};\n\nexport default withLeaflet(Curve);\n\n/*\n  componentWillMount() {\n    super.componentWillMount();\n    const { positions, ...options } = this.props\n    this.leafletElement = L.curve(positions, this.getOptions(options))\n  }*/\n","import React from \"react\";\nimport { Map, TileLayer, Marker } from \"react-leaflet\";\nimport \"./Traceability.css\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { Curve } from \"./leaflet-curve\";\nimport L from \"leaflet\";\n// Import Swiper styles\nimport \"swiper/swiper-bundle.css\";\n\nclass Traceability extends React.Component {\n    map = undefined;\n    state = {\n        zoom: 12,\n        swiper: undefined,\n        currentIndex: 0,\n        map: undefined,\n    };\n\n    getMaterialIcon = (mode) => {\n        switch (mode) {\n            case \"Charette\":\n                return \"directions_bike\";\n            case \"Plane\":\n                return \"flight_takeoff\";\n            case \"Train\":\n                return \"train\";\n            case \"Boat\":\n                return \"directions_boat_filled\";\n            case \"Truck\":\n                return \"local_shipping\";\n            default:\n                return \"nature_people\";\n        }\n    };\n\n    getTransportMode = (mode) => {\n        switch (mode) {\n            case \"Charette\":\n                return \"vlo\";\n            case \"Plane\":\n                return \"avion\";\n            case \"Train\":\n                return \"train\";\n            case \"Boat\":\n                return \"bateau\";\n            case \"Truck\":\n                return \"camion\";\n            default:\n                return mode;\n        }\n    };\n    getTranslation = (mode) => {\n        switch (mode) {\n            case \"maker\":\n                return \"Fabricant\";\n            case \"productor\":\n                return \"Producteur\";\n            case \"shop\":\n                return \"Revendeur\";\n            default:\n                return mode;\n        }\n    };\n\n    displaySlides = () => {\n        let slides = <React.Fragment />;\n        if (this.props.products) {\n            slides = this.props.products.map((product) => {\n                let pastille = \"product-slide-pastille past-green\";\n                if (product.TransportCO2Impact?.value > 10) {\n                    pastille = \"product-slide-pastille past-orange\";\n                }\n                if (product.TransportCO2Impact?.value > 100) {\n                    pastille = \"product-slide-pastille past-red\";\n                }\n\n                return (\n                    <SwiperSlide>\n                        <div className=\"product-slide-container\">\n                            <div className=\"product-slide-icon\">\n                                <span className=\"material-icons\">\n                                    {this.getMaterialIcon(product.transport)}\n                                </span>\n\n                                <div className=\"product-slide-name\">\n                                    <span className=\"product-slide-name-product\">\n                                        {product.productsOutput[0].productName}\n                                    </span>\n                                    <span className=\"product-slide-name-transport\">\n                                        Transport en {this.getTransportMode(product.transport)}\n                                    </span>\n                                </div>\n                            </div>\n                            <div className=\"product-slide-origin-wrapper\">\n                                <div className=\"product-transport-ui\">\n                                    <div className=\"transport-ui-circle\"></div>\n                                    <div className=\"transport-ui-tiret\"></div>\n                                    <div className=\"transport-ui-circle circle-bis\"></div>\n                                </div>\n                                <div className=\"product-slide-transport-container\">\n                                    <div className=\"product-slide-bigname\">\n                                        <span>\n                                            {product.seller.localisation.city},{\" \"}\n                                            {product.seller.localisation.country}\n                                        </span>\n                                    </div>\n                                    <div className=\"product-slide-lowername2\">\n                                        {this.getTranslation(product.seller?.type)}\n                                        {\": \"}\n                                        {product.seller?.name}\n                                    </div>\n\n                                    <div className=\"product-slide-bigname bigname-lower\">\n                                        <span>\n                                            {product.buyer.localisation.city},{\" \"}\n                                            {product.buyer.localisation.country}\n                                        </span>\n                                    </div>\n                                    <div className=\"product-slide-lowername2\">\n                                        {this.getTranslation(product.buyer?.type)}\n                                        {\": \"}\n                                        {product.buyer?.name}\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"product-slide-arrow\">{\">\"}</div>\n                            <div className=\"product-slide-consumption\">\n                                <div className={pastille}></div>\n                                <div>{Math.round(product.dist.value)} km </div>\n                                <div>\n                                    {product.TransportCO2Impact?.value > 1\n                                        ? Math.round(product.TransportCO2Impact?.value)\n                                        : \"< 1\"}{\" \"}\n                                    kg CO2{\" \"}\n                                </div>\n                            </div>\n                        </div>\n                    </SwiperSlide>\n                );\n            });\n        }\n        return slides;\n    };\n\n    handleMarkerClick = (latlng, index) => {\n        // window.scrollTo({ top: \"8000px\", behavior: \"smooth\" });\n        let elem = document.getElementsByClassName(\"swiper-container\");\n        if (elem[0]) {\n            elem[0].scrollIntoView({ behavior: \"smooth\" });\n        }\n\n        if (index >= this.props.products?.length) {\n            this.state.swiper.slideTo(index - 1, 500);\n        } else {\n            this.state.swiper.slideTo(index, 500);\n        }\n        let zoom = 5;\n        if (this.props.products && this.props.products[index]) {\n            let p = this.props.products[index];\n\n            zoom = getZoomRatio(\n                [p.buyer.localisation.latitude, p.buyer.localisation.longitude],\n                [p.seller.localisation.latitude, p.seller.localisation.longitude]\n            );\n        }\n\n        this.map.leafletElement.flyTo(latlng, zoom, { duration: 0.5 });\n    };\n\n    onSlideChange = (index) => {\n        this.setState({ currentIndex: index });\n        let zoom = 5;\n        if (this.props.products && this.props.products[index]) {\n            let p = this.props.products[index];\n\n            zoom = getZoomRatio(\n                [p.buyer.localisation.latitude, p.buyer.localisation.longitude],\n                [p.seller.localisation.latitude, p.seller.localisation.longitude]\n            );\n\n            let lat =\n                (parseFloat(p.seller.localisation.latitude) +\n                    parseFloat(p.buyer.localisation.latitude)) /\n                2;\n            let long =\n                (parseFloat(p.seller.localisation.longitude) +\n                    parseFloat(p.buyer.localisation.longitude)) /\n                2;\n\n            this.map.leafletElement.flyTo([lat, long], zoom, { duration: 0.5 });\n        }\n    };\n\n    displayMarker = () => {\n        let markers = <React.Fragment />;\n        if (this.props.products) {\n            markers = this.props.products.map((product, i) => {\n                let marker1 = <React.Fragment />;\n                let lat1 = parseFloat(product?.buyer?.localisation?.latitude);\n                let long1 = parseFloat(product?.buyer?.localisation?.longitude);\n                let marker2 = <React.Fragment />;\n                let lat2 = parseFloat(product?.seller?.localisation?.latitude);\n                let long2 = parseFloat(product?.seller?.localisation?.longitude);\n                let icon;\n                let icon2;\n                let zIndex = 0;\n                if (i === this.state.currentIndex) {\n                    icon = new L.Icon({\n                        iconUrl: \"/images/utils/map.png\", //require('../../images/logo/logo.svg'),\n                        iconRetinaUrl: \"/images/utils/map.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\n                        iconSize: new L.Point(32, 32),\n                        className: \"leaflet-mark-icon\",\n                    });\n                    icon2 = new L.Icon({\n                        iconUrl: \"/images/utils/map.png\", //require('../../images/logo/logo.svg'),\n                        iconRetinaUrl: \"/images/utils/map3.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\n                        iconSize: new L.Point(32, 32),\n                        className: \"leaflet-mark-icon\",\n                    });\n                    zIndex = 5;\n                } else {\n                    icon = new L.Icon({\n                        iconUrl: \"/images/utils/map2.png\", //require('../../images/logo/logo.svg'),\n                        iconRetinaUrl: \"/images/utils/map2.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\n                        iconSize: new L.Point(25, 25),\n                        className: \"leaflet-mark-icon\",\n                    });\n                    icon2 = new L.Icon({\n                        iconUrl: \"/images/utils/map2.png\", //require('../../images/logo/logo.svg'),\n                        iconRetinaUrl: \"/images/utils/map2.png\", //\"/images/images_volume/1-l.png\", //require('../../images/logo/logo.svg'),\n                        iconSize: new L.Point(25, 25),\n                        className: \"leaflet-mark-icon\",\n                    });\n                }\n\n                if (lat1 && long1) {\n                    marker1 = (\n                        <Marker\n                            zIndexOffset={zIndex}\n                            icon={icon}\n                            position={[lat1, long1]}\n                            onClick={() =>\n                                this.handleMarkerClick(\n                                    [\n                                        parseFloat(product.buyer.localisation.latitude),\n                                        parseFloat(product.buyer.localisation.longitude),\n                                    ],\n                                    i + 1\n                                )\n                            }\n                        >\n                            {/* <Popup>{product.buyer.name}</Popup> */}\n                        </Marker>\n                    );\n                }\n                if (lat2 && long2) {\n                    marker2 = (\n                        <Marker\n                            zIndexOffset={zIndex}\n                            icon={icon2}\n                            position={[lat2, long2]}\n                            onClick={() =>\n                                this.handleMarkerClick(\n                                    [\n                                        parseFloat(product.seller.localisation.latitude),\n                                        parseFloat(product.seller.localisation.longitude),\n                                    ],\n                                    i\n                                )\n                            }\n                        >\n                            {/* <Popup>{product.seller.name}</Popup> */}\n                        </Marker>\n                    );\n                }\n\n                let color = \"#1b3044\";\n                let curves = document.getElementsByClassName(\"leaflet-interactive\");\n\n                if (curves && curves[i] && i === this.state.currentIndex) {\n                    curves[i].setAttribute(\"stroke\", \"#78be95\");\n                } else if (curves && curves[i]) {\n                    curves[i].setAttribute(\"stroke\", \"#1b3044\");\n                }\n\n                return (\n                    <React.Fragment>\n                        <div className=\"test\">\n                            <Curve\n                                positions={getCurveOptions(lat2, long2, lat1, long1)}\n                                option={{\n                                    color: color,\n                                    fill: false,\n                                    // animate: animate,\n                                    delay: 5000,\n                                }}\n                            />\n                        </div>\n                        {marker1}\n                        {marker2}\n                    </React.Fragment>\n                );\n            });\n        }\n        return markers;\n    };\n\n    render = () => {\n        return (\n            <div className=\"tracability-container\">\n                <div className=\"product-CO2-total-tracability-container\">\n                    <span className=\"product-CO2-total-tracability\">\n                        Impact total carbone :&nbsp;\n                        <span className=\"carbon-total-number\">\n                            {parseFloat(this.props.totalCO2Traceability).toFixed(1)}\n                        </span>\n                        kg CO2 soit &nbsp;\n                        <span className=\"carbon-total-number\">\n                            {parseFloat(\n                                ((this.props.totalCO2Traceability * 0.05) / 11.0) * 1000.0\n                            ).toFixed(1)}\n                        </span>\n                        kms parcourus en voiture\n                    </span>\n                </div>\n\n                <Map\n                    center={[51.505, -0.09]}\n                    zoom={1}\n                    minZoom={1}\n                    scrollWheelZoom={true}\n                    dragging={false}\n                    maxBounds={[\n                        [-90, -180],\n                        [90, 180],\n                    ]}\n                    maxBoundsViscosity={1}\n                    ref={(ref) => {\n                        this.map = ref;\n                        this.props.getBottomRef(ref);\n                    }}\n                    whenCreated={(map) => this.setState({ map })}\n                >\n                    <TileLayer\n                        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a>'\n                        url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png\" //'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png' //'https://{s}.tile.osm.org/{z}/{x}/{y}.png'\n                    />\n\n                    {this.displayMarker()}\n                </Map>\n                <Swiper\n                    spaceBetween={10}\n                    slidesPerView={1.2}\n                    centeredSlides={true}\n                    onSlideChange={(i) => this.onSlideChange(i.activeIndex)}\n                    onSwiper={(swiper) => this.setState({ swiper: swiper })}\n                >\n                    {this.displaySlides()}\n                </Swiper>\n            </div>\n        );\n    };\n}\n\nexport default Traceability;\n\nfunction getDistance(origin, destination) {\n    // return distance in meters\n    var lon1 = toRadian(origin[1]),\n        lat1 = toRadian(origin[0]),\n        lon2 = toRadian(destination[1]),\n        lat2 = toRadian(destination[0]);\n\n    var deltaLat = lat2 - lat1;\n    var deltaLon = lon2 - lon1;\n\n    var a =\n        Math.pow(Math.sin(deltaLat / 2), 2) +\n        Math.cos(lat1) * Math.cos(lat2) * Math.pow(Math.sin(deltaLon / 2), 2);\n    var c = 2 * Math.asin(Math.sqrt(a));\n    // var EARTH_RADIUS = 6371;\n    return c; //* EARTH_RADIUS * 1000;\n}\n\nfunction toRadian(degree) {\n    return (degree * Math.PI) / 180;\n}\n\nfunction getZoomRatio(origin, destination) {\n    var distance = getDistance(origin, destination);\n\n    return 9 - Math.sqrt(distance * 150);\n}\n\nfunction getCurveOptions(lat1, long1, lat2, long2) {\n    var latlng1 = [lat1, long1],\n        latlng2 = [lat2, long2];\n\n    var offsetX = latlng2[1] - latlng1[1],\n        offsetY = latlng2[0] - latlng1[0];\n\n    var r = Math.sqrt(Math.pow(offsetX, 2) + Math.pow(offsetY, 2)),\n        theta = Math.atan2(offsetY, offsetX);\n\n    var thetaOffset = 3.14 / 10;\n\n    var r2 = r / 2 / Math.cos(thetaOffset),\n        theta2 = theta + thetaOffset;\n\n    var midpointX = r2 * Math.cos(theta2) + latlng1[1],\n        midpointY = r2 * Math.sin(theta2) + latlng1[0];\n\n    var midpointLatLng = [midpointY, midpointX];\n\n    return [\"M\", latlng1, \"Q\", midpointLatLng, latlng2];\n}\n\n// function getChildElementIndex(node) {\n//     return Array.prototype.indexOf.call(node.parentNode.children, node);\n// }\n","import React from \"react\";\n// import { Swiper, SwiperSlide } from \"swiper/react\";\n// import \"swiper/swiper-bundle.css\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport { Carousel } from \"react-responsive-carousel\";\n\nclass Alternatives extends React.Component {\n    state = {\n        swiper: undefined,\n    };\n\n    componentDidMount = () => {\n        if (this.props.ecoScore) {\n            this.loadAlternatives(this.props.ciqual_code);\n        }\n    };\n\n    componentDidUpdate = (lastProps) => {\n        if (lastProps.ciqual_code !== this.props.ciqual_code) {\n            if (this.props.ciqual_code) {\n                this.loadAlternatives(this.props.ciqual_code);\n            }\n        }\n    };\n\n    loadAlternatives = (code) => {\n        this.setState({ alternatives: \"loading\" });\n        fetch(`https://api.lowympact.fr/api/v1/alternatives/${code}`)\n            .then((response) => response.json())\n            .then((res) => {\n                if (res.success && res.data?.alternativesInfos) {\n                    if (\n                        res.data?.alternativesInfos?.a?.length == 0 &&\n                        res.data?.alternativesInfos?.b?.length == 0 &&\n                        res.data?.alternativesInfos?.c?.length == 0 &&\n                        res.data?.alternativesInfos?.d?.length == 0\n                    ) {\n                        this.setState({ alternatives: undefined });\n                    } else {\n                        this.setState({ alternatives: res.data.alternativesInfos });\n                    }\n                } else {\n                    this.setState({ alternatives: undefined });\n                }\n            });\n    };\n\n    renderListAlternatives = (listItems) => {\n        let res = <React.Fragment></React.Fragment>;\n        res = listItems.map((item) => {\n            let pathProduct = \"/products/\" + item.id;\n            // Mock Front\n            if (item.id === \"8001505005707\") {\n                pathProduct += \"/24\";\n            }\n\n            if (item.id !== this.props.barcode) {\n                return (\n                    <div className=\"carousel\" key={item.id}>\n                        <a href={pathProduct} className=\"product-alternative\">\n                            <div>\n                                <img\n                                    src={item.img_url}\n                                    className=\"product-alternative-image\"\n                                    alt=\"\"\n                                />\n                            </div>\n                            <div className=\"product-alternative-text\">\n                                <label className=\"product-alternative-title\">{item.name}</label>\n                                <label className=\"product-alternative-brand\">{}</label>\n                                <RenderColor item={item} />\n                            </div>\n                            <div className=\"product-alternative-fleche\">{\">\"}</div>\n                        </a>\n                    </div>\n                );\n            } else {\n                return <React.Fragment></React.Fragment>;\n            }\n        });\n\n        return res;\n    };\n\n    alternativesloop = () => {\n        let alternativesList = <React.Fragment></React.Fragment>;\n        if (\n            this.state.alternatives &&\n            this.state.alternatives !== \"loading\" &&\n            this.state.alternatives !== \"\"\n        ) {\n            this.state.alternatives.a.sort(function (a, b) {\n                return b.eco_score - a.eco_score;\n            });\n\n            this.state.alternatives.b.sort(function (a, b) {\n                return b.eco_score - a.eco_score;\n            });\n            this.state.alternatives.c.sort(function (a, b) {\n                return b.eco_score - a.eco_score;\n            });\n            this.state.alternatives.d.sort(function (a, b) {\n                return b.eco_score - a.eco_score;\n            });\n\n            let tab;\n            switch (this.props.ecoScore) {\n                case \"a\":\n                    return undefined;\n\n                    break;\n                case \"b\":\n                    tab = this.state.alternatives.a;\n                    if (tab.length == 0) {\n                        return undefined;\n                    } else {\n                        alternativesList = this.renderListAlternatives(tab);\n                    }\n                    break;\n                case \"c\":\n                    tab = this.state.alternatives.a.concat(this.state.alternatives.b);\n\n                    if (tab.length == 0) {\n                        return undefined;\n                    } else {\n                        alternativesList = this.renderListAlternatives(tab);\n                    }\n                    break;\n                case \"d\":\n                    tab = this.state.alternatives.a\n                        .concat(this.state.alternatives.b)\n                        .concat(this.state.alternatives.c);\n\n                    if (tab.length == 0) {\n                        return undefined;\n                    } else {\n                        alternativesList = this.renderListAlternatives(tab);\n                    }\n                    break;\n                case \"e\":\n                    tab = this.state.alternatives.a\n                        .concat(this.state.alternatives.b)\n                        .concat(this.state.alternatives.c)\n                        .concat(this.state.alternatives.d);\n                    if (tab.length == 0) {\n                        return undefined;\n                    } else {\n                        alternativesList = this.renderListAlternatives(tab);\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return alternativesList;\n    };\n\n    render = () => {\n        let alternatives_title = \"\";\n        if (!this.state.alternatives) {\n            alternatives_title = \"Pas d'alternatives disponible\";\n        } else {\n            if (this.state.alternatives === \"loading\") {\n                alternatives_title = \"Chargement des alternatives ...\";\n            } else {\n                alternatives_title = \"Alternatives\";\n            }\n        }\n        let alternatives = this.alternativesloop();\n        if (\n            this.state.alternatives &&\n            this.state.alternatives !== \"loading\" &&\n            this.state.alternatives !== \"\" &&\n            alternatives\n        ) {\n            return (\n                <React.Fragment>\n                    <span className=\"title-part-environnement\">{alternatives_title}</span>\n                    <Carousel\n                        autoPlay={false}\n                        interval={100000}\n                        centerMode={true}\n                        centerSlidePercentage={90}\n                        showThumbs={false}\n                        showIndicators={false}\n                        showStatus={false}\n                    >\n                        {alternatives}\n                    </Carousel>\n                </React.Fragment>\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n}\n\nexport default Alternatives;\n\nfunction RenderColor({ item }) {\n    let labelColor;\n    let labelLevel;\n    if (item.eco_score <= 33) {\n        labelColor = \"red\";\n        labelLevel = \"Mauvais\";\n    } else if (item.eco_score > 33 && item.eco_score < 67) {\n        labelColor = \"yellow\";\n        labelLevel = \"Moyen\";\n    } else {\n        labelColor = \"green\";\n        labelLevel = \"Bonne\";\n    }\n    return (\n        <div className=\"product-alternative-label-position\">\n            <div className=\"product-alternative-label\">\n                <div style={{ color: labelColor }}></div>\n                <div className=\"product-alternative-label-text\">{item.eco_score}/100</div>\n            </div>\n            <div className=\"product-alternative-label-level \">{labelLevel}</div>\n        </div>\n    );\n}\n","import React from \"react\";\nimport { Map, TileLayer, Polygon } from \"react-leaflet\";\n\nclass Origins extends React.Component {\n    state = {\n        polygon: [],\n        activeCountry: \"\",\n    };\n\n    componentDidMount = () => {\n        this.getCountries();\n    };\n\n    setActiveCountry = (country) => {\n        this.setState({ activeCountry: country });\n    };\n\n    getCountries = () => {\n        this.props.origins?.map((origin) => {\n            if (origin !== \"en:ghana\") {\n                fetch(`https://api.lowympact.fr/api/v1/countries/${origin}`)\n                    .then((res) => res.json())\n                    .then((res) => {\n                        let polygon = this.state.polygon;\n                        if (res.success && res.data?.country) {\n                            polygon.push({\n                                geo: res.data.country.coordinates,\n                                name: res.data.country.name,\n                            });\n                            this.setState({\n                                polygon: polygon,\n                                activeCountry:\n                                    this.state.activeCountry + res.data.country.name + \", \",\n                            });\n                        }\n                    });\n            }\n            return true;\n        });\n    };\n\n    render = () => {\n        if (this.state.polygon.length === 0) return <React.Fragment />;\n        else {\n            return (\n                <div className=\"environnement-map-container\">\n                    <div className=\"product-co2-impact-header\">\n                        <div className=\"product-co2-impact-logo\">\n                            <div className=\"material-icons icon-label-co2-impact\">place</div>\n                        </div>\n                        <div className=\"product-co2-impact-title\">\n                            <div className=\"product-co2-impact-title-text\">\n                                Provenance des ingrdients\n                            </div>\n                            <div className=\"product-co2-impact-title-label\">\n                                Pays d'origine : {this.state.activeCountry}\n                            </div>\n                        </div>\n                    </div>\n\n                    <Map\n                        center={[51.505, -0.09]}\n                        zoom={-1}\n                        minZoom={0}\n                        className=\"environnement-map\"\n                        scrollWheelZoom={true}\n                        dragging={false}\n                        maxBounds={[\n                            [-90, -180],\n                            [90, 180],\n                        ]}\n                        maxBoundsViscosity={1}\n                        whenCreated={(map) => this.setState({ map })}\n                    >\n                        <TileLayer\n                            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a>'\n                            url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png\" //'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png' //'https://{s}.tile.osm.org/{z}/{x}/{y}.png'\n                        />\n                        {this.state.polygon.map((poly, i) => {\n                            if (poly)\n                                return (\n                                    <Polygon\n                                        onClick={() => this.setActiveCountry(poly.name)}\n                                        color={\"color:white\"}\n                                        fillColor={\n                                            this.activeCountry === poly.name ? \"blue\" : \"green\"\n                                        }\n                                        opacity={\"1\"}\n                                        positions={poly.geo}\n                                        key={i}\n                                    />\n                                );\n                            else return <React.Fragment />;\n                        })}\n                    </Map>\n                </div>\n            );\n        }\n    };\n}\n\nexport default Origins;\n","import React from \"react\";\n\nclass EmpreinteCarbone extends React.Component {\n    state = {\n        alea: 3,\n    };\n\n    setAlea = (nb) => {\n        // this.setState({ alea: Math.floor(Math.random() * 11) });\n        let alea = this.state.alea + nb;\n        if (alea > 11) alea = 0;\n        if (alea < 0) alea = 11;\n        this.setState({ alea: alea });\n    };\n\n    render = () => {\n        if (this.props.dataEcoScore?.agribalyse?.co2_total) {\n            let repartition = [\n                {\n                    image: \"agriculture\",\n                    name: \"Agriculture\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_agriculture) * 100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n                {\n                    image: \"local_shipping\",\n                    name: \"Transport\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_transportation) *\n                            100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n                {\n                    image: \"view_in_ar\",\n                    name: \"Emballage\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_packaging) * 100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n                {\n                    image: \"transform\",\n                    name: \"Transformation\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_processing) * 100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n                {\n                    image: \"store\",\n                    name: \"Distribution\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_distribution) * 100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n                {\n                    image: \"microwave\",\n                    name: \"Consommation\",\n                    percent: (\n                        (parseFloat(this.props.dataEcoScore?.agribalyse?.co2_consumption) * 100) /\n                        parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total)\n                    ).toFixed(0),\n                },\n            ];\n            repartition = repartition.map((i) => {\n                return (\n                    <div className=\"empreinte-single\" key={i.name}>\n                        <div className=\"material-icons\">{i.image}</div>\n                        <div className=\"name\">{i.name} : </div>\n                        <div className=\"pourcent\">{i.percent} %</div>\n                    </div>\n                );\n            });\n\n            let equivalent = getEquivalent(\n                parseFloat(this.props.dataEcoScore?.agribalyse?.co2_total),\n                this.state.alea\n            );\n\n            let circle = \"cmauve\";\n            if (this.props.dataEcoScore?.agribalyse?.co2_total < 15) circle = \"cred\";\n            if (this.props.dataEcoScore?.agribalyse?.co2_total < 7) circle = \"corange\";\n            if (this.props.dataEcoScore?.agribalyse?.co2_total < 3) circle = \"cgreen\";\n            if (this.props.dataEcoScore?.agribalyse?.co2_total < 1) circle = \"cdarkgreen\";\n            return (\n                <React.Fragment>\n                    <div className=\"empreinte-carbone-container\">\n                        <div className=\"empreinte-carbone-header\">\n                            <div className=\"header-text\">\n                                <div className=\"header-main\">Empreinte Carbone</div>\n                                <div className=\"header-small\">source : ADEME</div>\n                            </div>\n                            <div className=\"empreinte-carbone-number\">\n                                <span>\n                                    {parseFloat(\n                                        this.props.dataEcoScore?.agribalyse?.co2_total\n                                    ).toFixed(2)}\n                                    kg CO2e\n                                </span>\n                                <div className={\"circle \" + circle}></div>\n                            </div>\n                        </div>\n                        <div className=\"empreinte-carbone-equivalent\">\n                            <div className=\"icon-container\">\n                                <div className=\"material-icons\">\n                                    <img\n                                        src={`/images/alternatives/${equivalent[1]}`}\n                                        alt=\"alternative\"\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"equivalent-container\">\n                                <div className=\"text-small\">Soit l'quivalent...</div>\n                                <div className=\"text-big\">{equivalent[0]}</div>\n                            </div>\n                        </div>\n                        <div className=\"arrow\">\n                            <div className=\"material-icons\" onClick={() => this.setAlea(1)}>\n                                arrow_back_ios\n                            </div>\n                            <div className=\"material-icons\" onClick={() => this.setAlea(-1)}>\n                                arrow_forward_ios\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"empreinte-carbone-container no-margin-container\">\n                        <div className=\"empreinte-carbone-header\">\n                            <div className=\"header-text\">\n                                <div className=\"header-main\">\n                                    Rpartition de l'empreinte Carbone\n                                </div>\n                                <div className=\"header-small\">\n                                    selon les diffrentes tapes du cycle de vie\n                                </div>\n                            </div>\n                            {/* <div className=\"empreinte-carbone-number\">\n                                <span>\n                                    {parseFloat(\n                                        this.props.dataEcoScore?.agribalyse?.co2_total\n                                    ).toFixed(2)}\n                                    kg CO2e\n                                </span>\n                                <div className=\"circle\"></div>\n                            </div> */}\n                        </div>\n                        <div className=\"empreinte-carbone-repartition\">{repartition}</div>\n                    </div>\n                </React.Fragment>\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n}\n\nexport default EmpreinteCarbone;\n\nfunction getEquivalent(co2, alea) {\n    switch (alea) {\n        case 0:\n            return [\n                \"De la production de \" +\n                    (co2 / 0.0046).toFixed(0) +\n                    \" feuilles de papier blanc 80g\",\n                \"paper.png\",\n            ];\n        case 1:\n            return [\n                \"De la production de \" +\n                    (co2 / 0.6).toFixed(1) +\n                    \" kg de pommes de terre en France\",\n                \"potatoe.png\",\n            ];\n        case 2:\n            return [\n                \"De la production de \" + (co2 / 0.53).toFixed(1) + \" kg de fraises en France\",\n                \"strawberry.png\",\n            ];\n        case 3:\n            return [\n                \"De \" + (co2 / 0.193).toFixed(1) + \" km parcourus par une personne en voiture\",\n                \"car.svg\",\n            ];\n        case 4:\n            return [\n                \"De \" + (co2 / 0.137).toFixed(1) + \" km parcourus par une personne en Bus de ville\",\n                \"bus.svg\",\n            ];\n        case 5:\n            return [\n                \"De \" +\n                    (co2 / 0.019).toFixed(0) +\n                    \" e-mails envoys contenant une pice jointe d'1mo\",\n                \"mail.svg\",\n            ];\n        case 6:\n            return [\n                \"De \" +\n                    (co2 / 0.5).toFixed(1) +\n                    \" jour(s) d'clairage d'une ampoule  incandescence\",\n                \"light.svg\",\n            ];\n        case 7:\n            return [\n                \"De \" +\n                    (co2 / 0.24).toFixed(1) +\n                    \" heures de chauffage au gaz d'un appartement moyen de 70m\",\n                \"appartment.svg\",\n            ];\n        case 8:\n            return [\n                \"De la production de \" +\n                    ((co2 * 1000) / 33.8).toFixed(0) +\n                    \" grammes de steak hach de boeuf cru\",\n                \"steak.png\",\n            ];\n        case 9:\n            return [\n                \"De \" +\n                    (co2 / 0.083).toFixed(1) +\n                    \" jours d'clairage d'une ampoule basse consommation\",\n                \"light.svg\",\n            ];\n        case 10:\n            return [\n                \"De \" +\n                    (co2 / 0.105).toFixed(1) +\n                    \" kilomtres parcourus en Trotinette lectrique (en France)\",\n                \"trotinette.png\",\n            ];\n        case 11:\n            return [\n                \"D'une personne parcourant \" +\n                    (co2 / 0.3).toFixed(0) * 100 +\n                    \" kilomtres en TGV (en France)\",\n                \"train.png\",\n            ];\n        default:\n            return [\n                \"De \" +\n                    (co2 / 0.105).toFixed(1) +\n                    \" kilomtres parcourus en Trotinette lectrique (en France)\",\n                \"trotinette.png\",\n            ];\n    }\n}\n","import React from \"react\";\nimport Alternatives from \"./Alternatives\";\nimport Origins from \"./Origins\";\nimport \"./Environnement.css\";\nimport EmpreinteCarbone from \"./EmpreinteCarbone\";\n\nclass Environnement extends React.Component {\n    state = {\n        width: undefined,\n        materials: [],\n    };\n\n    getColor = (note) => {\n        if (note > 67) {\n            return \"green\";\n        }\n        if (note <= 33) {\n            return \"red\";\n        }\n        return \"yellow\";\n    };\n\n    getColorImpact = (note) => {\n        if (note > 70) {\n            return \"green\";\n        }\n        if (note <= 40) {\n            return \"red\";\n        }\n        return \"yellow\";\n    };\n\n    getLabel = (note) => {\n        if (note > 67) {\n            return \"Bon\";\n        }\n        if (note <= 33) {\n            return \"Mauvais\";\n        }\n        return \"Moyen\";\n    };\n\n    getLabelImpact = (note) => {\n        if (note > 60) {\n            return \"Impact fort\";\n        }\n        if (note <= 30) {\n            return \"Impact faible\";\n        }\n        return \"Impact moyen\";\n    };\n\n    getLabelImpactPackaging = (note) => {\n        if (note > 2) {\n            return \"Impact faible\";\n        }\n        if (note < -2) {\n            return \"Impact fort\";\n        }\n        return \"Impact moyen\";\n    };\n\n    getColorImpactPackaging = (note) => {\n        if (note > 2) {\n            return \"green\";\n        }\n        if (note < -2) {\n            return \"red\";\n        }\n        return \"yellow\";\n    };\n\n    componentDidMount() {\n        this.updateWindowDimensions();\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    updateWindowDimensions = () => {\n        this.setState({ width: window.innerWidth });\n    };\n\n    displayPackagingDetailImpact = () => {\n        let res = <React.Fragment></React.Fragment>;\n\n        if (this.props.dataEcoScore?.adjustments?.packaging?.packagings) {\n            var materials = [];\n            let slides = <React.Fragment></React.Fragment>;\n\n            this.props.dataEcoScore?.adjustments?.packaging?.packagings.map((data) => {\n                if (data?.material.split(\":\")[1] !== \"unknown\") {\n                    materials.push(data?.material.split(\":\")[1]);\n                }\n                return true;\n            });\n\n            slides = materials\n                .filter(function (item, pos) {\n                    return materials.indexOf(item) === pos;\n                })\n                .map((data) => {\n                    var separator = \"\";\n                    if (materials.indexOf(data) < materials.length - 1) {\n                        separator = \" ; \";\n                    }\n                    return (\n                        <React.Fragment key={data}>\n                            <span>\n                                {data} {separator}\n                            </span>\n                        </React.Fragment>\n                    );\n                });\n\n            if (materials.length > 0) {\n                res = (\n                    <React.Fragment>\n                        <div className=\"product-co2-impact-content\">\n                            <div className=\"product-packaging-impact-content-details-text\">\n                                Matriaux utiliss : &nbsp;{slides}\n                            </div>\n                        </div>\n                    </React.Fragment>\n                );\n            } else {\n                res = (\n                    <React.Fragment>\n                        <div className=\"product-co2-impact-content\">\n                            <div className=\"product-packaging-impact-content-details-text\">\n                                Matriaux utiliss : &nbsp; Inconnu\n                            </div>\n                        </div>\n                    </React.Fragment>\n                );\n            }\n        }\n\n        return res;\n    };\n\n    displayPackagingImpact = () => {\n        let res = <React.Fragment></React.Fragment>;\n\n        if (this.props.dataEcoScore?.adjustments?.packaging?.value) {\n            return (\n                <div className=\"product-co2-impact-container\">\n                    <div className=\"product-co2-impact-header\">\n                        <div className=\"product-co2-impact-logo\">\n                            <div className=\"material-icons icon-label-co2-impact\">view_in_ar</div>\n                        </div>\n                        <div className=\"product-co2-impact-title\">\n                            <div className=\"product-co2-impact-title-text\">\n                                Impact de l'emballage\n                            </div>\n                            <div className=\"product-co2-impact-title-label\">\n                                {this.getLabelImpactPackaging(\n                                    this.props.dataEcoScore?.adjustments?.packaging?.value\n                                )}\n                            </div>\n                        </div>\n                        <div\n                            className=\"product-transport-impact-color-label\"\n                            style={{\n                                color: this.getColorImpactPackaging(\n                                    this.props.dataEcoScore?.adjustments?.packaging?.value\n                                ),\n                            }}\n                        >\n                            \n                        </div>\n                    </div>\n                    {this.displayPackagingDetailImpact()}\n                </div>\n            );\n        } else {\n            return res;\n        }\n    };\n\n    render = () => {\n        if (this.props.barcode) {\n            return (\n                <React.Fragment>\n                    <EmpreinteCarbone dataEcoScore={this.props.dataEcoScore} />\n\n                    {this.props.origins ? (\n                        <Origins origins={this.props.origins} />\n                    ) : (\n                        <React.Fragment />\n                    )}\n                    {/* {this.displayPackagingImpact()} */}\n\n                    <Alternatives\n                        barcode={this.props.barcode}\n                        ecoScore={this.props.ecoScore}\n                        ciqual_code={this.props.dataEcoScore?.agribalyse?.code}\n                    />\n                </React.Fragment>\n            );\n        } else {\n            return <React.Fragment></React.Fragment>;\n        }\n    };\n}\n\nexport default Environnement;\n","import React from \"react\";\nimport Navbar from \"../components/Navbar/Navbar\";\nimport Traceability from \"../components/Traceability/Traceability\";\nimport Environnement from \"../components/Environnement/Environnement\";\n// import Labels from \"../components/Labels/Labels\";\nimport \"./Product.css\";\nimport { Link } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\n\nclass Product extends React.Component {\n    state = {\n        barcode: this.props.match.params.barcode,\n        bcProductId: this.props.match.params.bcProductId,\n        product: undefined,\n        productImageUrl: undefined,\n        productName: undefined,\n        genericName: undefined,\n        ecoScore: undefined,\n        dataEcoScore: undefined,\n        value: 0,\n        connected: false,\n        productData: undefined,\n        userId: undefined,\n        cart: 0,\n        totalCO2Traceability: undefined,\n        countries: [],\n    };\n\n    isFlipping = false;\n\n    //for scrolling\n    getBottomRef = (component) => {\n        this.bottomComponent = component;\n    };\n\n    componentDidMount = () => {\n        this.Verify();\n        let userId = localStorage.getItem(\"userId\");\n        if (userId) {\n            this.setState({ userId: userId });\n            this.loadCartInfo(userId);\n        }\n        this.loadFromOpenFoodFacts(this.props.match.params.barcode);\n        if (this.props.match.params.bcProductId) {\n            this.loadProductInformations(\n                this.props.match.params.barcode,\n                this.props.match.params.bcProductId\n            );\n        }\n    };\n\n    handleBarCodeUpdate = () => {\n        if (this.state.barcode !== this.props.match.params.barcode) {\n            this.setState({\n                barcode: this.props.match.params.barcode,\n                bcProductId: this.props.match.params.bcProductId,\n            });\n            this.loadFromOpenFoodFacts(this.props.match.params.barcode);\n            if (this.props.match.params.bcProductId) {\n                this.loadProductInformations(\n                    this.props.match.params.barcode,\n                    this.props.match.params.bcProductId\n                );\n            }\n        }\n    };\n\n    Verify = () => {\n        let isExpired = true;\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n            var decodedToken = jwt.decode(token, { complete: true });\n            var dateNow = new Date();\n            if (decodedToken.payload.exp >= dateNow.getTime() / 1000) {\n                isExpired = false;\n            }\n        }\n        if (isExpired === false) {\n            this.setState({ connected: true });\n        }\n    };\n\n    loadProductInformations = (barcode, bcProductId) => {\n        fetch(\n            `https://api.lowympact.fr/api/v1/products/${barcode}?bcProductId=${bcProductId}`,\n            // `http://localhost:8080/api/v1/products/${barcode}?bcProductId=${bcProductId}`,\n            {\n                method: \"get\",\n                credentials: \"include\",\n                headers: new Headers({\n                    \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\n                    \"Content-Type\": \"application/json\",\n                }),\n            }\n        )\n            .then((response) => response.json())\n            .then((res) => {\n                this.setState({\n                    products: res?.data?.traceability,\n                    impact: res?.data?.impact,\n                    totalCO2Traceability: res?.data?.transportCO2Impact,\n                });\n            });\n    };\n\n    loadFromOpenFoodFacts = (barcode) => {\n        let dataEcoScore;\n\n        fetch(`https://world.openfoodfacts.org/api/v0/product/${barcode}.json/`)\n            .then((response) => response.json())\n            .then((res) => {\n                let productImageUrl = res?.product?.image_url;\n                let productName = res?.product?.product_name;\n                let genericName = res?.product?.generic_name;\n                let ecoScore = res?.product?.ecoscore_grade;\n\n                dataEcoScore = res?.product?.ecoscore_data;\n\n                // console.log(res);\n                let origins = res?.product?.origins_hierarchy;\n                if (origins && origins != \"\") {\n                    this.setState({ origins: origins });\n                }\n\n                if (res?.product) {\n                    this.setState({ productData: res.product });\n                }\n\n                if (productImageUrl) {\n                    this.setState({ productImageUrl: productImageUrl });\n                }\n                if (productName) {\n                    this.setState({ productName: productName });\n                }\n                if (genericName) {\n                    this.setState({ genericName: genericName });\n                }\n                if (\n                    ecoScore &&\n                    (ecoScore === \"a\" ||\n                        ecoScore === \"b\" ||\n                        ecoScore === \"c\" ||\n                        ecoScore === \"d\" ||\n                        ecoScore === \"e\")\n                ) {\n                    this.setState({ ecoScore: ecoScore });\n                }\n                if (dataEcoScore) {\n                    this.setState({ dataEcoScore: dataEcoScore });\n                }\n                if (res.status === 1) {\n                    this.saveHistory();\n                }\n\n                // Mock Soutenance\n                if (barcode === \"80135463\") {\n                    this.setState({ productName: \"Nutella 200g\" });\n                }\n\n                var scoreSearch = \"a\";\n\n                switch (res.product?.ecoscore_grade) {\n                    case \"b\":\n                        scoreSearch = \"a\";\n                        break;\n                    case \"c\":\n                        scoreSearch = \"b\";\n                        break;\n                    case \"d\":\n                        scoreSearch = \"c\";\n                        break;\n                    case \"e\":\n                        scoreSearch = \"c\";\n                        break;\n\n                    default:\n                        break;\n                }\n            });\n    };\n\n    // Get if a connected user already added this item in this cart in the past 2 hours\n    loadCartInfo = (userId) => {\n        if (userId && this.state.barcode) {\n            fetch(\n                `https://api.lowympact.fr/api/v1/users/${userId}/cart/${this.state.barcode}?bcProductAddress=${this.state.bcProductId}`,\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/history`,\n                {\n                    method: \"get\",\n                    credentials: \"include\",\n                    headers: new Headers({\n                        Authorization: localStorage.getItem(\"token\"),\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\n                        \"Content-Type\": \"application/json\",\n                    }),\n                }\n            )\n                .then((response) => response.json())\n                .then((res) => {\n                    console.log(res);\n                    if (res.success) {\n                        this.setState({ cart: res.data?.quantity });\n                    }\n                });\n        }\n    };\n\n    saveHistory = async () => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const add = urlParams.get(\"cart\");\n        if (add !== \"no\") {\n            await delay(2000);\n\n            let history = JSON.parse(localStorage.getItem(\"local_history\"));\n            let exist = null;\n            if (history) {\n                history = history?.filter(\n                    (element) =>\n                        !(\n                            element.barcode == this.state.barcode &&\n                            element.bcProductId == this.state.bcProductId\n                        )\n                );\n            } else {\n                history = [];\n            }\n\n            history.push({\n                barcode: this.state.barcode,\n                bcProductId: this.state.bcProductId,\n                brand: this.state.productData.brands,\n                image: this.state.productImageUrl,\n                label: this.state.ecoScore,\n                name: this.state.productName,\n                date: Date.now(),\n            });\n            localStorage.setItem(\"local_history\", JSON.stringify(history));\n\n            if (this.state.userId) {\n                fetch(\n                    `https://api.lowympact.fr/api/v1/users/${this.state.userId}/history`,\n                    // `http://localhost:8080/api/v1/users/${this.state.userId}/history`,\n                    {\n                        method: \"put\",\n                        credentials: \"include\",\n                        headers: new Headers({\n                            Authorization: localStorage.getItem(\"token\"),\n                            \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\n                            \"Content-Type\": \"application/json\",\n                        }),\n                        body: JSON.stringify({\n                            barcode: this.state.barcode,\n                            bcProductAddress: this.state.bcProductId,\n                        }),\n                    }\n                )\n                    .then((response) => response.json())\n                    .then((res) => {\n                        //console.log(res);\n                    });\n            }\n        }\n    };\n\n    addToCart = () => {\n        if (this.state.barcode && this.state.cart >= 0) {\n            let co2 = -1;\n            if (this.state.dataEcoScore?.agribalyse?.co2_total) {\n                co2 = parseFloat(this.state.dataEcoScore?.agribalyse?.co2_total);\n            }\n\n            let ecoscore = \"unknown\";\n            if (this.state.ecoScore) {\n                ecoscore = this.state.ecoScore;\n            }\n            this.flip();\n            fetch(\n                `https://api.lowympact.fr/api/v1/users/${this.state.userId}/cart`,\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/cart`,\n                {\n                    method: \"put\",\n                    credentials: \"include\",\n                    headers: new Headers({\n                        Authorization: localStorage.getItem(\"token\"),\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\n                        \"Content-Type\": \"application/json\",\n                    }),\n                    body: JSON.stringify({\n                        barcode: this.state.barcode,\n                        bcProductAddress: this.state.bcProductId,\n                        quantityDelta: 1,\n                        ecoscore: ecoscore,\n                        carbonImpact: co2,\n                    }),\n                }\n            )\n                .then((response) => response.json())\n                .then((res) => {\n                    //console.log(res);\n                    if (res.success) {\n                        this.setState({ cart: this.state.cart + 1 });\n                    }\n                });\n        }\n    };\n\n    removeFromCart = () => {\n        if (this.state.barcode && this.state.cart > 0) {\n            this.flip();\n            let co2 = -1;\n            if (this.state.dataEcoScore?.agribalyse?.co2_total) {\n                co2 = parseFloat(this.state.dataEcoScore?.agribalyse?.co2_total);\n            }\n            let ecoscore = \"unkown\";\n            if (this.state.ecoScore) {\n                ecoscore = this.state.ecoScore;\n            }\n            fetch(\n                `https://api.lowympact.fr/api/v1/users/${this.state.userId}/cart`,\n                // `http://localhost:8080/api/v1/users/${this.state.userId}/cart`,\n                {\n                    method: \"put\",\n                    credentials: \"include\",\n                    headers: new Headers({\n                        Authorization: localStorage.getItem(\"token\"),\n                        \"api-key\": \"99d8fb95-abdd-4885-bf6c-3a81d8874043\",\n                        \"Content-Type\": \"application/json\",\n                    }),\n                    body: JSON.stringify({\n                        barcode: this.state.barcode,\n                        bcProductAddress: this.state.bcProductId,\n                        quantityDelta: -1,\n                        ecoscore: ecoscore,\n                        carbonImpact: co2,\n                    }),\n                }\n            )\n                .then((response) => response.json())\n                .then((res) => {\n                    //console.log(res);\n                    if (res.success) {\n                        this.setState({ cart: this.state.cart - 1 });\n                    }\n                });\n        }\n    };\n\n    flip = async (event) => {\n        // if (!this.isFlipping) {\n        // \tthis.isFlipping = true;\n        // \tawait delay(500);\n        //console.log(this.imageFlip.style.transform);\n        if (this.imageFlip && !this.state.isFlipping) {\n            if (this.imageFlip.style.transform === \"rotateY(360deg)\") {\n                this.imageFlip.style.transform = \"rotateY(0deg)\";\n            } else {\n                this.imageFlip.style.transform = \"rotateY(360deg)\";\n            }\n        }\n        // await delay(1000);\n        // this.isFlipping = false;\n        // }\n    };\n\n    displayImage = () => {\n        this.handleBarCodeUpdate();\n\n        let image = <React.Fragment />;\n        let productName = <React.Fragment />;\n        let genericName = <React.Fragment />;\n        let ecoScore = <React.Fragment />;\n        if (this.state.productImageUrl) {\n            image = (\n                <img src={this.state.productImageUrl} className=\"product-image\" alt=\"produit\" />\n            );\n        }\n\n        if (this.state.productName) {\n            productName = <div className=\"product-name\">{this.state.productName}</div>;\n        }\n        if (this.state.ecoScore) {\n            let scoreClass = \"color_score_\" + this.state.ecoScore;\n            ecoScore = (\n                <div className=\"product-ecoscore-image\">\n                    <span className={\"circle-score \" + scoreClass}> </span>\n                    EcoScore :<span className=\"uppercase \">{\" \" + this.state.ecoScore}</span>\n                </div>\n            );\n        } else if (this.state.genericName) {\n            genericName = <div className=\"product-generic-name\">{this.state.genericName}</div>;\n        }\n        return (\n            <React.Fragment>\n                {this.state.userId ? (\n                    <div\n                        className={this.state.cart > 0 ? \"add-to-cart green\" : \"add-to-cart\"}\n                        onClick={this.addToCart}\n                    >\n                        <span className=\"cart-count\">\n                            {this.state.cart > 0 ? this.state.cart : \"\"}\n                        </span>\n                        <span className=\"material-icons\">add_shopping_cart</span>\n                    </div>\n                ) : (\n                    <React.Fragment />\n                )}\n                {this.state.cart > 0 ? (\n                    <div className=\"remove-from-cart\" onClick={this.removeFromCart}>\n                        <span className=\"material-icons\">remove_shopping_cart</span>\n                    </div>\n                ) : (\n                    <React.Fragment />\n                )}\n                {image}\n                {productName}\n                <div className=\"product-bottom-image-div\">\n                    {genericName}\n                    {ecoScore}\n                </div>\n            </React.Fragment>\n        );\n    };\n\n    handleChange = (event, newValue) => {\n        this.setState({ value: newValue });\n        if (newValue === 1) {\n            let elem = document.getElementsByClassName(\"swiper-container\");\n            if (elem[0]) {\n                elem[0].scrollIntoView({ behavior: \"smooth\" });\n            }\n        }\n    };\n\n    displayNavbar = () => {\n        let retour = <React.Fragment />;\n        if (this.state.bcProductId) {\n            retour = (\n                <div className=\"product-navbar-container\">\n                    <button\n                        className={\n                            this.state.value === 0\n                                ? \"product-navbar-button selected\"\n                                : \"product-navbar-button\"\n                        }\n                        onClick={() => this.handleChange(\"\", 0)}\n                    >\n                        Environnement\n                    </button>\n                    <button\n                        className={\n                            this.state.value === 1\n                                ? \"product-navbar-button selected\"\n                                : \"product-navbar-button\"\n                        }\n                        onClick={() => this.handleChange(\"\", 1)}\n                    >\n                        Traabilit\n                    </button>\n                    <div\n                        className={\n                            this.state.value === 0\n                                ? \"navbar-under nav-left\"\n                                : \"navbar-under nav-right\"\n                        }\n                    ></div>\n                </div>\n            );\n        }\n        return retour;\n    };\n\n    render = () => {\n        //tri des produits\n        let products = this.state.products?.sort((a, b) => {\n            if (a.depth > b.depth) return -1;\n            else return 1;\n        });\n        return (\n            <React.Fragment>\n                <div className=\"product-page-container\">\n                    <div className=\"product-header-container\">\n                        <div className=\"product-history-link\">\n                            <Link to=\"/history\"> {\"<\"} Historique</Link>\n                        </div>\n                        <img\n                            className=\"product-bitmap-image\"\n                            src=\"/images/utils/bitmap.png\"\n                            alt=\"\"\n                        />\n                    </div>\n                    <div\n                        className=\"product-image-container\"\n                        // onClick={this.flip}\n                        ref={(ref) => (this.imageFlip = ref)}\n                    >\n                        {this.displayImage()}\n                    </div>\n\n                    {this.displayNavbar()}\n\n                    {/* <AppBar position=\"static\">\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\taria-label=\"simple tabs example\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab label=\"Traabilit\" />\n\t\t\t\t\t\t\t<Tab label=\"Environnement\" />\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</AppBar>\n\t\t\t\t\t<TabPanel value={this.state.value} index={0}></TabPanel>\n\t\t\t\t\t<TabPanel value={this.state.value} index={1}>\n\t\t\t\t</TabPanel> */}\n                    {this.state.value === 0 ? (\n                        <Environnement\n                            dataEcoScore={this.state.dataEcoScore}\n                            ecoScore={this.state.ecoScore}\n                            origins={this.state.origins}\n                            displayTranportImpact={\n                                this.props.match.params.bcProductId !== null &&\n                                this.props.match.params.bcProductId !== undefined\n                            }\n                            barcode={this.props.match.params.barcode}\n                        ></Environnement>\n                    ) : (\n                        <div className=\"product-bottom-container\">\n                            <Traceability\n                                products={products}\n                                getBottomRef={this.getBottomRef}\n                                totalCO2Traceability={this.state.totalCO2Traceability}\n                            />\n                        </div>\n                    )}\n                    <Navbar\n                        barcode={this.props.match.params.barcode}\n                        bcProductId={this.props.match.params.bcProductId}\n                    />\n                </div>\n            </React.Fragment>\n        );\n    };\n}\n\nexport default Product;\n\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\n","import \"./ButtonNavBar.css\";\n\nfunction ButtonHistory() {\n    return (\n        <div>\n            <div className=\"button-logo\">\n                <span className=\"material-icons\">history</span>\n            </div>\n            <div>Historique</div>\n        </div>\n    );\n}\n\nexport default ButtonHistory;\n","function ButtonProfil() {\n    return (\n        <div>\n            <div>\n                <span className=\"material-icons\">person</span>\n            </div>\n            <div>Profil</div>\n        </div>\n    );\n}\n\nexport default ButtonProfil;\n","import { React } from \"react\";\n\nfunction ButtonScan() {\n    return (\n        <div>\n            <div className=\"navbar-scan-icon\">\n                <span className=\"material-icons\">qr_code_scanner</span>\n            </div>\n        </div>\n    );\n}\n\nexport default ButtonScan;\n","import React, { Component } from \"react\";\nimport Quagga from \"@ericblade/quagga2\";\nimport ImageUploader from \"react-images-upload\";\n\nclass Scanner extends Component {\n    state = {\n        error: false,\n        noBackCamera: false,\n        usedCamera: 0,\n        devices: [],\n        processingImage: 0,\n        text: 0,\n        mutlipleTracks: false,\n    };\n\n    switchCamera = () => {\n        let num = this.state.usedCamera + 1;\n        if (num >= this.state.devices.length) {\n            num = 0;\n        }\n        this.setState({ usedCamera: num });\n        Quagga.stop();\n        this.QuaggaInit(this.state.devices[num].deviceId);\n    };\n\n    componentDidMount = async () => {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const camera = urlParams.get(\"camera\");\n        if (camera == \"false\") {\n            this.setState({ error: true, text: 1 });\n        } else if (\n            navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.msGetUserMedia\n        ) {\n            // On vient rcuprer les flux vido existants\n            let devices = await navigator.mediaDevices.enumerateDevices().then(function (devices) {\n                return devices.filter((d) => d.kind === \"videoinput\");\n            });\n            this.setState({ devices: devices });\n\n            //On prend seulement les camras arrire\n            //(toutes les camra si camra arrire non existante)\n            let videoDevices = devices.filter((d) => d.label.match(/back/) != null);\n            if (videoDevices.length === 0) {\n                this.setState({ noBackCamera: true });\n                videoDevices = devices;\n            }\n\n            // Get all camera capabilities\n            let capabilities = videoDevices.map(async (device) => {\n                return await navigator.mediaDevices\n                    .getUserMedia({\n                        video: { deviceId: { exact: device.deviceId } },\n                    })\n                    .then(\n                        (stream) => {\n                            let a = stream.getVideoTracks().map((track) => {\n                                return track.getCapabilities();\n                            });\n                            stream.getTracks().forEach((track) => track.stop());\n                            if (a.length > 1) this.setState({ mutlipleTracks: true });\n                            return a[0];\n                        },\n                        (err) => console.log(err)\n                    );\n            });\n            let capa = await Promise.all(capabilities);\n\n            //On trie les capabilities pour mettre les meilleurs rsolutions en premier\n            capa.sort((a, b) => {\n                if ((a.width.max + a.height.max) / 2 > (b.width.max + b.height.max) / 2) return -1;\n                else return 1;\n            });\n\n            if (capa[0]) this.QuaggaInit(capa[0]);\n            else this.QuaggaInit({});\n        } else {\n            this.setState({ error: true, text: 3 });\n        }\n    };\n\n    QuaggaInit = (capabilities) => {\n        Quagga.init(\n            {\n                inputStream: {\n                    type: \"LiveStream\",\n                    constraints: {\n                        ...capabilities,\n                    },\n                },\n                locator: {\n                    patchSize: \"normal\",\n                    halfSample: false,\n                },\n                locate: false,\n                area: {\n                    top: \"40%\",\n                    right: \"25%\",\n                    left: \"25%\",\n                    bottom: \"40%\",\n                },\n                numOfWorkers: window.navigator.hardwareConcurrency || 2,\n                decoder: {\n                    readers: [\"ean_reader\"],\n                },\n                multiple: false,\n                singleChannel: false,\n            },\n            (err) => {\n                if (err) {\n                    this.setState({ error: true, text: err + \" \" + JSON.stringify(capabilities) });\n                    return false;\n                }\n                Quagga.start();\n            }\n        );\n        this.props.setQuagga(Quagga);\n        Quagga.onDetected(this._onDetected);\n    };\n\n    componentWillUnmount() {\n        Quagga.offDetected(this._onDetected);\n    }\n\n    _onDetected = async (result) => {\n        let stop = await this.props.onDetected(result);\n        console.log(stop);\n        if (stop) {\n            Quagga.stop();\n        }\n    };\n\n    onDrop = (image) => {\n        try {\n            if (this.state.processingImage != 1) {\n                this.setState({ processingImage: 1 });\n                console.log(image[image.length - 1]);\n                let reader = new FileReader();\n                reader.readAsDataURL(image[image.length - 1]);\n                reader.onloadend = () => {\n                    Quagga.decodeSingle(\n                        {\n                            decoder: {\n                                readers: [\"ean_reader\"], // List of active readers\n                            },\n                            locate: true, // try to locate the barcode in the image\n                            src: reader.result, //image[image.length - 1], // or 'data:image/jpg;base64,' + data\n                        },\n                        (result) => {\n                            console.log(result);\n                            if (result) {\n                                this._onDetected(result);\n                                this.setState({ processingImage: 2 });\n                                console.log(\"result\", result.codeResult?.code);\n                            } else {\n                                console.log(\"not detected\");\n                                this.setState({ processingImage: 3 });\n                            }\n                        }\n                    );\n                };\n            }\n        } catch (err) {\n            console.log(err);\n            this.setState({ processingImage: 4 });\n        }\n    };\n\n    setImport = () => {\n        this.setState({ error: !this.state.error });\n    };\n\n    render() {\n        let textImage = <React.Fragment></React.Fragment>;\n\n        if (this.state.processingImage == 1) {\n            textImage = (\n                <React.Fragment>\n                    <p>Chargement en cours...</p>\n                </React.Fragment>\n            );\n        }\n        if (this.state.processingImage == 2) {\n            textImage = (\n                <React.Fragment>\n                    <p>Ce produit n'existe pas dans la base de donnes</p>\n                </React.Fragment>\n            );\n        }\n        if (this.state.processingImage == 3) {\n            textImage = (\n                <React.Fragment>\n                    <p>Code barre non trouv sur l'image, merci de ressayer</p>\n                </React.Fragment>\n            );\n        }\n        if (this.state.processingImage == 4) {\n            textImage = (\n                <React.Fragment>\n                    <p>\n                        Mauvais format ou fichier trop grand, merci de ressayer. <br />\n                        Taille max : 5mb <br />\n                        Formats: jpg, png, gif\n                    </p>\n                </React.Fragment>\n            );\n        }\n        return (\n            <React.Fragment>\n                <div id=\"interactive\" className={this.state.error ? \"hidden\" : \"viewport\"} />\n\n                {/* {this.state.devices?.length > 1 ? (\n                    <button className=\"code-switch-camera\" onClick={this.switchCamera}>\n                        <span className=\"material-icons\">cameraswitch</span>\n                        {this.state.usedCamera}\n                    </button>\n                ) : (\n                    <React.Fragment />\n                )} */}\n                {/* {!this.state.error ? (\n                    <button className=\"code-switch-camera\" onClick={this.setImport}>\n                        clique ici si tu souhaite importer une image\n                    </button>\n                ) : (\n                    \"\"\n                )} */}\n                {this.state.error ? (\n                    <div className=\"scan-error\">\n                        <ImageUploader\n                            withIcon={true}\n                            withPreview={false}\n                            buttonText={\n                                <div className=\"button-import\">\n                                    <div className=\"material-icons\">add_a_photo</div>\n                                    <p>Prendre une photo</p>\n                                </div>\n                            }\n                            onChange={this.onDrop}\n                            label={\"\"}\n                            imgExtension={[\".jpg\", \".gif\", \".png\", \".jpeg\"]}\n                            maxFileSize={5242880}\n                            labelClass={\"import-label\"}\n                        />\n                        <p className=\"red\">{textImage}</p>\n                        <p className=\"error-message-import\">\n                            {/* Il semblerait que votre camra ne soit pas dtecte. Vous pouvez\n                            importer une photo de votre bibliothque, ou essayer un autre\n                            navigateur. <br />\n                            <br /> */}\n                            {/* Si le problme persiste, contactez-nous{\" \"}\n                            <a href=\"mailto:contact@lowympact.fr?Subject=Lowympact-camera not working\">\n                                via ce lien\n                            </a> */}\n                            {\"code d'erreur : \" + this.state.text}\n                            <br />\n                        </p>\n                    </div>\n                ) : (\n                    <React.Fragment />\n                )}\n                {this.state.mutlipleTracks ? (\n                    <h1 className=\"debug\">If you see this, tell me</h1>\n                ) : (\n                    \"\"\n                )}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default Scanner;\n","import React, { Component } from \"react\";\nimport Scanner from \"./Scanner\";\nimport QrReader from \"react-qr-reader\";\nimport Switch from \"react-switch\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./Scan.css\";\n\nclass Scan extends Component {\n    state = {\n        scanning: true,\n        status: \"\",\n        results: [],\n        usedCameraId: \"3f6fc4177028f25c3e8215f4444838450630b8d656c627ef511346545d37f302\",\n        devices: [],\n        reading: false, //false : barcode - true: qrcode\n        barcode: undefined,\n        bcProductId: undefined,\n        Quagga: undefined,\n    };\n\n    setQuagga = (quagga) => {\n        if (this.state.Quagga) {\n            this.state.Quagga.stop();\n        }\n        this.setState({ Quagga: quagga });\n    };\n\n    _scan = () => {\n        this.setState({ scanning: !this.state.scanning, status: \"\" });\n    };\n\n    _onDetected = async (res) => {\n        if (res) {\n            if (res.codeResult && res.codeResult.code) {\n                this.setState({\n                    results: [res],\n                    scanning: true,\n                    status: \"waiting\",\n                });\n                let response = await fetch(\n                    `https://world.openfoodfacts.org/api/v0/product/${res.codeResult.code}.json/`\n                );\n                let result = await response.json();\n                if (result.status !== 0) {\n                    this.setState({\n                        scanning: false,\n                        status: \"found\",\n                        barcode: res.codeResult.code,\n                    });\n                    this.props.showScanner(false);\n                    if (this.state.Quagga) this.state.Quagga.stop();\n                    return true;\n                } else {\n                    this.setState({\n                        scanning: true,\n                        status: \"not found\",\n                    });\n                    return false;\n                }\n            }\n        }\n    };\n\n    handleScan = (data) => {\n        if (data) {\n            let arr = data.split(\"/\");\n            if (arr.length > 1) {\n                this.setState({\n                    scanning: false,\n                    barcode: arr[4],\n                    bcProductId: arr[5],\n                    status: \"found\",\n                });\n            }\n            if (this.state.Quagga) this.state.Quagga.stop();\n        }\n    };\n    handleError = (err) => {\n        console.error(err);\n    };\n\n    displayQrCode = () => {\n        if (this.state.status !== \"found\") {\n            return (\n                <QrReader\n                    delay={300}\n                    onError={this.handleError}\n                    onScan={this.handleScan}\n                    style={{ width: \"100%\" }}\n                    showViewFinder={false}\n                />\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n\n    displayBarCode = () => {\n        if (this.state.status !== \"found\") {\n            return (\n                <React.Fragment>\n                    <div className=\"header\">\n                        <ul className=\"results\">\n                            {this.state.results.map((result, i) => (\n                                <div key={result.codeResult.code + i}>\n                                    {this.state.status === \"waiting\"\n                                        ? \"Vrification du code : \" + result?.codeResult?.code\n                                        : \"\"}\n                                    {this.state.status === \"not found\"\n                                        ? \"Code non trouv, merci de ressayer\"\n                                        : \"\"}\n                                </div>\n                            ))}\n                        </ul>\n                    </div>\n                    {this.state.scanning ? (\n                        <Scanner\n                            onDetected={this._onDetected}\n                            setQuagga={this.setQuagga}\n                            usedCameraId={this.usedCameraId}\n                        />\n                    ) : null}\n                </React.Fragment>\n            );\n        } else {\n            return <React.Fragment />;\n        }\n    };\n\n    switchReader = () => {\n        if (this.state.reading) this.setState({ reading: false });\n        else {\n            if (this.state.Quagga) this.state.Quagga.stop();\n            this.setState({ reading: true });\n        }\n    };\n\n    render() {\n        if (\n            this.state.barcode &&\n            this.state.bcProductId &&\n            (this.props.barcode !== this.state.barcode ||\n                this.props.bcProductId !== this.state.bcProductId)\n        ) {\n            return (\n                <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\n            );\n        }\n        if (this.state.barcode && this.props.barcode !== this.state.barcode) {\n            return <Redirect to={\"/products/\" + this.state.barcode} />;\n        } else {\n            return (\n                <div className=\"code-reader-container\">\n                    <span\n                        className=\"close\"\n                        onClick={() => {\n                            if (this.state.Quagga) this.state.Quagga.stop();\n\n                            this.props.showScanner(false);\n                        }}\n                    >\n                        &times;\n                    </span>\n                    {/* <div className=\"code-switch\" onClick={this.switchReader}>\n                        <div className=\"span-code-switch\">\n                            <span\n                                className={\n                                    this.state.reading ? \"material-icons\" : \"material-icons green\"\n                                }\n                            >\n                                view_week\n                            </span>\n                            <span>Barcode</span>\n                        </div>\n                        <Switch\n                            onChange={this.switchReader}\n                            uncheckedIcon={false}\n                            checkedIcon={false}\n                            checked={this.state.reading}\n                            onColor={\"#888\"}\n                            offColor={\"#888\"}\n                        />\n                        <div className=\"span-code-switch\">\n                            <span\n                                className={\n                                    !this.state.reading ? \"material-icons\" : \"material-icons green\"\n                                }\n                            >\n                                qr_code_scanner\n                            </span>\n                            <span>QR Code</span>\n                        </div>\n                    </div> */}\n                    {/* {this.state.reading ? this.displayQrCode() : this.displayBarCode()} */}\n                    {this.displayBarCode()}\n                </div>\n            );\n        }\n    }\n}\n\nexport default Scan;\n","import \"./Navbar.css\";\nimport React from \"react\";\nimport ButtonHistory from \"../Button/ButtonHistory\";\nimport ButtonProfil from \"../Button/ButtonProfil\";\nimport ButtonScan from \"../Button/ButtonScan\";\n// import Scan from \"../Scan/Scan\";\nimport Scan from \"../Scan/Scan\";\n// import { ScanSettings } from \"scandit-sdk\";\nimport { Link } from \"react-router-dom\";\n\nclass Navbar extends React.Component {\n    state = {\n        showScanner: false,\n        barcode: undefined,\n        bcProductId: undefined,\n        height: 0,\n    };\n\n    componentDidMount() {\n        this.updateWindowDimensions();\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    updateWindowDimensions = () => {\n        this.setState({ height: window.innerHeight });\n    };\n\n    handleScannerButton = (bool) => {\n        this.setState({ showScanner: bool });\n    };\n\n    // handleBarcode = (res) => {\n    //     if (res) {\n    //         //dtect par barcode scanner\n    //         let arr = res.split(\"/\");\n    //         if (arr.length > 1) {\n    //             this.setState({\n    //                 barcode: arr[4],\n    //                 bcProductId: arr[5],\n    //                 showScanner: false,\n    //             });\n    //         } else {\n    //             this.setState({\n    //                 barcode: arr[0],\n    //                 showScanner: false,\n    //                 bcProductId: undefined,\n    //             });\n    //         }\n    //     }\n    // };\n\n    render = () => {\n        if (this.state.height < 550) {\n            return <React.Fragment />;\n        }\n        // if (\n        //     this.state.barcode &&\n        //     this.state.bcProductId &&\n        //     (this.props.barcode !== this.state.barcode ||\n        //         this.props.bcProductId !== this.state.bcProductId)\n        // ) {\n        //     return (\n        //         <Redirect to={\"/products/\" + this.state.barcode + \"/\" + this.state.bcProductId} />\n        //     );\n        // }\n\n        // if (this.state.barcode && this.props.barcode !== this.state.barcode) {\n        //     return <Redirect to={\"/products/\" + this.state.barcode} />;\n        // }\n\n        if (!this.state.showScanner) {\n            return (\n                <React.Fragment>\n                    <div className=\"navbar-container\">\n                        <Link\n                            to=\"/history\"\n                            className={\n                                window.location.pathname === \"/history\"\n                                    ? \"navbar-link navbar-text-left navbar-selected\"\n                                    : \"navbar-link navbar-text-left \"\n                            }\n                        >\n                            <ButtonHistory />\n                        </Link>\n                        <div onClick={() => this.handleScannerButton(true)}>\n                            <div className=\"navbar-circle\">\n                                <ButtonScan />\n                            </div>\n                        </div>\n                        <span className=\"navbar-scan-text\">Scan</span>\n                        <Link\n                            to=\"/profil\"\n                            className={\n                                window.location.pathname === \"/profil\"\n                                    ? \"navbar-link navbar-text-right navbar-selected\"\n                                    : \"navbar-link navbar-text-right \"\n                            }\n                        >\n                            <ButtonProfil />\n                        </Link>\n                    </div>\n                </React.Fragment>\n            );\n        } else {\n            return (\n                // <Scan\n                //     onCrossClicked={this.handleScannerButton}\n                //     // playSoundOnScan={true}\n                //     vibrateOnScan={true}\n                //     enableTorchToggle={true}\n                //     enablePinchToZoom={true}\n                //     enableCameraSwitcher={true}\n                //     guiStyle={\"viewfinder\"}\n                //     scanSettings={\n                //         new ScanSettings({\n                //             enabledSymbologies: [\n                //                 \"qr\",\n                //                 \"ean8\",\n                //                 \"ean13\",\n                //                 \"upca\",\n                //                 \"upce\",\n                //                 \"code128\",\n                //                 \"code39\",\n                //                 \"code93\",\n                //                 \"itf\",\n                //             ],\n                //             codeDuplicateFilter: 1000,\n                //         })\n                //     }\n                //     onScan={(scanResult) => {\n                //         //console.log(scanResult.barcodes[0].data);\n                //         this.handleBarcode(scanResult.barcodes[0].data);\n                //     }}\n                //     onError={(error) => {\n                //         console.error(error.message);\n                //     }}\n                // />\n                <Scan showScanner={this.handleScannerButton} history={this.props.history} />\n            );\n        }\n    };\n}\n\nexport default Navbar;\n"],"sourceRoot":""}