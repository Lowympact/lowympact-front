(this.webpackJsonplowympact=this.webpackJsonplowympact||[]).push([[14],{101:function(t,e,n){},102:function(t,e,n){"use strict";var s=n(48),a=n(0),c=n(150),r=n.n(c),i=function(t){var e=r()().toISOString();localStorage.setItem(t,e)};function o(t,e){var n=r()(function(t){return localStorage.getItem(t)}(t)),s=r()().diff(n,"days");return isNaN(s)||s>e}var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=Object(a.useState)(o(t,e)),c=Object(s.a)(n,2),r=c[0],l=c[1],u=function(){l(!1),i(t)};return[r,u]},u=function(){if(navigator.standalone)return!1;var t=window.navigator.userAgent,e=!!t.match(/iPad/i),n=!!t.match(/iPhone/i);return e||n},d=function(){var t=l("iosInstallPromptedAt"),e=Object(s.a)(t,2),n=e[0],a=e[1];return[u()&&n,a]},j=function(){var t=Object(a.useState)(),e=Object(s.a)(t,2),n=e[0],c=e[1],r=l("webInstallPromptedAt"),i=Object(s.a)(r,2),o=i[0],u=i[1];Object(a.useEffect)((function(){var t=function(t){t.preventDefault(),o&&(c(t),localStorage.setItem("installPrompt",t))};return window.addEventListener("beforeinstallprompt",t),function(){return window.removeEventListener("beforeinstallprompt",t)}}),[o]);return[n,function(){u(),c(null)},function(){prompt=localStorage.getItem("installPrompt"),prompt.prompt(),prompt.userChoice.then((function(t){"accepted"!==t.outcome&&u(),localStorage.getItem("installPrompt",null)}))}]},b=(n(101),n(1));e.a=function(){var t=d(),e=Object(s.a)(t,2),n=e[0],a=e[1],c=j(),r=Object(s.a)(c,3),i=r[0],o=r[1],l=r[2];return n||i?Object(b.jsx)("div",{className:"install-popup",children:Object(b.jsxs)("div",{className:"install-popup-wrapper",children:[Object(b.jsx)("img",{className:"mx-auto",style:{borderTopRightRadius:"50%",borderTopLeftRadius:"50%",backgroundColor:"#fff",marginTop:"-50px"},width:"100px",src:"pwa-512x512.png",alt:"Icon"}),Object(b.jsxs)("div",{children:[n&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("h3",{children:"T\xe9l\xe9chargez l'application"})}),Object(b.jsxs)("div",{className:"text-center",children:["Cliquez sur ","  ",Object(b.jsx)("span",{className:"material-icons",children:"ios_share"}),"  ","puis \"Ajouter \xe0 l'\xe9cran d'accueil\""]}),Object(b.jsx)("div",{className:"button-dissmiss",children:Object(b.jsx)("button",{onClick:a,children:"Pas maintenant"})})]}),i&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("h3",{children:"Ne passez plus \xe0 c\xf4t\xe9 des alternatives durables"})}),Object(b.jsxs)("div",{className:"android-wrapper",children:[Object(b.jsx)("button",{className:"install-button",onClick:l,children:"Installer l'application"}),Object(b.jsx)("button",{className:"dont-install-button",onClick:o,children:"Pas maintenant"})]})]})]})]})}):null}},346:function(t,e,n){"use strict";n.r(e);var s=n(12),a=n(15),c=n(14),r=n(13),i=n(0),o=n.n(i),l=n(2),u=n(1);var d=function(){return Object(u.jsx)("div",{children:"Me connecter"})},j=n(44),b=n(43),p=(n(47),n(75),n(16)),m=n(55),f=n.n(m),h=n(102);var O=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).handleSubmit=function(t){t.preventDefault();var e=a.state,n=function(t,e){var n=[];return 0===t.length&&n.push(Object(u.jsx)("p",{children:"Saissez votre adresse e-mail"})),0===e.length&&n.push(Object(u.jsx)("p",{children:"Saissez votre mot de passe"})),n}(e.email,e.password);a.setState({errors:n}),0===n.length&&a.Connect()},a.componentDidMount=function(){a.Verify()},a.Verify=function(){var t=!0,e=localStorage.getItem("token");if(e){var n=f.a.decode(e,{complete:!0}),s=new Date;n.payload.exp>=s.getTime()/1e3&&(t=!1)}!1===t&&a.setState({redirect:!0})},a.Connect=function(){fetch("https://api.lowympact.fr/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json","api-key":"99d8fb95-abdd-4885-bf6c-3a81d8874043"},body:JSON.stringify({email:a.state.email,password:a.state.password})}).then((function(t){return t.json()})).then((function(t){if("No user found"===t.error){a.setState({loginSuccessful:!1});var e=a.state.errors;e.push(Object(u.jsx)("p",{children:"Utilisateur Inconnu"})),a.setState({errors:e})}else if("Incorrect password"!==t.error&&t.success)localStorage.setItem("token",t.token),localStorage.setItem("userId",t._id),a.setState({loginSuccessful:!0,redirect:!0});else{a.setState({loginSuccessful:!1});var n=a.state.errors;n.push(Object(u.jsx)("p",{children:"Mot de passe Incorrect"})),a.setState({errors:n})}}))},a.onPasswordChange=function(){a.setState({password:a.passwordInput.value,email:a.emailInput.value})},a.state={email:"",password:"",errors:[],redirect:!1,loginSuccessful:null},a}return Object(a.a)(n,[{key:"render",value:function(){var t=this;return this.state.redirect?Object(u.jsx)(l.a,{to:"/history"}):Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(p.b,{to:"/login",children:Object(u.jsx)(b.a,{})}),Object(u.jsx)("div",{className:"logo-fruits",children:Object(u.jsx)("img",{src:j.a,className:"logo",alt:"Fruits"})}),Object(u.jsx)(p.b,{className:"back-button",to:"/login",children:"< Retour"}),Object(u.jsxs)("div",{className:"signin-container",children:[Object(u.jsxs)("form",{className:"forms",children:[Object(u.jsxs)("label",{children:["email",Object(u.jsx)("input",{className:"input-forms",value:this.state.email,onChange:this.onPasswordChange,ref:function(e){return t.emailInput=e},type:"email"})]}),Object(u.jsxs)("label",{children:["mot de passe",Object(u.jsx)("input",{className:"input-forms",value:this.state.password,onChange:this.onPasswordChange,ref:function(e){return t.passwordInput=e},type:"password"})]})]}),Object(u.jsx)("label",{className:"errors-signin",children:this.state.errors}),Object(u.jsx)("div",{className:"button-signin",onClick:this.handleSubmit,children:Object(u.jsx)(d,{})})]}),Object(u.jsx)(h.a,{})]})}}]),n}(i.Component);e.default=O},41:function(t,e,n){"use strict";e.a=n.p+"static/media/logo.b235ef42.svg"},43:function(t,e,n){"use strict";n(52);var s=n(41),a=n(47),c=n(0),r=n.n(c),i=n(1);e.a=function(t){return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:a.a,className:"blob-top",alt:"Blob"})}),t.history?Object(i.jsx)(r.a.Fragment,{}):Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:a.a,className:"blob-left",alt:"Blob"})}),Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:a.a,className:"blob-right",alt:"Blob"})})," "]}),Object(i.jsxs)("div",{className:"header-container",children:[Object(i.jsx)("img",{src:s.a,className:"header-logo",alt:"Logo"}),Object(i.jsx)("span",{children:"Lowympact"})]})]})}},44:function(t,e,n){"use strict";e.a=n.p+"static/media/fruits-vegetables-basket-by-oblik-studio.7d5e1c64.svg"},47:function(t,e,n){"use strict";e.a=n.p+"static/media/bitmap.6f490d5b.png"},52:function(t,e,n){},58:function(t,e){},59:function(t,e){},60:function(t,e){},61:function(t,e){},63:function(t,e){},64:function(t,e){},65:function(t,e){},66:function(t,e){},67:function(t,e){},68:function(t,e){},69:function(t,e){},70:function(t,e){},75:function(t,e,n){}}]);
//# sourceMappingURL=14.5c10713d.chunk.js.map